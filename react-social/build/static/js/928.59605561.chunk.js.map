{"version":3,"file":"static/js/928.59605561.chunk.js","mappings":"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","sources":["app/pages/AssesmentQuestions/components/QuestionRecycleBinModal.tsx","app/pages/AssesmentQuestions/CreateQuestion.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport { GetDeletedQuestions, RestoreQuestion, PermanentDeleteQuestion } from \"../API/Question_APIs\";\nimport UseAnimations from \"react-useanimations\";\nimport trash from \"react-useanimations/lib/trash\";\nimport { MdRestorePage } from \"react-icons/md\";\n\ninterface QuestionRecycleBinModalProps {\n  show: boolean;\n  onHide: () => void;\n  onRestoreComplete: () => void;\n  sections: any[];\n}\n\nconst QuestionRecycleBinModal = ({\n  show,\n  onHide,\n  onRestoreComplete,\n  sections,\n}: QuestionRecycleBinModalProps) => {\n  const [deletedQuestions, setDeletedQuestions] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [actionLoading, setActionLoading] = useState<number | null>(null);\n\n  const fetchDeletedQuestions = async () => {\n    setLoading(true);\n    try {\n      const response = await GetDeletedQuestions();\n      setDeletedQuestions(response.data);\n    } catch (error) {\n      console.error(\"Error fetching deleted questions:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    if (show) {\n      fetchDeletedQuestions();\n    }\n  }, [show]);\n\n  const handleRestore = async (id: number) => {\n    setActionLoading(id);\n    try {\n      await RestoreQuestion(id);\n      setDeletedQuestions((prev) => prev.filter((q) => q.questionId !== id && q.id !== id));\n      onRestoreComplete();\n    } catch (error) {\n      console.error(\"Error restoring question:\", error);\n      alert(\"Failed to restore question. Please try again.\");\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const handlePermanentDelete = async (id: number) => {\n    if (!window.confirm(\"Are you sure you want to permanently delete this question? This action cannot be undone.\")) {\n      return;\n    }\n    setActionLoading(id);\n    try {\n      await PermanentDeleteQuestion(id);\n      setDeletedQuestions((prev) => prev.filter((q) => q.questionId !== id && q.id !== id));\n    } catch (error) {\n      console.error(\"Error permanently deleting question:\", error);\n      alert(\"Failed to permanently delete question. Please try again.\");\n    } finally {\n      setActionLoading(null);\n    }\n  };\n\n  const getSectionName = (question: any) => {\n    const sectionId = question.section?.sectionId ?? question.sectionId;\n    return sections.find((s) => s.sectionId === sectionId)?.sectionName ?? \"Unknown\";\n  };\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" centered>\n      <Modal.Header closeButton>\n        <Modal.Title>Recycle Bin - Deleted Questions</Modal.Title>\n      </Modal.Header>\n      <Modal.Body style={{ maxHeight: \"60vh\", overflowY: \"auto\" }}>\n        {loading ? (\n          <div className=\"text-center py-4\">\n            <span className=\"spinner-border spinner-border-sm me-2\" role=\"status\" />\n            Loading deleted questions...\n          </div>\n        ) : deletedQuestions.length === 0 ? (\n          <div className=\"text-center py-4 text-muted\">\n            No deleted questions found.\n          </div>\n        ) : (\n          <table className=\"table table-hover\">\n            <thead>\n              <tr>\n                <th>#</th>\n                <th>Question Text</th>\n                <th>Type</th>\n                <th>Section</th>\n                <th>Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              {deletedQuestions.map((question, index) => {\n                const qId = question.questionId ?? question.id;\n                const isActionLoading = actionLoading === qId;\n                return (\n                  <tr key={qId}>\n                    <td>{index + 1}</td>\n                    <td style={{ maxWidth: \"300px\", overflow: \"hidden\", textOverflow: \"ellipsis\", whiteSpace: \"nowrap\" }}>\n                      {question.questionText}\n                    </td>\n                    <td>{question.questionType}</td>\n                    <td>{getSectionName(question)}</td>\n                    <td>\n                      <div className=\"d-flex gap-1\">\n                        <button\n                          onClick={() => handleRestore(qId)}\n                          className=\"btn btn-icon btn-success btn-sm\"\n                          title=\"Restore question\"\n                          disabled={isActionLoading}\n                        >\n                          {isActionLoading ? (\n                            <span className=\"spinner-border spinner-border-sm\" role=\"status\" />\n                          ) : (\n                            <MdRestorePage size={16} />\n                          )}\n                        </button>\n                        <button\n                          onClick={() => handlePermanentDelete(qId)}\n                          className=\"btn btn-icon btn-danger btn-sm\"\n                          title=\"Permanently delete\"\n                          disabled={isActionLoading}\n                        >\n                          <UseAnimations animation={trash} size={20} strokeColor={\"#EFF8FE\"} />\n                        </button>\n                      </div>\n                    </td>\n                  </tr>\n                );\n              })}\n            </tbody>\n          </table>\n        )}\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={onHide}>\n          Close\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default QuestionRecycleBinModal;\n","import { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { IconContext } from \"react-icons\";\nimport { MdQuestionAnswer } from \"react-icons/md\";\nimport { FaRecycle } from \"react-icons/fa\";\nimport { useNavigate } from \"react-router-dom\";\nimport { ReadQuestionSectionData } from \"../QuestionSections/API/Question_Section_APIs\";\nimport { ReadQuestionsData, ReadQuestionsDataList } from \"./API/Question_APIs\";\nimport { QuestionTable } from \"./components\";\nimport QuestionRecycleBinModal from \"./components/QuestionRecycleBinModal\";\n\nconst AssessmentQuestionsPage = () => {\n  const [questionsData, setQuestionsData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [sections, setSections] = useState<any[]>([]); \n  const [pageLoading, setPageLoading] = useState([\"false\"]);\n  const [showRecycleBinModal, setShowRecycleBinModal] = useState(false);\n  const navigate = useNavigate();\n\n\n  const fetchQuestions = async () => {\n    setLoading(true);\n    try {\n      const response = await ReadQuestionsDataList();\n      setQuestionsData(response.data);\n    } catch (error) {\n      console.error(\"Failed to fetch questions:\", error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n      const fetchSections = async () => {\n        setLoading(true);\n        try {\n          const response = await ReadQuestionSectionData();\n          setSections(response.data);\n        } catch (error) {\n          console.error(\"Error fetching sections:\", error);\n        } finally {\n          setLoading(false);\n        }\n      };\n      fetchSections();\n    }, []);\n\n  useEffect(() => {\n    fetchQuestions();\n    \n    if (pageLoading[0] === \"true\") {\n      setPageLoading([\"false\"]);\n    }\n  }, [pageLoading[0]]); \n\n\n  return (\n    <div className=\"card\">\n      {loading && (\n        <span className=\"indicator-progress m-5\" style={{ display: \"block\" }}>\n          Please wait...{\" \"}\n          <span className=\"spinner-border spinner-border-sm align-middle ms-2\"></span>\n        </span>\n      )}\n\n      {!loading && (\n        <div className=\"card-header border-0 pt-6\">\n          <div className=\"card-title\">\n            <h1>Assessment Questions</h1>\n          </div>\n\n          <div className=\"card-toolbar\">\n            <div className=\"d-flex justify-content-end gap-2\">\n              <Button\n                variant=\"outline-danger\"\n                className=\"d-flex align-items-center\"\n                onClick={() => setShowRecycleBinModal(true)}\n              >\n                <FaRecycle size={18} className=\"me-2\" />\n                Recycle Bin\n              </Button>\n              <Button\n                variant=\"primary\"\n                onClick={() => {\n                  navigate(\"/assessment-questions/create\");\n                }}\n              >\n                <IconContext.Provider\n                  value={{ style: { paddingBottom: \"4px\" } }}\n                >\n                  <div>\n                    Add Question <MdQuestionAnswer size={21} />\n                  </div>\n                </IconContext.Provider>\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!loading && (\n        <div className=\"card-body pt-5\">\n          <QuestionTable\n            data={questionsData}\n            sections={sections}\n            // setLoading={true}\n            setPageLoading={setPageLoading}\n          />\n        </div>\n      )}\n\n      <QuestionRecycleBinModal\n        show={showRecycleBinModal}\n        onHide={() => setShowRecycleBinModal(false)}\n        onRestoreComplete={() => setPageLoading([\"true\"])}\n        sections={sections}\n      />\n    </div>\n  );\n};\n\nexport default AssessmentQuestionsPage;"],"names":["_ref","show","onHide","onRestoreComplete","sections","deletedQuestions","setDeletedQuestions","useState","loading","setLoading","actionLoading","setActionLoading","useEffect","async","response","GetDeletedQuestions","data","error","console","fetchDeletedQuestions","getSectionName","question","_question$section$sec","_question$section","_sections$find$sectio","_sections$find","sectionId","section","find","s","sectionName","_jsxs","Modal","size","centered","children","_jsx","closeButton","style","maxHeight","overflowY","className","role","length","map","index","_question$questionId","qId","questionId","id","isActionLoading","maxWidth","overflow","textOverflow","whiteSpace","questionText","questionType","onClick","RestoreQuestion","prev","filter","q","alert","handleRestore","title","disabled","MdRestorePage","window","confirm","PermanentDeleteQuestion","handlePermanentDelete","UseAnimations","animation","trash","strokeColor","Button","variant","AssessmentQuestionsPage","questionsData","setQuestionsData","setSections","pageLoading","setPageLoading","showRecycleBinModal","setShowRecycleBinModal","navigate","useNavigate","ReadQuestionSectionData","fetchSections","ReadQuestionsDataList","fetchQuestions","display","FaRecycle","IconContext","value","paddingBottom","MdQuestionAnswer","QuestionTable","QuestionRecycleBinModal"],"sourceRoot":""}