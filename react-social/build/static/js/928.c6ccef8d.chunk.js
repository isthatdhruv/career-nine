"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[928],{71928:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var n=t(72791),i=t(43360),r=t(89983),l=t(16856),a=t(56355),o=t(16871),d=t(34042),c=t(93189),h=t(43584),u=t(39763),x=t(70099),j=t(10120),m=t(80184);const y=e=>{let{show:s,onHide:t,onRestoreComplete:r,sections:a}=e;const[o,d]=(0,n.useState)([]),[h,y]=(0,n.useState)(!1),[p,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{s&&(async()=>{y(!0);try{const e=await(0,c.au)();d(e.data)}catch(e){console.error("Error fetching deleted questions:",e)}finally{y(!1)}})()},[s]);const v=e=>{var s,t,n,i;const r=null!==(s=null===(t=e.section)||void 0===t?void 0:t.sectionId)&&void 0!==s?s:e.sectionId;return null!==(n=null===(i=a.find(e=>e.sectionId===r))||void 0===i?void 0:i.sectionName)&&void 0!==n?n:"Unknown"};return(0,m.jsxs)(u.Z,{show:s,onHide:t,size:"lg",centered:!0,children:[(0,m.jsx)(u.Z.Header,{closeButton:!0,children:(0,m.jsx)(u.Z.Title,{children:"Recycle Bin - Deleted Questions"})}),(0,m.jsx)(u.Z.Body,{style:{maxHeight:"60vh",overflowY:"auto"},children:h?(0,m.jsxs)("div",{className:"text-center py-4",children:[(0,m.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading deleted questions..."]}):0===o.length?(0,m.jsx)("div",{className:"text-center py-4 text-muted",children:"No deleted questions found."}):(0,m.jsxs)("table",{className:"table table-hover",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{children:"#"}),(0,m.jsx)("th",{children:"Question Text"}),(0,m.jsx)("th",{children:"Type"}),(0,m.jsx)("th",{children:"Section"}),(0,m.jsx)("th",{children:"Actions"})]})}),(0,m.jsx)("tbody",{children:o.map((e,s)=>{var t;const n=null!==(t=e.questionId)&&void 0!==t?t:e.id,i=p===n;return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:s+1}),(0,m.jsx)("td",{style:{maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.questionText}),(0,m.jsx)("td",{children:e.questionType}),(0,m.jsx)("td",{children:v(e)}),(0,m.jsx)("td",{children:(0,m.jsxs)("div",{className:"d-flex gap-1",children:[(0,m.jsx)("button",{onClick:()=>(async e=>{f(e);try{await(0,c.ak)(e),d(s=>s.filter(s=>s.questionId!==e&&s.id!==e)),r()}catch(s){console.error("Error restoring question:",s),alert("Failed to restore question. Please try again.")}finally{f(null)}})(n),className:"btn btn-icon btn-success btn-sm",title:"Restore question",disabled:i,children:i?(0,m.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status"}):(0,m.jsx)(l.dMk,{size:16})}),(0,m.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to permanently delete this question? This action cannot be undone.")){f(e);try{await(0,c.cJ)(e),d(s=>s.filter(s=>s.questionId!==e&&s.id!==e))}catch(s){console.error("Error permanently deleting question:",s),alert("Failed to permanently delete question. Please try again.")}finally{f(null)}}})(n),className:"btn btn-icon btn-danger btn-sm",title:"Permanently delete",disabled:i,children:(0,m.jsx)(x.Z,{animation:j.Z,size:20,strokeColor:"#EFF8FE"})})]})})]},n)})})]})}),(0,m.jsx)(u.Z.Footer,{children:(0,m.jsx)(i.Z,{variant:"secondary",onClick:t,children:"Close"})})]})},p=()=>{const[e,s]=(0,n.useState)([]),[t,u]=(0,n.useState)(!1),[x,j]=(0,n.useState)([]),[p,f]=(0,n.useState)(["false"]),[v,b]=(0,n.useState)(!1),g=(0,o.s0)();return(0,n.useEffect)(()=>{(async()=>{u(!0);try{const e=await(0,d.Bx)();j(e.data)}catch(e){console.error("Error fetching sections:",e)}finally{u(!1)}})()},[]),(0,n.useEffect)(()=>{(async()=>{u(!0);try{const e=await(0,c.kT)();s(e.data)}catch(e){console.error("Failed to fetch questions:",e)}finally{u(!1)}})(),"true"===p[0]&&f(["false"])},[p[0]]),(0,m.jsxs)("div",{className:"card",children:[t&&(0,m.jsxs)("span",{className:"indicator-progress m-5",style:{display:"block"},children:["Please wait..."," ",(0,m.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!t&&(0,m.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,m.jsx)("div",{className:"card-title",children:(0,m.jsx)("h1",{children:"Assessment Questions"})}),(0,m.jsx)("div",{className:"card-toolbar",children:(0,m.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,m.jsxs)(i.Z,{variant:"outline-danger",className:"d-flex align-items-center",onClick:()=>b(!0),children:[(0,m.jsx)(a.D_Y,{size:18,className:"me-2"}),"Recycle Bin"]}),(0,m.jsx)(i.Z,{variant:"primary",onClick:()=>{g("/assessment-questions/create")},children:(0,m.jsx)(r.Pd.Provider,{value:{style:{paddingBottom:"4px"}},children:(0,m.jsxs)("div",{children:["Add Question ",(0,m.jsx)(l.HFe,{size:21})]})})})]})})]}),!t&&(0,m.jsx)("div",{className:"card-body pt-5",children:(0,m.jsx)(h.E,{data:e,sections:x,setPageLoading:f})}),(0,m.jsx)(y,{show:v,onHide:()=>b(!1),onRestoreComplete:()=>f(["true"]),sections:x})]})}}}]);
//# sourceMappingURL=928.c6ccef8d.chunk.js.map