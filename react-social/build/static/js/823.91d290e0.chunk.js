"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[823],{23823:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var l=s(92506),r=s(72791),i=s(81343),n=s(21799),o=s(78820),t=s(2272),d=s(45856),c=s(81724),u=s(74569),p=s.n(u);const m="https://api.career-9.com",b=("".concat(m,"/roleurl/createRole"),"".concat(m,"/user/get")),h=("".concat(m,"/user/getbyid/"),"".concat(m,"/user/update"),"".concat(m,"/user/delete/"),"".concat(m,"/role/get"),"".concat(m,"/rolegroup/get")),g=("".concat(m,"/userrolegroupmapping/get"),"".concat(m,"/userrole/update/"),"".concat(m,"/userrolegroupmapping/update")),v="".concat(m,"/userrolegroupmapping/delete/");"".concat(m,"/userrole/get/"),"".concat(m,"/google-api/password-reset/update");function x(){return p().get(h)}function j(e){return p().post(g,{values:e})}var f=s(80184);c.Ry().shape({user:c.Z_().required("User Name is required")});const N=e=>{const[a,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]);e.data.id=null==e.data.id?0:e.data.id,e.data.name=null==e.data.name?"":e.data.name,e.data.userRoleGroupMappings=null==e.data.userRoleGroupMappings?"":e.data.userRoleGroupMappings;var m={id:e.data.userRoleGroupMappings.id,user:e.data.id,roleGroupTemp:e.data.userRoleGroupMappings,display:1};const h=(0,l.TA)({enableReinitialize:!0,initialValues:m,onSubmit:e=>{e.roleGroupTemp=d.default.map(e.roleGroupTemp,e=>e.id.value);try{j(e).then(()=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}h.resetForm()}}),[g,N]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{x().then(e=>{N(e.data)})}catch(e){console.error(e),window.location.replace("/error")}try{p().get(b).then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));u(a)})}catch(e){console.error(e),window.location.replace("/error")}},[]);var w=g.map(e=>({label:e.name,value:e.id})),y={label:e.data.name,value:e.data.id},M=d.default.map(e.data.userRoleGroupMappings,e=>({label:e.roleGroup.name,value:e.roleGroup.id}));return(0,f.jsxs)(f.Fragment,{children:[a&&(0,f.jsxs)("span",{className:"indicator-progress mx-3 mt-5 mb-0",style:{display:"block"},children:["Please wait..."," ",(0,f.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!a&&(0,f.jsx)(i.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5",id:"college_data_form",onSubmit:h.handleSubmit,children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(t.ZP,{closeMenuOnSelect:!1,defaultValue:y,options:c,placeholder:"Select User",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Users",noOptionsMessage:()=>"No User Available",onChange:e=>{h.setFieldValue("user",e.value)}}),h.touched.user&&h.errors.user&&(0,f.jsx)("div",{className:"fv-plugins-message-container",children:(0,f.jsx)("div",{className:"fv-help-block text-danger",children:"User name is required"})})]}),(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(t.ZP,{closeMenuOnSelect:!1,defaultValue:M,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",isMulti:!0,options:w,onChange:e=>{e=e.map(e=>({id:e})),h.setFieldValue("roleGroupTemp",e)}}),(0,f.jsx)("input",{type:"hidden",defaultValue:e.data.id,autoComplete:"off"})]}),(0,f.jsx)("div",{className:"col-2",children:(0,f.jsxs)("div",{className:"d-flex justify-content-end flex-shrink-0",children:[(0,f.jsx)(n.Z,{type:"submit",disabled:h.isSubmitting||!h.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,f.jsx)(o.bzc,{})}),(0,f.jsx)(n.Z,{type:"button",disabled:!1,onClick:()=>{var a;s(!0),(a=e.data.id,p().get(v+a)).then(()=>{window.location.reload()})},className:"btn btn-icon btn-danger  btn-active-color-primary btn-sm",children:(0,f.jsx)(o.YK6,{})})]})})]})},e.data.id)]})},w=(c.Ry().shape({name:c.Z_().required("required")}),()=>{const[e,a]=(0,r.useState)([]),[s,c]=(0,r.useState)([]),[u,b]=(0,r.useState)(!1),[h,g]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]),[v,w]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]);(0,r.useEffect)(()=>{b(!0);try{x().then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));g(a);try{p().get("".concat(m,"/user/registered-users")).then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));w(a),c(e.data),b(!1)})}catch(s){console.error(s),window.location.replace("/error")}})}catch(e){console.error(e),window.location.replace("/error")}},[]);const y=(0,l.TA)({enableReinitialize:!0,initialValues:{user:0,roleGroupTemp:[],display:1},onSubmit:e=>{b(!0),e.roleGroupTemp=d.default.map(e.roleGroupTemp,e=>e.id.value);try{j(e).then(()=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}y.resetForm()}});return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{id:"kt_content_container",className:"container-xxl",children:(0,f.jsx)("div",{className:"d-flex flex-column",children:(0,f.jsx)("div",{className:"row g-5 g-xl-8",children:(0,f.jsx)("div",{className:"card mb-5 mb-xl-8",children:(0,f.jsx)("div",{className:"card-body",children:(0,f.jsx)("div",{className:"row",children:(0,f.jsxs)("div",{className:"card",children:[u&&(0,f.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,f.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!u&&(0,f.jsx)("div",{className:"text-center mb-3",children:(0,f.jsx)("h3",{children:"User-Role List :"})}),!u&&s.map((e,a)=>(0,f.jsx)(N,{data:e},a)),!u&&(0,f.jsx)("div",{className:"text-center mt-10 mb-3",children:(0,f.jsx)("h3",{children:"To Create User-Role Mapping :"})}),!u&&(0,f.jsx)(i.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5 mb-5",id:"college_data_form",onSubmit:y.handleSubmit,children:(0,f.jsxs)("div",{className:"row",children:[(0,f.jsxs)("div",{className:"col",children:[(0,f.jsx)(t.ZP,{closeMenuOnSelect:!1,isMulti:!0,options:v,placeholder:"Select User",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Users",noOptionsMessage:()=>"No User Available",onChange:e=>{var a=e[0].value;y.setFieldValue("user",a)}}),y.touched.name&&y.errors.name&&(0,f.jsx)("div",{className:"fv-plugins-message-container",children:(0,f.jsx)("div",{className:"fv-help-block text-danger",children:"User name is required"})})]}),(0,f.jsx)("div",{className:"col",children:(0,f.jsx)(t.ZP,{closeMenuOnSelect:!1,isMulti:!0,options:h,placeholder:"Assign Role Group",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",onChange:e=>{e=e.map(e=>({id:e})),y.setFieldValue("roleGroupTemp",e)}})}),(0,f.jsx)("div",{className:"col-2",children:(0,f.jsx)("div",{className:"d-flex justify-content-end flex-shrink-0",children:(0,f.jsx)(n.Z,{type:"submit",disabled:y.isSubmitting||!y.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,f.jsx)(o.bzc,{})})})})]})})]})})})})})})})})})}}]);
//# sourceMappingURL=823.91d290e0.chunk.js.map