{"version":3,"file":"static/js/958.e7d67b4f.chunk.js","mappings":"8LAEA,MAAMA,EAAUC,2BAIT,SAASC,EAAwBC,GAQtC,OAAOC,IAAAA,KAAW,GAADC,OAAIL,EAAO,8BAA8BG,EAC5D,CAEO,SAASG,EAAiCC,GAC/C,OAAOH,IAAAA,IAAU,GAADC,OACXL,EAAO,uCAAAK,OAAsCE,GAEpD,CAEO,SAASC,EACdC,EACAN,GAEA,OAAOC,IAAAA,IAAU,GAADC,OAAIL,EAAO,+BAAAK,OAA8BI,GAAMN,EACjE,CAEO,SAASO,EAAwBD,GACtC,OAAOL,IAAAA,OAAa,GAADC,OAAIL,EAAO,+BAAAK,OAA8BI,GAC9D,CAGO,SAASE,IACd,OAAOP,IAAAA,IAAU,GAADC,OAAIL,EAAO,iCAC7B,CAIO,SAASY,EAAsBC,GACpC,OAAOT,IAAAA,IAAU,GAADC,OAAIL,EAAO,oCAAAK,OAAmCQ,GAChE,CAEO,SAASC,EACdD,EACAE,GAUA,OAAOX,IAAAA,KAAW,GAADC,OACZL,EAAO,wCAAAK,OAAuCQ,GACjDE,EAEJ,C,mXCjDMC,GAAgBC,EAAAA,EAAAA,GAAiB,MACvCD,EAAcE,YAAc,gBAC5B,MAAMC,GAAeC,EAAAA,EAAAA,GAAmB,gBAAiB,CACvDC,UAAWL,IAEPM,GAAYF,EAAAA,EAAAA,GAAmB,aAAc,CACjDC,UAAWE,EAAAA,IAEPC,EAAe,CACnBC,QAAS,UACTC,MAAM,EACNC,WAAYC,EAAAA,EACZC,WAAY,eAERC,EAAqBC,EAAAA,WAAiB,CAACC,EAAmBC,KAC9D,MAAAC,GAYIC,EAAAA,EAAAA,IAAgBH,EAAmB,CACrCN,KAAM,aAbF,SACJU,EAAQ,KACRV,EAAI,WACJG,EAAU,aACVQ,EAAY,UACZC,EAAS,SACTC,EAAQ,QACRd,EAAO,QACPe,EAAO,YACPC,EAAW,WACXd,GAEDO,EADIQ,GAAKC,EAAAA,EAAAA,GAAAT,EAAAU,GAIJC,GAASC,EAAAA,EAAAA,IAAmBV,EAAU,SACtCW,GAAcC,EAAAA,EAAAA,GAAiBC,IAC/BT,GACFA,GAAQ,EAAOS,KAGbC,GAA4B,IAAfvB,EAAsBC,EAAAA,EAAOD,EAE1CwB,GAAqBC,EAAAA,EAAAA,MAAM,OAAKC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACpCC,KAAM,SACDJ,OAAqBK,EAARb,GAAiB,IACnCT,IAAKA,EACLK,UAAWkB,IAAWlB,EAAWO,EAAQpB,GAAW,GAAJpB,OAAOwC,EAAM,KAAAxC,OAAIoB,GAAWgB,GAAe,GAAJpC,OAAOwC,EAAM,iBACpGN,SAAU,CAACE,IAA4BgB,EAAAA,EAAAA,KAAKC,EAAAA,EAAa,CACvDC,QAASZ,EACT,aAAclB,EACdJ,QAASY,IACPE,MAGN,OAAKW,GACeO,EAAAA,EAAAA,KAAKP,GAAUG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACjCO,eAAe,GACZlB,GAAK,IACRT,SAAKsB,EACLM,GAAInC,EACJa,SAAUY,KANYzB,EAAOyB,EAAQ,OASzCrB,EAAMZ,YAAc,QACpBY,EAAMN,aAAeA,EACrB,QAAesC,OAAOC,OAAOjC,EAAO,CAClCkC,KAAM1C,EACN2C,QAAS9C,I,yDCzEX,MAAMnB,EAAUC,2BCkChB,MAqlBA,EArlBoCiE,KAAO,IAADC,EAExC,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAgB,KAC7CC,EAAmBC,IAAwBF,EAAAA,EAAAA,UAAiB,KAC5DG,EAAoBC,IAAyBJ,EAAAA,EAAAA,UAAgB,KAC7DK,EAAoBC,IAAyBN,EAAAA,EAAAA,UAAiB,KAC9DO,EAAmBC,IAAwBR,EAAAA,EAAAA,WAAS,IACpDS,EAAoBC,IAAyBV,EAAAA,EAAAA,WAAS,IAGtDW,EAAaC,IAAkBZ,EAAAA,EAAAA,UAA6B,OAC5Da,EAAgBC,IAAqBd,EAAAA,EAAAA,WAAS,IAG9Ce,EAAYC,IAAiBhB,EAAAA,EAAAA,UAAsB,KACnDiB,EAAUC,IAAelB,EAAAA,EAAAA,UAAiB,IAC3CmB,GAAeC,EAAAA,EAAAA,QAAyB,OAGvCC,EAAYC,IAAiBtB,EAAAA,EAAAA,WAAS,IACtCuB,EAAcC,IAAmBxB,EAAAA,EAAAA,UAAc,OAGtDyB,EAAAA,EAAAA,WAAU,KACRC,KACC,IAEH,MAAMA,EAAiBC,UACrBnB,GAAqB,GACrB,IACE,MAAMoB,QAAYC,EAAAA,EAAAA,MAClB9B,EAAc6B,EAAI/F,MAAQ,GAC5B,CAAE,MAAOiG,GACPC,QAAQD,MAAM,6BAA8BA,EAC9C,CAAC,QACCtB,GAAqB,EACvB,IAIFiB,EAAAA,EAAAA,WAAU,KACJxB,EACF+B,EAAgBC,OAAOhC,KAEvBG,EAAsB,IACtBE,EAAsB,IACtBM,EAAe,MACfI,EAAc,MAGf,CAACf,IAEJ,MAAM+B,EAAkBL,UACtBjB,GAAsB,GACtBJ,EAAsB,IACtBM,EAAe,MACfI,EAAc,IACd,IACE,MAAOkB,EAAaC,SAAoBC,QAAQC,IAAI,EAClDrG,EAAAA,EAAAA,IAAiCC,IACjCI,EAAAA,EAAAA,QAEIiG,EAAWJ,EAAYrG,MAAQ,GAC/B0G,EAAiBJ,EAAWtG,MAAQ,GAGpC2G,EAAY,IAAIC,IAAIH,EAASI,IAAKC,GAAWA,EAAEC,eAC/CC,EAAWN,EAAeO,OAAQC,GAAWP,EAAUQ,IAAID,EAAE5G,KACnEiE,EAAsByC,EACxB,CAAE,MAAOf,GACPC,QAAQD,MAAM,8BAA+BA,EAC/C,CAAC,QACCpB,GAAsB,EACxB,IAIFe,EAAAA,EAAAA,WAAU,KACJpB,EACF4C,EAAYhB,OAAO5B,KAEnBO,EAAe,MACfI,EAAc,MAGf,CAACX,IAEJ,MAAM4C,EAActB,UAClBb,GAAkB,GAClBE,EAAc,IACdQ,EAAgB,MAChB,IACE,MAAMI,QD5HL,SAA2BgB,GAChC,OAAO9G,IAAAA,IAAU,GAADC,OAAIL,EAAO,uCAAAK,OAAsC6G,GACnE,CC0HwBM,CAAkBN,GACpChC,EAAegB,EAAI/F,KACrB,CAAE,MAAOiG,GACPC,QAAQD,MAAM,0BAA2BA,GACzCjD,MAAM,0FACR,CAAC,QACCiC,GAAkB,EACpB,GAIIqC,EAA0D,CAAC,EACjE,GAAIxC,EACF,IAAK,MAAMyC,KAAKzC,EAAY0C,UACtBD,EAAEE,sBACJH,EAAiBC,EAAEE,qBAAuBF,GAMhD,MAAMG,EAAoBpD,EAuBpBqD,EAAkBA,CACtBC,EACAC,KAEA,GAAkB,OAAdD,QAAoCxE,IAAdwE,GAAyC,KAAdA,EACnD,MAAO,CAAEE,SAAU,MAGrB,MAAMC,EAAMC,OAAOJ,GAAWK,OAC9B,GAAY,KAARF,EAAY,MAAO,CAAED,SAAU,MAEnC,MAAMI,EAAUL,EAASK,QACzB,IAAKA,GAA8B,IAAnBA,EAAQC,OACtB,MAAO,CAAEL,SAAU,KAAM7B,MAAO,sBAIlC,MAAMmC,EAAMhC,OAAO2B,GACnB,IAAKM,MAAMD,IAAQhC,OAAOkC,UAAUF,IAAQA,GAAO,EAAG,CACpD,MAAMG,EAAML,EAAQM,KAAMC,GAAMA,EAAEC,WAAaN,GAC/C,OAAIG,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAM7B,MAAM,YAAD/F,OAAckI,EAAG,uBAAAlI,OAAsBgI,EAAQC,OAAM,KACrF,CAGA,MAAMQ,EAAQZ,EAAIa,cAClB,GAAI,UAAUC,KAAKF,GAAQ,CACzB,MAAMG,EAAMH,EAAMI,WAAW,GAAK,GAC5BR,EAAML,EAAQM,KAAMC,GAAMA,EAAEC,WAAaI,GAC/C,OAAIP,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAM7B,MAAM,UAAD/F,OAAYyI,EAAK,uBAAAzI,OAAsBgI,EAAQC,OAAM,aACrF,CAGA,MAAMa,EAAQjB,EAAIkB,cAClB,GAAc,QAAVD,GAA6B,MAAVA,EAAe,CACpC,MAAMT,EAAML,EAAQM,KAAMC,GAAqB,IAAfA,EAAEC,UAClC,OAAIH,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAM7B,MAAO,0BAClC,CACA,GAAc,OAAV+C,GAA4B,MAAVA,EAAe,CACnC,MAAMT,EAAML,EAAQM,KAAMC,GAAqB,IAAfA,EAAEC,UAClC,OAAIH,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAM7B,MAAO,0BAClC,CAEA,MAAO,CAAE6B,SAAU,KAAM7B,MAAM,wBAAD/F,OAA0B6H,EAAG,OAsJvDmB,EAAkBpE,EACpBA,EAAY0C,UAAUP,OAAQM,GAAMA,EAAEE,qBACtC,GAUJ,OACExE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,cAAaC,UAC1BkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,aAAYC,SAAC,sCAE7Ba,EAAAA,EAAAA,MAAA,OAAKd,UAAU,YAAWC,SAAA,EAExBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,+BAA8BC,SAAA,EAC3CkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,OAAMC,SAAC,gCACrBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,0BAAyBC,SAAA,EACtCa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAAC6F,EAAAA,EAAAA,MAAU,CAAA/G,SAAC,uBACXsC,GACCzB,EAAAA,EAAAA,MAAA,OAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAC8F,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,OAAO,kBAG1CrG,EAAAA,EAAAA,MAACkG,EAAAA,EAAAA,OAAW,CACVI,MAAOnF,EACPoF,SAAW1G,GAAMuB,EAAqBvB,EAAE2G,OAAOF,OAAOnH,SAAA,EAEtDkB,EAAAA,EAAAA,KAAA,UAAQiG,MAAM,GAAEnH,SAAC,2BAChB6B,EAAW4C,IAAK6C,IACfpG,EAAAA,EAAAA,KAAA,UAEEiG,MAAOG,EAAKtJ,cAAcgC,SAEzBsH,EAAKC,eAHDD,EAAKtJ,uBASpB6C,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAAC6F,EAAAA,EAAAA,MAAU,CAAA/G,SAAC,eACXwC,GACC3B,EAAAA,EAAAA,MAAA,OAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAC8F,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,OAAO,kBAG1CrG,EAAAA,EAAAA,MAACkG,EAAAA,EAAAA,OAAW,CACVI,MAAO/E,EACPgF,SAAW1G,GAAM2B,EAAsB3B,EAAE2G,OAAOF,OAChDK,UAAWxF,EAAkBhC,SAAA,EAE7BkB,EAAAA,EAAAA,KAAA,UAAQiG,MAAM,GAAEnH,SAAC,4BAChBsF,EAAkBb,IAAKK,IACtB5D,EAAAA,EAAAA,KAAA,UAAmBiG,MAAOrC,EAAE5G,GAAG8B,SAC5B8E,EAAE2C,gBADQ3C,EAAE5G,YAOvBgD,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,SACtB4C,IACC1B,EAAAA,EAAAA,KAAC8F,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,KAAKnH,UAAU,cAIrD2C,IACC7B,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAC6G,EAAAA,EAAK,CAACC,GAAG,UAAU5H,UAAU,OAAMC,SAAA,CAAC,kBACnB0C,EAAYkF,sBAE9B/G,EAAAA,EAAAA,MAAC6G,EAAAA,EAAK,CAACC,GAAG,OAAM3H,SAAA,CACb0C,EAAY0C,UAAUW,OAAO,6BAOrCrD,IACC7B,EAAAA,EAAAA,MAAA,OAAKd,UAAU,+BAA8BC,SAAA,EAC3CkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,OAAMC,SAAC,uBACrBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,0BAAyBC,SAAA,EACtCkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,UACvBa,EAAAA,EAAAA,MAACgH,EAAAA,EAAM,CACL3I,QAAQ,kBACRkC,QApTe0G,KAC7B,IAAKpF,EAAa,OAElB,MAAMqF,EAAU,CAAC,UACjB,IAAK,MAAM5C,KAAKzC,EAAY0C,UACtBD,EAAEE,qBACJ0C,EAAQC,KAAK7C,EAAEE,qBAInB,MAAM4C,EAAKC,EAAAA,MAAAA,aAAwB,CAACH,IAC9BI,EAAKD,EAAAA,MAAAA,WACXA,EAAAA,MAAAA,kBAA6BC,EAAIF,EAAI,QACrCC,EAAAA,UACEC,EAAG,oBAADrK,OACkB4E,EAAY+E,eAAeW,QAAQ,OAAQ,KAAI,WAqSvBpI,SAAA,EAEhCkB,EAAAA,EAAAA,KAAA,KAAGnB,UAAU,wBAAwB,gCAIzCc,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAAC6F,EAAAA,EAAAA,MAAU,CAAA/G,SAAC,yBACZkB,EAAAA,EAAAA,KAAC6F,EAAAA,EAAAA,QAAY,CACXsB,KAAK,OACLC,OAAO,aACP5I,IAAKwD,EACLkE,SA3PU1G,IAA4C,IAAD6H,EACnE,MAAMC,EAAqB,QAAjBD,EAAG7H,EAAE2G,OAAOoB,aAAK,IAAAF,OAAA,EAAdA,EAAiB,GAC9B,IAAKC,IAAS9F,EAAa,OAE3BO,EAAYuF,EAAKE,MACjBnF,EAAgB,MAEhB,MAAMoF,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IAAS,IAADC,EACvB,MAAMnL,EAAiB,QAAbmL,EAAGD,EAAIzB,cAAM,IAAA0B,OAAA,EAAVA,EAAYC,OACnBC,EAAWf,EAAAA,KAAUtK,EAAM,CAAEyK,KAAM,WACnCa,EAAYD,EAASE,WAAW,GAChCC,EAAQH,EAASI,OAAOH,GAGxBI,EAFkBpB,EAAAA,MAAAA,cAAyBkB,EAAO,CAAEG,OAAQ,KAE/B9E,IAAK+E,IACtC,MAAMC,OAA2BzI,IAAlBwI,EAAY,QAAqC,KAAlBA,EAAY,OACtDxF,OAAOwF,EAAY,QACnB,KAEEE,EAA+C,CAAC,EAChDC,EAAuC,CAAC,EAE9C,IAAK,MAAMxE,KAAKzC,EAAa0C,UAAW,CACtC,MAAMwE,EAASzE,EAAEE,oBACjB,IAAKuE,EAAQ,SACb,MAAMpE,EAAYgE,EAAII,GAChBZ,EAASzD,EAAgBC,EAAWL,GAC1CuE,EAAQE,GAAUZ,EAAOtD,SACrBsD,EAAOnF,QACT8F,EAAOC,GAAUZ,EAAOnF,MAE5B,CAEA,MAAO,CACL4F,SACAC,UACAC,SACAE,YAAwB,OAAXJ,EAAkB,sBAAmBzI,KAItD+B,EAAcuG,IAEhBX,EAAOmB,mBAAmBtB,UAkNhBtH,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,SACtBgD,IACC9B,EAAAA,EAAAA,KAAA,SAAOnB,UAAU,aAAYC,SAAEgD,YAQxCF,EAAWiD,OAAS,GAAKrD,IACxB7B,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAA,MAAId,UAAU,OAAMC,SAAA,CAAC,YACT8C,EAAWiD,OAAO,aAC3BjD,EAAWiH,KAAMC,GAAMzI,OAAO0I,KAAKD,EAAEL,QAAQ5D,OAAS,KACrD7E,EAAAA,EAAAA,KAACwG,EAAAA,EAAK,CAACC,GAAG,UAAU5H,UAAU,OAAMC,SAAC,mBAKzCkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,mBAAmBmK,MAAO,CAAEC,UAAW,SAAUnK,UAC9Da,EAAAA,EAAAA,MAAA,SAAOd,UAAU,4CAA2CC,SAAA,EAC1DkB,EAAAA,EAAAA,KAAA,SAAOnB,UAAU,aAAamK,MAAO,CAAEE,SAAU,SAAUC,IAAK,GAAIrK,UAClEa,EAAAA,EAAAA,MAAA,MAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAA,MAAIgJ,MAAO,CAAEI,SAAU,QAAStK,SAAC,OACjCkB,EAAAA,EAAAA,KAAA,MAAIgJ,MAAO,CAAEI,SAAU,SAAUtK,SAAC,WACjC8G,EAAgBrC,IAAKU,IACpBjE,EAAAA,EAAAA,KAAA,MAEEgJ,MAAO,CAAEI,SAAU,SACnBC,MAAOpF,EAAEqF,aAAaxK,SAErBmF,EAAEE,qBAJEF,EAAEE,4BASfnE,EAAAA,EAAAA,KAAA,SAAAlB,SACG8C,EAAW2B,IAAI,CAAC+E,EAAKiB,KAAM,IAAAC,EAAA,OAC1B7J,EAAAA,EAAAA,MAAA,MAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAA,MAAAlB,SAAKyK,EAAS,KACdvJ,EAAAA,EAAAA,KAAA,MACEnB,UACEyJ,EAAIK,YAAc,eAAiB,GACpC7J,UAEDkB,EAAAA,EAAAA,KAAA,SACEmH,KAAK,SACLtI,UAAU,+BACVoH,MAAiB,QAAZuD,EAAElB,EAAIC,cAAM,IAAAiB,EAAAA,EAAI,GACrBtD,SAAW1G,IACTiK,OAjQEC,EAiQiBH,EAjQCtD,EAiQOzG,EAAE2G,OAAOF,WAhQ5DpE,EAAe8H,IACb,MAAMC,EAAU,IAAID,GACdE,EAAmB,KAAV5D,EAAe,KAAOnD,OAAOmD,GAO5C,OANA2D,EAAQF,IAAS9J,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACZgK,EAAQF,IAAS,IACpBnB,OAAQsB,EACRlB,YACa,OAAXkB,GAAmB9E,MAAM8E,GAAU,sBAAmB/J,IAEnD8J,IAVgBH,IAACC,EAAkBzD,GAmQtB+C,MAAO,CAAEc,MAAO,aAGnBlE,EAAgBrC,IAAKU,IACpB,MAAMyE,EAASzE,EAAEE,oBACXK,EAAW8D,EAAIE,QAAQE,GACvBqB,IAAazB,EAAIG,OAAOC,GACxBsB,EAAuB,OAAbxF,IAAsBuF,EAEtC,OACE/J,EAAAA,EAAAA,KAAA,MAEEnB,UACEkL,EACI,eACAC,EACA,gBACA,GAENX,MAAOf,EAAIG,OAAOC,IAAW,GAAG5J,UAEhCa,EAAAA,EAAAA,MAAA,UACEd,UAAU,6BACVoH,MAAe,OAARzB,QAAQ,IAARA,EAAAA,EAAY,GACnB0B,SAAW1G,GA7QZyK,EACzBP,EACAhB,EACAlE,KAEA3C,EAAe8H,IACb,MAAMC,EAAU,IAAID,GACdrB,GAAG1I,EAAAA,EAAAA,GAAA,GAAQgK,EAAQF,IACzBpB,EAAIE,SAAO5I,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ0I,EAAIE,SAAO,IAAE,CAACE,GAASlE,IAE1C,MAAM0F,GAAStK,EAAAA,EAAAA,GAAA,GAAQ0I,EAAIG,QAI3B,cAHOyB,EAAUxB,GACjBJ,EAAIG,OAASyB,EACbN,EAAQF,GAAYpB,EACbsB,KAgQmBK,CACEV,EACAb,EACmB,KAAnBlJ,EAAE2G,OAAOF,MACL,KACAnD,OAAOtD,EAAE2G,OAAOF,QAEvBnH,SAAA,EAEDkB,EAAAA,EAAAA,KAAA,UAAQiG,MAAM,GAAEnH,SAAC,eAChBmF,EAAEW,QAAQrB,IAAK0B,IACdjF,EAAAA,EAAAA,KAAA,UAEEiG,MAAOhB,EAAIT,SAAS1F,SAEnBmG,EAAIkF,YAHAlF,EAAIT,eA1BVkE,OAzBJa,eAsEpB3H,EAAWiD,OAAS,GAAKrD,IACxBxB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,0BAAyBC,UACtCa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,kCAAiCC,SAAA,EAC9CkB,EAAAA,EAAAA,KAAC2G,EAAAA,EAAM,CACL3I,QAAQ,UACRgI,KAAK,KACL9F,QAhSOsC,UACnB,IAAKhB,GAAqC,IAAtBI,EAAWiD,OAAc,OAG7C,MAAMuF,EAAcxI,EAAW+B,OAC5BmF,GAAmB,OAAbA,EAAEP,QAAmBO,EAAEH,aAEhC,GAAIyB,EAAYvF,OAAS,EAIvB,YAHAnF,MAAM,GAAD9C,OACAwN,EAAYvF,OAAM,+EAMzB,MAAMwF,EAAiBzI,EAAW+B,OAC/BmF,GAAMzI,OAAO0I,KAAKD,EAAEL,QAAQ5D,OAAS,GAExC,KAAIwF,EAAexF,OAAS,IAEvByF,OAAOC,QAAQ,GAAD3N,OACVyN,EAAexF,OAAM,8EAH9B,CASA1C,GAAc,GACdE,EAAgB,MAEhB,IACE,MAAMmI,EAAW5I,EAAW2B,IAAK+E,IAC/B,MAAME,EACJ,GACF,IAAK,MAAMvE,KAAKzC,EAAa0C,UAAW,CACtC,MAAMwE,EAASzE,EAAEE,oBACjB,IAAKuE,EAAQ,SACb,MAAMlE,EAAW8D,EAAIE,QAAQE,GACZ,OAAblE,QAAkC1E,IAAb0E,GACvBgE,EAAQ1B,KAAK,CACX2D,wBAAyBxG,EAAEwG,wBAC3BjG,YAGN,CACA,MAAO,CAAEkG,cAAepC,EAAIC,OAASC,aAGjC/F,QDtVsB/F,ECsVQ,CAClC+G,aAAcjC,EAAaiC,aAC3B+G,YDjVC7N,IAAAA,KAAW,GAADC,OAAIL,EAAO,kCAAkCG,ICoV1D2F,EAAgBI,EAAI/F,KACtB,CAAE,MAAOiG,GAAa,IAADgI,EACnB/H,QAAQD,MAAM,iBAAkBA,GAChCN,EAAgB,CACduI,OAAQ,QACRC,SAAuB,QAAdF,EAAAhI,EAAMmI,gBAAQ,IAAAH,OAAA,EAAdA,EAAgBjO,OAAQiG,EAAMkI,SAE3C,CAAC,QACC1I,GAAc,EAChB,CDpWG,IAA2BzF,CC+T9B,GAwQY4J,SAAUpE,EAAWpD,SAEpBoD,GACCvC,EAAAA,EAAAA,MAAAoL,EAAAA,SAAA,CAAAjM,SAAA,EACEkB,EAAAA,EAAAA,KAAC8F,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,KAAKnH,UAAU,SAAS,oBAI3Dc,EAAAA,EAAAA,MAAAoL,EAAAA,SAAA,CAAAjM,SAAA,CAAE,eAAa8C,EAAWiD,OAAO,kBAIpCzC,GAAwC,YAAxBA,EAAawI,SAC5BjL,EAAAA,EAAAA,MAACtB,EAAK,CAACL,QAAQ,UAAUa,UAAU,mBAAkBC,SAAA,CAAC,yBAC7B,KACvBkB,EAAAA,EAAAA,KAAA,UAAAlB,SAASsD,EAAa4I,oBAA2B,cAC7B,QAAnBtK,EAAA0B,EAAaqG,cAAM,IAAA/H,OAAA,EAAnBA,EAAqBmE,QAAS,IAC7BlF,EAAAA,EAAAA,MAAA,QAAMd,UAAU,mBAAkBC,SAAA,CAC/BsD,EAAaqG,OAAO5D,OAAO,aAC3BzC,EAAaqG,OAAOlF,IAAI,CAAC0H,EAAUC,KAClCvL,EAAAA,EAAAA,MAAA,OAAAb,SAAA,CAAa,WACFmM,EAAIP,cAAc,KAAGO,EAAItI,QAD1BuI,UASnB9I,GAAwC,UAAxBA,EAAawI,SAC5BjL,EAAAA,EAAAA,MAACtB,EAAK,CAACL,QAAQ,SAASa,UAAU,mBAAkBC,SAAA,CAAC,sBAC/BsD,EAAayI,sB","sources":["app/pages/AssessmentMapping/API/AssessmentMapping_APIs.ts","../node_modules/react-bootstrap/esm/Alert.js","app/pages/OfflineAssessmentUpload/API/OfflineUpload_APIs.ts","app/pages/OfflineAssessmentUpload/OfflineAssessmentUploadPage.tsx"],"sourcesContent":["import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// ============ ADMIN APIs ============\n\nexport function createAssessmentMapping(data: {\n  assessmentId: number;\n  instituteCode: number;\n  mappingLevel: string;\n  sessionId?: number;\n  classId?: number;\n  sectionId?: number;\n}) {\n  return axios.post(`${API_URL}/assessment-mapping/create`, data);\n}\n\nexport function getAssessmentMappingsByInstitute(instituteCode: number) {\n  return axios.get(\n    `${API_URL}/assessment-mapping/getByInstitute/${instituteCode}`\n  );\n}\n\nexport function updateAssessmentMapping(\n  id: number,\n  data: { isActive: boolean }\n) {\n  return axios.put(`${API_URL}/assessment-mapping/update/${id}`, data);\n}\n\nexport function deleteAssessmentMapping(id: number) {\n  return axios.delete(`${API_URL}/assessment-mapping/delete/${id}`);\n}\n\n// Lightweight: only id, assessmentName, isActive (no questionnaire cascade)\nexport function getAssessmentSummaryList() {\n  return axios.get(`${API_URL}/assessments/get/list-summary`);\n}\n\n// ============ PUBLIC APIs ============\n\nexport function getMappingInfoByToken(token: string) {\n  return axios.get(`${API_URL}/assessment-mapping/public/info/${token}`);\n}\n\nexport function registerStudentByToken(\n  token: string,\n  studentData: {\n    name: string;\n    email: string;\n    dob: string;\n    phone: string;\n    gender: string;\n    classId?: number;\n    schoolSectionId?: number;\n  }\n) {\n  return axios.post(\n    `${API_URL}/assessment-mapping/public/register/${token}`,\n    studentData\n  );\n}\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport divWithClassName from './divWithClassName';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = createWithBsPrefix('alert-heading', {\n  Component: DivStyledAsH4\n});\nconst AlertLink = createWithBsPrefix('alert-link', {\n  Component: Anchor\n});\nconst defaultProps = {\n  variant: 'primary',\n  show: true,\n  transition: Fade,\n  closeLabel: 'Close alert'\n};\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show,\n    closeLabel,\n    closeVariant,\n    className,\n    children,\n    variant,\n    onClose,\n    dismissible,\n    transition,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nAlert.defaultProps = defaultProps;\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});","import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport function getOfflineMapping(assessmentId: number) {\n  return axios.get(`${API_URL}/assessment-answer/offline-mapping/${assessmentId}`);\n}\n\nexport function bulkSubmitAnswers(data: {\n  assessmentId: number;\n  students: {\n    userStudentId: number;\n    answers: { questionnaireQuestionId: number; optionId: number }[];\n  }[];\n}) {\n  return axios.post(`${API_URL}/assessment-answer/bulk-submit`, data);\n}\n","import { useEffect, useState, useRef } from \"react\";\nimport { Spinner, Button, Form, Badge, Alert } from \"react-bootstrap\";\nimport * as XLSX from \"xlsx\";\nimport { ReadCollegeData } from \"../College/API/College_APIs\";\nimport { getAssessmentMappingsByInstitute, getAssessmentSummaryList } from \"../AssessmentMapping/API/AssessmentMapping_APIs\";\nimport { getOfflineMapping, bulkSubmitAnswers } from \"./API/OfflineUpload_APIs\";\n\ninterface OptionInfo {\n  optionId: number;\n  sequence: number;\n  optionText: string;\n}\n\ninterface QuestionMapping {\n  questionnaireQuestionId: number;\n  excelQuestionHeader: string;\n  questionText: string;\n  questionType: string;\n  options: OptionInfo[];\n}\n\ninterface MappingData {\n  assessmentId: number;\n  assessmentName: string;\n  questionnaireName: string;\n  questions: QuestionMapping[];\n}\n\n// Parsed row: userId + optionId per question header (null = skipped)\ninterface ParsedRow {\n  userId: number | null;\n  answers: { [header: string]: number | null }; // header -> optionId\n  errors: { [header: string]: string }; // header -> error message\n  userIdError?: string;\n}\n\nconst OfflineAssessmentUploadPage = () => {\n  // Section 1: Selection state\n  const [institutes, setInstitutes] = useState<any[]>([]);\n  const [selectedInstitute, setSelectedInstitute] = useState<string>(\"\");\n  const [assessmentMappings, setAssessmentMappings] = useState<any[]>([]);\n  const [selectedAssessment, setSelectedAssessment] = useState<string>(\"\");\n  const [loadingInstitutes, setLoadingInstitutes] = useState(false);\n  const [loadingAssessments, setLoadingAssessments] = useState(false);\n\n  // Mapping data from backend\n  const [mappingData, setMappingData] = useState<MappingData | null>(null);\n  const [loadingMapping, setLoadingMapping] = useState(false);\n\n  // Section 2-3: Upload & Preview state\n  const [parsedRows, setParsedRows] = useState<ParsedRow[]>([]);\n  const [fileName, setFileName] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Section 4: Submit state\n  const [submitting, setSubmitting] = useState(false);\n  const [submitResult, setSubmitResult] = useState<any>(null);\n\n  // Load institutes on mount\n  useEffect(() => {\n    loadInstitutes();\n  }, []);\n\n  const loadInstitutes = async () => {\n    setLoadingInstitutes(true);\n    try {\n      const res = await ReadCollegeData();\n      setInstitutes(res.data || []);\n    } catch (error) {\n      console.error(\"Failed to load institutes:\", error);\n    } finally {\n      setLoadingInstitutes(false);\n    }\n  };\n\n  // Load assessments when institute changes\n  useEffect(() => {\n    if (selectedInstitute) {\n      loadAssessments(Number(selectedInstitute));\n    } else {\n      setAssessmentMappings([]);\n      setSelectedAssessment(\"\");\n      setMappingData(null);\n      setParsedRows([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedInstitute]);\n\n  const loadAssessments = async (instituteCode: number) => {\n    setLoadingAssessments(true);\n    setSelectedAssessment(\"\");\n    setMappingData(null);\n    setParsedRows([]);\n    try {\n      const [mappingsRes, summaryRes] = await Promise.all([\n        getAssessmentMappingsByInstitute(instituteCode),\n        getAssessmentSummaryList(),\n      ]);\n      const mappings = mappingsRes.data || [];\n      const allAssessments = summaryRes.data || [];\n\n      // Extract unique assessmentIds from mappings, then look up names from summary\n      const mappedIds = new Set(mappings.map((m: any) => m.assessmentId));\n      const filtered = allAssessments.filter((a: any) => mappedIds.has(a.id));\n      setAssessmentMappings(filtered);\n    } catch (error) {\n      console.error(\"Failed to load assessments:\", error);\n    } finally {\n      setLoadingAssessments(false);\n    }\n  };\n\n  // Load mapping when assessment changes\n  useEffect(() => {\n    if (selectedAssessment) {\n      loadMapping(Number(selectedAssessment));\n    } else {\n      setMappingData(null);\n      setParsedRows([]);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedAssessment]);\n\n  const loadMapping = async (assessmentId: number) => {\n    setLoadingMapping(true);\n    setParsedRows([]);\n    setSubmitResult(null);\n    try {\n      const res = await getOfflineMapping(assessmentId);\n      setMappingData(res.data);\n    } catch (error) {\n      console.error(\"Failed to load mapping:\", error);\n      alert(\"Failed to load assessment mapping. Make sure the assessment has a linked questionnaire.\");\n    } finally {\n      setLoadingMapping(false);\n    }\n  };\n\n  // Build a lookup: header -> QuestionMapping\n  const headerToQuestion: { [header: string]: QuestionMapping } = {};\n  if (mappingData) {\n    for (const q of mappingData.questions) {\n      if (q.excelQuestionHeader) {\n        headerToQuestion[q.excelQuestionHeader] = q;\n      }\n    }\n  }\n\n  // assessmentMappings now holds the filtered assessment summaries directly\n  const uniqueAssessments = assessmentMappings;\n\n  // ============ Template Download ============\n  const handleDownloadTemplate = () => {\n    if (!mappingData) return;\n\n    const headers = [\"userId\"];\n    for (const q of mappingData.questions) {\n      if (q.excelQuestionHeader) {\n        headers.push(q.excelQuestionHeader);\n      }\n    }\n\n    const ws = XLSX.utils.aoa_to_sheet([headers]);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"Data\");\n    XLSX.writeFile(\n      wb,\n      `offline_template_${mappingData.assessmentName.replace(/\\s+/g, \"_\")}.xlsx`\n    );\n  };\n\n  // ============ Excel Parsing ============\n  const resolveOptionId = (\n    cellValue: any,\n    question: QuestionMapping\n  ): { optionId: number | null; error?: string } => {\n    if (cellValue === null || cellValue === undefined || cellValue === \"\") {\n      return { optionId: null }; // Skipped\n    }\n\n    const val = String(cellValue).trim();\n    if (val === \"\") return { optionId: null };\n\n    const options = question.options;\n    if (!options || options.length === 0) {\n      return { optionId: null, error: \"No options defined\" };\n    }\n\n    // Try numeric: 1, 2, 3, 4 -> sequence\n    const num = Number(val);\n    if (!isNaN(num) && Number.isInteger(num) && num >= 1) {\n      const opt = options.find((o) => o.sequence === num);\n      if (opt) return { optionId: opt.optionId };\n      return { optionId: null, error: `Sequence ${num} out of range (max ${options.length})` };\n    }\n\n    // Try alphabetic: A, B, C, D -> 1, 2, 3, 4\n    const upper = val.toUpperCase();\n    if (/^[A-Z]$/.test(upper)) {\n      const seq = upper.charCodeAt(0) - 64; // A=1, B=2, etc.\n      const opt = options.find((o) => o.sequence === seq);\n      if (opt) return { optionId: opt.optionId };\n      return { optionId: null, error: `Letter ${upper} out of range (max ${options.length} options)` };\n    }\n\n    // Try Yes/No\n    const lower = val.toLowerCase();\n    if (lower === \"yes\" || lower === \"y\") {\n      const opt = options.find((o) => o.sequence === 1);\n      if (opt) return { optionId: opt.optionId };\n      return { optionId: null, error: \"No first option for Yes\" };\n    }\n    if (lower === \"no\" || lower === \"n\") {\n      const opt = options.find((o) => o.sequence === 2);\n      if (opt) return { optionId: opt.optionId };\n      return { optionId: null, error: \"No second option for No\" };\n    }\n\n    return { optionId: null, error: `Unrecognized value: \"${val}\"` };\n  };\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !mappingData) return;\n\n    setFileName(file.name);\n    setSubmitResult(null);\n\n    const reader = new FileReader();\n    reader.onload = (evt) => {\n      const data = evt.target?.result;\n      const workbook = XLSX.read(data, { type: \"binary\" });\n      const sheetName = workbook.SheetNames[0];\n      const sheet = workbook.Sheets[sheetName];\n      const jsonData: any[] = XLSX.utils.sheet_to_json(sheet, { defval: \"\" });\n\n      const rows: ParsedRow[] = jsonData.map((row: any) => {\n        const userId = row[\"userId\"] !== undefined && row[\"userId\"] !== \"\"\n          ? Number(row[\"userId\"])\n          : null;\n\n        const answers: { [header: string]: number | null } = {};\n        const errors: { [header: string]: string } = {};\n\n        for (const q of mappingData!.questions) {\n          const header = q.excelQuestionHeader;\n          if (!header) continue;\n          const cellValue = row[header];\n          const result = resolveOptionId(cellValue, q);\n          answers[header] = result.optionId;\n          if (result.error) {\n            errors[header] = result.error;\n          }\n        }\n\n        return {\n          userId,\n          answers,\n          errors,\n          userIdError: userId === null ? \"Missing userId\" : undefined,\n        };\n      });\n\n      setParsedRows(rows);\n    };\n    reader.readAsBinaryString(file);\n  };\n\n  // ============ Edit Handlers ============\n  const handleUserIdChange = (rowIndex: number, value: string) => {\n    setParsedRows((prev) => {\n      const updated = [...prev];\n      const numVal = value === \"\" ? null : Number(value);\n      updated[rowIndex] = {\n        ...updated[rowIndex],\n        userId: numVal,\n        userIdError:\n          numVal === null || isNaN(numVal) ? \"Invalid userId\" : undefined,\n      };\n      return updated;\n    });\n  };\n\n  const handleAnswerChange = (\n    rowIndex: number,\n    header: string,\n    optionId: number | null\n  ) => {\n    setParsedRows((prev) => {\n      const updated = [...prev];\n      const row = { ...updated[rowIndex] };\n      row.answers = { ...row.answers, [header]: optionId };\n      // Clear error for this cell\n      const newErrors = { ...row.errors };\n      delete newErrors[header];\n      row.errors = newErrors;\n      updated[rowIndex] = row;\n      return updated;\n    });\n  };\n\n  // ============ Submit ============\n  const handleSubmit = async () => {\n    if (!mappingData || parsedRows.length === 0) return;\n\n    // Validate all rows have userId\n    const invalidRows = parsedRows.filter(\n      (r) => r.userId === null || r.userIdError\n    );\n    if (invalidRows.length > 0) {\n      alert(\n        `${invalidRows.length} row(s) have invalid or missing userId. Please fix them before submitting.`\n      );\n      return;\n    }\n\n    // Check for errors\n    const rowsWithErrors = parsedRows.filter(\n      (r) => Object.keys(r.errors).length > 0\n    );\n    if (rowsWithErrors.length > 0) {\n      if (\n        !window.confirm(\n          `${rowsWithErrors.length} row(s) have parsing errors. Cells with errors will be skipped. Continue?`\n        )\n      )\n        return;\n    }\n\n    setSubmitting(true);\n    setSubmitResult(null);\n\n    try {\n      const students = parsedRows.map((row) => {\n        const answers: { questionnaireQuestionId: number; optionId: number }[] =\n          [];\n        for (const q of mappingData!.questions) {\n          const header = q.excelQuestionHeader;\n          if (!header) continue;\n          const optionId = row.answers[header];\n          if (optionId !== null && optionId !== undefined) {\n            answers.push({\n              questionnaireQuestionId: q.questionnaireQuestionId,\n              optionId,\n            });\n          }\n        }\n        return { userStudentId: row.userId!, answers };\n      });\n\n      const res = await bulkSubmitAnswers({\n        assessmentId: mappingData!.assessmentId,\n        students,\n      });\n\n      setSubmitResult(res.data);\n    } catch (error: any) {\n      console.error(\"Submit failed:\", error);\n      setSubmitResult({\n        status: \"error\",\n        message: error.response?.data || error.message,\n      });\n    } finally {\n      setSubmitting(false);\n    }\n  };\n\n  // ============ Helpers for table headers ============\n  const questionHeaders = mappingData\n    ? mappingData.questions.filter((q) => q.excelQuestionHeader)\n    : [];\n\n  const getOptionText = (header: string, optionId: number | null): string => {\n    if (optionId === null) return \"\";\n    const q = headerToQuestion[header];\n    if (!q) return String(optionId);\n    const opt = q.options.find((o) => o.optionId === optionId);\n    return opt ? opt.optionText : String(optionId);\n  };\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h3 className=\"card-title\">Offline Assessment Data Upload</h3>\n      </div>\n      <div className=\"card-body\">\n        {/* Section 1: School & Assessment Selection */}\n        <div className=\"card card-body bg-light mb-4\">\n          <h6 className=\"mb-3\">Select School & Assessment</h6>\n          <div className=\"row g-3 align-items-end\">\n            <div className=\"col-md-5\">\n              <Form.Label>School / Institute</Form.Label>\n              {loadingInstitutes ? (\n                <div>\n                  <Spinner animation=\"border\" size=\"sm\" /> Loading...\n                </div>\n              ) : (\n                <Form.Select\n                  value={selectedInstitute}\n                  onChange={(e) => setSelectedInstitute(e.target.value)}\n                >\n                  <option value=\"\">Select an institute...</option>\n                  {institutes.map((inst: any) => (\n                    <option\n                      key={inst.instituteCode}\n                      value={inst.instituteCode}\n                    >\n                      {inst.instituteName}\n                    </option>\n                  ))}\n                </Form.Select>\n              )}\n            </div>\n            <div className=\"col-md-5\">\n              <Form.Label>Assessment</Form.Label>\n              {loadingAssessments ? (\n                <div>\n                  <Spinner animation=\"border\" size=\"sm\" /> Loading...\n                </div>\n              ) : (\n                <Form.Select\n                  value={selectedAssessment}\n                  onChange={(e) => setSelectedAssessment(e.target.value)}\n                  disabled={!selectedInstitute}\n                >\n                  <option value=\"\">Select an assessment...</option>\n                  {uniqueAssessments.map((a: any) => (\n                    <option key={a.id} value={a.id}>\n                      {a.assessmentName}\n                    </option>\n                  ))}\n                </Form.Select>\n              )}\n            </div>\n            <div className=\"col-md-2\">\n              {loadingMapping && (\n                <Spinner animation=\"border\" size=\"sm\" className=\"ms-2\" />\n              )}\n            </div>\n          </div>\n          {mappingData && (\n            <div className=\"mt-3\">\n              <Badge bg=\"success\" className=\"me-2\">\n                Questionnaire: {mappingData.questionnaireName}\n              </Badge>\n              <Badge bg=\"info\">\n                {mappingData.questions.length} questions mapped\n              </Badge>\n            </div>\n          )}\n        </div>\n\n        {/* Section 2: Template Download & Upload */}\n        {mappingData && (\n          <div className=\"card card-body bg-light mb-4\">\n            <h6 className=\"mb-3\">Template & Upload</h6>\n            <div className=\"row g-3 align-items-end\">\n              <div className=\"col-md-4\">\n                <Button\n                  variant=\"outline-primary\"\n                  onClick={handleDownloadTemplate}\n                >\n                  <i className=\"bi bi-download me-2\" />\n                  Download Excel Template\n                </Button>\n              </div>\n              <div className=\"col-md-6\">\n                <Form.Label>Upload Filled Excel</Form.Label>\n                <Form.Control\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  ref={fileInputRef}\n                  onChange={handleFileUpload}\n                />\n              </div>\n              <div className=\"col-md-2\">\n                {fileName && (\n                  <small className=\"text-muted\">{fileName}</small>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Section 3: Preview & Edit Table */}\n        {parsedRows.length > 0 && mappingData && (\n          <div className=\"mb-4\">\n            <h6 className=\"mb-3\">\n              Preview ({parsedRows.length} students)\n              {parsedRows.some((r) => Object.keys(r.errors).length > 0) && (\n                <Badge bg=\"warning\" className=\"ms-2\">\n                  Has errors\n                </Badge>\n              )}\n            </h6>\n            <div className=\"table-responsive\" style={{ maxHeight: \"500px\" }}>\n              <table className=\"table table-bordered table-sm table-hover\">\n                <thead className=\"table-dark\" style={{ position: \"sticky\", top: 0 }}>\n                  <tr>\n                    <th style={{ minWidth: \"50px\" }}>#</th>\n                    <th style={{ minWidth: \"120px\" }}>userId</th>\n                    {questionHeaders.map((q) => (\n                      <th\n                        key={q.excelQuestionHeader}\n                        style={{ minWidth: \"150px\" }}\n                        title={q.questionText}\n                      >\n                        {q.excelQuestionHeader}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody>\n                  {parsedRows.map((row, rowIdx) => (\n                    <tr key={rowIdx}>\n                      <td>{rowIdx + 1}</td>\n                      <td\n                        className={\n                          row.userIdError ? \"table-danger\" : \"\"\n                        }\n                      >\n                        <input\n                          type=\"number\"\n                          className=\"form-control form-control-sm\"\n                          value={row.userId ?? \"\"}\n                          onChange={(e) =>\n                            handleUserIdChange(rowIdx, e.target.value)\n                          }\n                          style={{ width: \"100px\" }}\n                        />\n                      </td>\n                      {questionHeaders.map((q) => {\n                        const header = q.excelQuestionHeader;\n                        const optionId = row.answers[header];\n                        const hasError = !!row.errors[header];\n                        const isBlank = optionId === null && !hasError;\n\n                        return (\n                          <td\n                            key={header}\n                            className={\n                              hasError\n                                ? \"table-danger\"\n                                : isBlank\n                                ? \"table-warning\"\n                                : \"\"\n                            }\n                            title={row.errors[header] || \"\"}\n                          >\n                            <select\n                              className=\"form-select form-select-sm\"\n                              value={optionId ?? \"\"}\n                              onChange={(e) =>\n                                handleAnswerChange(\n                                  rowIdx,\n                                  header,\n                                  e.target.value === \"\"\n                                    ? null\n                                    : Number(e.target.value)\n                                )\n                              }\n                            >\n                              <option value=\"\">-- Skip --</option>\n                              {q.options.map((opt) => (\n                                <option\n                                  key={opt.optionId}\n                                  value={opt.optionId}\n                                >\n                                  {opt.optionText}\n                                </option>\n                              ))}\n                            </select>\n                          </td>\n                        );\n                      })}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Section 4: Submit */}\n        {parsedRows.length > 0 && mappingData && (\n          <div className=\"card card-body bg-light\">\n            <div className=\"d-flex align-items-center gap-3\">\n              <Button\n                variant=\"success\"\n                size=\"lg\"\n                onClick={handleSubmit}\n                disabled={submitting}\n              >\n                {submitting ? (\n                  <>\n                    <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\n                    Submitting...\n                  </>\n                ) : (\n                  <>Submit All ({parsedRows.length} students)</>\n                )}\n              </Button>\n\n              {submitResult && submitResult.status === \"success\" && (\n                <Alert variant=\"success\" className=\"mb-0 flex-grow-1\">\n                  Successfully processed{\" \"}\n                  <strong>{submitResult.studentsProcessed}</strong> students.\n                  {submitResult.errors?.length > 0 && (\n                    <span className=\"text-danger ms-2\">\n                      {submitResult.errors.length} error(s):\n                      {submitResult.errors.map((err: any, i: number) => (\n                        <div key={i}>\n                          Student {err.userStudentId}: {err.error}\n                        </div>\n                      ))}\n                    </span>\n                  )}\n                </Alert>\n              )}\n\n              {submitResult && submitResult.status === \"error\" && (\n                <Alert variant=\"danger\" className=\"mb-0 flex-grow-1\">\n                  Submission failed: {submitResult.message}\n                </Alert>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OfflineAssessmentUploadPage;\n"],"names":["API_URL","process","createAssessmentMapping","data","axios","concat","getAssessmentMappingsByInstitute","instituteCode","updateAssessmentMapping","id","deleteAssessmentMapping","getAssessmentSummaryList","getMappingInfoByToken","token","registerStudentByToken","studentData","DivStyledAsH4","divWithClassName","displayName","AlertHeading","createWithBsPrefix","Component","AlertLink","Anchor","defaultProps","variant","show","transition","Fade","closeLabel","Alert","React","uncontrolledProps","ref","_useUncontrolled","useUncontrolled","bsPrefix","closeVariant","className","children","onClose","dismissible","props","_objectWithoutProperties","_excluded","prefix","useBootstrapPrefix","handleClose","useEventCallback","e","Transition","alert","_jsxs","_objectSpread","role","undefined","classNames","_jsx","CloseButton","onClick","unmountOnExit","in","Object","assign","Link","Heading","OfflineAssessmentUploadPage","_submitResult$errors","institutes","setInstitutes","useState","selectedInstitute","setSelectedInstitute","assessmentMappings","setAssessmentMappings","selectedAssessment","setSelectedAssessment","loadingInstitutes","setLoadingInstitutes","loadingAssessments","setLoadingAssessments","mappingData","setMappingData","loadingMapping","setLoadingMapping","parsedRows","setParsedRows","fileName","setFileName","fileInputRef","useRef","submitting","setSubmitting","submitResult","setSubmitResult","useEffect","loadInstitutes","async","res","ReadCollegeData","error","console","loadAssessments","Number","mappingsRes","summaryRes","Promise","all","mappings","allAssessments","mappedIds","Set","map","m","assessmentId","filtered","filter","a","has","loadMapping","getOfflineMapping","headerToQuestion","q","questions","excelQuestionHeader","uniqueAssessments","resolveOptionId","cellValue","question","optionId","val","String","trim","options","length","num","isNaN","isInteger","opt","find","o","sequence","upper","toUpperCase","test","seq","charCodeAt","lower","toLowerCase","questionHeaders","Form","Spinner","animation","size","value","onChange","target","inst","instituteName","disabled","assessmentName","Badge","bg","questionnaireName","Button","handleDownloadTemplate","headers","push","ws","XLSX","wb","replace","type","accept","_e$target$files","file","files","name","reader","FileReader","onload","evt","_evt$target","result","workbook","sheetName","SheetNames","sheet","Sheets","rows","defval","row","userId","answers","errors","header","userIdError","readAsBinaryString","some","r","keys","style","maxHeight","position","top","minWidth","title","questionText","rowIdx","_row$userId","handleUserIdChange","rowIndex","prev","updated","numVal","width","hasError","isBlank","handleAnswerChange","newErrors","optionText","invalidRows","rowsWithErrors","window","confirm","students","questionnaireQuestionId","userStudentId","_error$response","status","message","response","_Fragment","studentsProcessed","err","i"],"sourceRoot":""}