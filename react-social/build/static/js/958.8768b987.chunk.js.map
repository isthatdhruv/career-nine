{"version":3,"file":"static/js/958.8768b987.chunk.js","mappings":"8LAEA,MAAMA,EAAUC,2BAIT,SAASC,EAAwBC,GAQtC,OAAOC,IAAAA,KAAW,GAADC,OAAIL,EAAO,8BAA8BG,EAC5D,CAEO,SAASG,EAAiCC,GAC/C,OAAOH,IAAAA,IAAU,GAADC,OACXL,EAAO,uCAAAK,OAAsCE,GAEpD,CAEO,SAASC,EACdC,EACAN,GAEA,OAAOC,IAAAA,IAAU,GAADC,OAAIL,EAAO,+BAAAK,OAA8BI,GAAMN,EACjE,CAEO,SAASO,EAAwBD,GACtC,OAAOL,IAAAA,OAAa,GAADC,OAAIL,EAAO,+BAAAK,OAA8BI,GAC9D,CAGO,SAASE,IACd,OAAOP,IAAAA,IAAU,GAADC,OAAIL,EAAO,iCAC7B,CAIO,SAASY,EAAsBC,GACpC,OAAOT,IAAAA,IAAU,GAADC,OAAIL,EAAO,oCAAAK,OAAmCQ,GAChE,CAEO,SAASC,EACdD,EACAE,GAUA,OAAOX,IAAAA,KAAW,GAADC,OACZL,EAAO,wCAAAK,OAAuCQ,GACjDE,EAEJ,C,6XCjDMC,GAAgBC,EAAAA,EAAAA,GAAiB,MACvCD,EAAcE,YAAc,gBAC5B,MAAMC,GAAeC,EAAAA,EAAAA,GAAmB,gBAAiB,CACvDC,UAAWL,IAEPM,GAAYF,EAAAA,EAAAA,GAAmB,aAAc,CACjDC,UAAWE,EAAAA,IAEPC,EAAe,CACnBC,QAAS,UACTC,MAAM,EACNC,WAAYC,EAAAA,EACZC,WAAY,eAERC,EAAqBC,EAAAA,WAAiB,CAACC,EAAmBC,KAC9D,MAAAC,GAYIC,EAAAA,EAAAA,IAAgBH,EAAmB,CACrCN,KAAM,aAbF,SACJU,EAAQ,KACRV,EAAI,WACJG,EAAU,aACVQ,EAAY,UACZC,EAAS,SACTC,EAAQ,QACRd,EAAO,QACPe,EAAO,YACPC,EAAW,WACXd,GAEDO,EADIQ,GAAKC,EAAAA,EAAAA,GAAAT,EAAAU,GAIJC,GAASC,EAAAA,EAAAA,IAAmBV,EAAU,SACtCW,GAAcC,EAAAA,EAAAA,GAAiBC,IAC/BT,GACFA,GAAQ,EAAOS,KAGbC,GAA4B,IAAfvB,EAAsBC,EAAAA,EAAOD,EAE1CwB,GAAqBC,EAAAA,EAAAA,MAAM,OAAKC,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACpCC,KAAM,SACDJ,OAAqBK,EAARb,GAAiB,IACnCT,IAAKA,EACLK,UAAWkB,IAAWlB,EAAWO,EAAQpB,GAAW,GAAJpB,OAAOwC,EAAM,KAAAxC,OAAIoB,GAAWgB,GAAe,GAAJpC,OAAOwC,EAAM,iBACpGN,SAAU,CAACE,IAA4BgB,EAAAA,EAAAA,KAAKC,EAAAA,EAAa,CACvDC,QAASZ,EACT,aAAclB,EACdJ,QAASY,IACPE,MAGN,OAAKW,GACeO,EAAAA,EAAAA,KAAKP,GAAUG,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,CACjCO,eAAe,GACZlB,GAAK,IACRT,SAAKsB,EACLM,GAAInC,EACJa,SAAUY,KANYzB,EAAOyB,EAAQ,OASzCrB,EAAMZ,YAAc,QACpBY,EAAMN,aAAeA,EACrB,QAAesC,OAAOC,OAAOjC,EAAO,CAClCkC,KAAM1C,EACN2C,QAAS9C,I,kECzEX,MAAMnB,EAAUC,2BAET,SAASiE,EAAkBC,GAChC,OAAO/D,IAAAA,IAAU,GAADC,OAAIL,EAAO,uCAAAK,OAAsC8D,GACnE,C,eCiEA,MAAMC,EAAeC,IACnB,MAAMC,EAASC,OAAOC,aAAa,GAAKH,GACxC,MAAM,OAANhE,OAAciE,IAIVG,EAAgBA,CACpBC,EACAC,EACAC,KAEA,MAAMC,EAAM,GAAAxE,OAAMqE,EAAO,MAAArE,OAAKsE,EAAgB,GAC9C,YAAoBpB,IAAhBqB,EACI,GAANvE,OAAUwE,EAAM,MAAAxE,OAAKuE,EAAc,GAE9BC,GAIHC,EAAkBA,CACtBC,EACAC,KAEA,GAAkB,OAAdD,QAAoCxB,IAAdwB,GAAyC,KAAdA,EACnD,MAAO,CAAEE,SAAU,MAGrB,MAAMC,EAAMX,OAAOQ,GAAWI,OAC9B,GAAY,KAARD,EAAY,MAAO,CAAED,SAAU,MAEnC,IAAKD,GAA8B,IAAnBA,EAAQI,OACtB,MAAO,CAAEH,SAAU,KAAMI,MAAO,sBAIlC,MAAMC,EAAMC,OAAOL,GACnB,IAAKM,MAAMF,IAAQC,OAAOE,UAAUH,IAAQA,GAAO,EAAG,CACpD,MAAMI,EAAMV,EAAQW,KAAMC,GAAMA,EAAEC,WAAaP,GAC/C,OAAII,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAMI,MAAM,YAADhF,OAAciF,EAAG,uBAAAjF,OAAsB2E,EAAQI,OAAM,KACrF,CAGA,MAAMU,EAAQZ,EAAIa,cAClB,GAAI,UAAUC,KAAKF,GAAQ,CACzB,MAAMG,EAAMH,EAAMI,WAAW,GAAK,GAC5BR,EAAMV,EAAQW,KAAMC,GAAMA,EAAEC,WAAaI,GAC/C,OAAIP,EAAY,CAAET,SAAUS,EAAIT,UACzB,CAAEA,SAAU,KAAMI,MAAM,UAADhF,OAAYyF,EAAK,uBAAAzF,OAAsB2E,EAAQI,OAAM,aACrF,CAGA,MAAMe,EAAQjB,EAAIkB,cAClB,GAAc,QAAVD,GAA6B,MAAVA,EAAe,CACpC,MAAMT,EAAMV,EAAQW,KAAMC,GAAqB,IAAfA,EAAEC,UAClC,GAAIH,EAAK,MAAO,CAAET,SAAUS,EAAIT,SAClC,CACA,GAAc,OAAVkB,GAA4B,MAAVA,EAAe,CACnC,MAAMT,EAAMV,EAAQW,KAAMC,GAAqB,IAAfA,EAAEC,UAClC,GAAIH,EAAK,MAAO,CAAET,SAAUS,EAAIT,SAClC,CAEA,MAAO,CAAEA,SAAU,KAAMI,MAAM,wBAADhF,OAA0B6E,EAAG,OA85B7D,EAz5BoCmB,KAAO,IAADC,EAAAC,EAExC,MAAOC,EAAYC,IAAiBC,EAAAA,EAAAA,UAAgB,KAC7CC,EAAmBC,IAAwBF,EAAAA,EAAAA,UAAiB,KAC5DG,EAAoBC,IAAyBJ,EAAAA,EAAAA,UAAgB,KAC7DK,EAAoBC,IAAyBN,EAAAA,EAAAA,UAAiB,KAC9DO,EAAmBC,IAAwBR,EAAAA,EAAAA,WAAS,IACpDS,EAAoBC,IAAyBV,EAAAA,EAAAA,WAAS,IAGtDW,EAAaC,IAAkBZ,EAAAA,EAAAA,UAA6B,OAC5Da,EAAgBC,IAAqBd,EAAAA,EAAAA,WAAS,IAG9Ce,EAAmBC,IAAwBhB,EAAAA,EAAAA,UAA6B,KAGxEiB,EAAcC,IAAmBlB,EAAAA,EAAAA,UAAmB,KACpDmB,EAAcC,IAAmBpB,EAAAA,EAAAA,UAAgB,KACjDqB,EAAWC,IAAgBtB,EAAAA,EAAAA,UAAiC,CAAC,IAC7DuB,EAAgBC,IAAqBxB,EAAAA,EAAAA,WAAS,IAG9CyB,EAAYC,IAAiB1B,EAAAA,EAAAA,UAAsB,KACnD2B,EAAUC,IAAe5B,EAAAA,EAAAA,UAAiB,IAC3C6B,GAAeC,EAAAA,EAAAA,QAAyB,OAGvCC,EAAYC,IAAiBhC,EAAAA,EAAAA,WAAS,IACtCiC,GAAcC,KAAmBlC,EAAAA,EAAAA,UAAc,OAC/CmC,GAAgBC,KAAqBpC,EAAAA,EAAAA,UAIlC,MAIJqC,IAAgBC,EAAAA,EAAAA,SAAQ,KAC5B,GAAgB,OAAX3B,QAAW,IAAXA,IAAAA,EAAa4B,SAAU,MAAO,GAEnC,MAAMC,EAUA,GAmCN,OAjCA7B,EAAY4B,SAASE,QAAQ,CAACC,EAASC,KACrC,MAAMC,EAAOlF,EAAYiF,GACzBD,EAAQG,UAAUJ,QAAQ,CAACK,EAAGC,KACxBD,EAAEE,MAEJF,EAAExE,QAAQmE,QAAQ,CAACzD,EAAKiE,KACtBT,EAAOU,KAAK,CACVC,MAAOpF,EAAc6E,EAAMG,EAAME,GACjCG,YAAaV,EAAQU,YACrBpF,QAAS4E,EACTS,wBAAyBP,EAAEO,wBAC3BC,aAAcR,EAAEQ,aAChBN,OAAO,EACPzE,SAAUS,EAAIT,SACdgF,WAAYvE,EAAIuE,WAChBC,KAAM,aAKVhB,EAAOU,KAAK,CACVC,MAAOpF,EAAc6E,EAAMG,GAC3BK,YAAaV,EAAQU,YACrBpF,QAAS4E,EACTS,wBAAyBP,EAAEO,wBAC3BC,aAAcR,EAAEQ,aAChBN,OAAO,EACPQ,KAAM,iBAMPhB,GACN,CAAC7B,IAGE8C,IAAkBnB,EAAAA,EAAAA,SAAQ,KAC9B,MAAMoB,EAAiF,CAAC,EACxF,IAAK,MAAMC,KAAOtB,GACXqB,EAAQC,EAAI3F,WACf0F,EAAQC,EAAI3F,SAAW,CAAEoF,YAAaO,EAAIP,YAAaZ,OAAQ,KAEjEkB,EAAQC,EAAI3F,SAASwE,OAAOU,KAAKS,GAEnC,OAAOD,GACN,CAACrB,KAGEuB,GAAcxG,OAAOyG,OAAOxC,GAAWyC,OAAOC,SAASrF,OAEvDsF,GAAgB,EAAIjD,EAAkBrC,OAAS2D,GAAc3D,QAInEuF,EAAAA,EAAAA,WAAU,KACRC,MACC,IAEH,MAAMA,GAAiBC,UACrB3D,GAAqB,GACrB,IACE,MAAM4D,QAAYC,EAAAA,EAAAA,MAClBtE,EAAcqE,EAAI3K,MAAQ,GAC5B,CAAE,MAAOkF,GACP2F,QAAQ3F,MAAM,6BAA8BA,EAC9C,CAAC,QACC6B,GAAqB,EACvB,IAGFyD,EAAAA,EAAAA,WAAU,KACJhE,EACFsE,GAAgB1F,OAAOoB,KAEvBG,EAAsB,IACtBE,EAAsB,IACtBM,EAAe,MACf4D,OAGD,CAACvE,IAEJ,MAAMsE,GAAkBJ,UACtBzD,GAAsB,GACtBJ,EAAsB,IACtBM,EAAe,MACfI,EAAqB,IACrBwD,KACA,IAEE,IAAIC,EAAkB,GAClBC,EAAwB,GAE5B,IAEED,SAD0B7K,EAAAA,EAAAA,IAAiCC,IACpCJ,MAAQ,EACjC,CAAE,MAAOkL,GACPL,QAAQ3F,MAAM,qCAAsCgG,EACtD,CAEA,IAEED,SADyBzK,EAAAA,EAAAA,OACGR,MAAQ,EACtC,CAAE,MAAOkL,GACPL,QAAQ3F,MAAM,kCAAmCgG,EACnD,CAEA,GAAIF,EAAS/F,OAAS,EAAG,CACvB,MAAMkG,EAAY,IAAIC,IAAIJ,EAASK,IAAKC,GAAWA,EAAEtH,eAC/CuH,EAAWN,EAAeZ,OAAQmB,GAAWL,EAAUM,IAAID,EAAElL,KACnEqG,EAAsB4E,EACxB,MAEE5E,EAAsBsE,EAE1B,CAAE,MAAO/F,GACP2F,QAAQ3F,MAAM,8BAA+BA,EAC/C,CAAC,QACC+B,GAAsB,EACxB,IAGFuD,EAAAA,EAAAA,WAAU,KACJ5D,EACF8E,GAAYtG,OAAOwB,KAEnBO,EAAe,MACfI,EAAqB,IACrBwD,OAGD,CAACnE,IAEJ,MAAM8E,GAAchB,UAClBrD,GAAkB,GAClB0D,KACAxD,EAAqB,IACrB,IACE,MAAOoE,EAAYC,SAAiBC,QAAQC,IAAI,CAC9C/H,EAAkBC,IAClB+H,EAAAA,EAAAA,IAA4B/H,KAE9BmD,EAAewE,EAAW3L,MAC1BuH,EAAqBqE,EAAQ5L,MAAQ,GACvC,CAAE,MAAOkF,GACP2F,QAAQ3F,MAAM,0BAA2BA,GACzClC,MAAM,0FACR,CAAC,QACCqE,GAAkB,EACpB,GAGI0D,GAAmBA,KACvB9C,EAAc,IACdE,EAAY,IACZV,EAAgB,IAChBE,EAAgB,IAChBE,EAAa,CAAC,GACdE,GAAkB,GAClBU,GAAgB,MAChBE,GAAkB,MACdP,EAAa4D,UAAS5D,EAAa4D,QAAQC,MAAQ,KA2MnDC,GAAkBA,CAACC,EAAaF,KACpCpE,EAAcuE,IAAIlJ,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWkJ,GAAI,IAAE,CAACD,GAAMF,MAqEtCI,IAAiBxD,EAAAA,EAAAA,SAAQ,KAC7B,GAAgB,OAAX3B,QAAW,IAAXA,IAAAA,EAAa4B,SAAU,MAAO,GACnC,MAAMwD,EAMA,GAcN,OAZApF,EAAY4B,SAASE,QAAQ,CAACC,EAASC,KACrC,MAAMC,EAAOlF,EAAYiF,GACzBD,EAAQG,UAAUJ,QAAQ,CAACK,EAAGC,KAC5BgD,EAAK7C,KAAK,CACRC,MAAOpF,EAAc6E,EAAMG,GAC3BiD,KAAMlD,EAAEO,wBACRC,aAAcR,EAAEQ,aAChBN,MAAOF,EAAEE,MACT1E,QAASwE,EAAExE,cAIVyH,GACN,CAACpF,IAIJ,OACEjE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,cAAaC,UAC1BkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,aAAYC,SAAC,sCAE7Ba,EAAAA,EAAAA,MAAA,OAAKd,UAAU,YAAWC,SAAA,EAExBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,+BAA8BC,SAAA,EAC3CkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,OAAMC,SAAC,gCACrBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,0BAAyBC,SAAA,EACtCa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAACkJ,EAAAA,EAAAA,MAAU,CAAApK,SAAC,uBACX0E,GACC7D,EAAAA,EAAAA,MAAA,OAAAb,SAAA,EAAKkB,EAAAA,EAAAA,KAACmJ,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,OAAO,kBAE7C1J,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,OAAW,CACVP,MAAOzF,EACPoG,SAAW9J,GAAM2D,EAAqB3D,EAAE+J,OAAOZ,OAAO7J,SAAA,EAEtDkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,2BAChBiE,EAAWgF,IAAKyB,IACfxJ,EAAAA,EAAAA,KAAA,UAAiC2I,MAAOa,EAAK1M,cAAcgC,SACxD0K,EAAKC,eADKD,EAAK1M,uBAO1B6C,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAACkJ,EAAAA,EAAAA,MAAU,CAAApK,SAAC,eACX4E,GACC/D,EAAAA,EAAAA,MAAA,OAAAb,SAAA,EAAKkB,EAAAA,EAAAA,KAACmJ,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,OAAO,kBAE7C1J,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,OAAW,CACVP,MAAOrF,EACPgG,SAAW9J,GAAM+D,EAAsB/D,EAAE+J,OAAOZ,OAChDe,UAAWxG,EAAkBpE,SAAA,EAE7BkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,4BAChBsE,EAAmB2E,IAAKG,IACvBlI,EAAAA,EAAAA,KAAA,UAAmB2I,MAAOT,EAAElL,GAAG8B,SAC5BoJ,EAAEyB,gBADQzB,EAAElL,YAOvBgD,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,SACtBgF,IAAkB9D,EAAAA,EAAAA,KAACmJ,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,KAAKxK,UAAU,cAGtE+E,IACCjE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,UAAUhL,UAAU,OAAMC,SAAA,CAAC,kBACnB8E,EAAYkG,sBAE9BnK,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,OAAOhL,UAAU,OAAMC,SAAA,EACV,QAApB+D,EAAAe,EAAY4B,gBAAQ,IAAA3C,OAAA,EAApBA,EAAsBlB,SAAU,EAAE,gBAErChC,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,YAAYhL,UAAU,OAAMC,SAAA,CACnC8E,EAAYkC,UAAUnE,OAAO,iBAEhChC,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,UAAUE,KAAK,OAAMjL,SAAA,CAC5BkF,EAAkBrC,OAAO,yBAOjCiC,IACCjE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,+BAA8BC,SAAA,EAC3CkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,OAAMC,SAAC,uBACrBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,0BAAyBC,SAAA,EACtCkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,UACvBa,EAAAA,EAAAA,MAACqK,EAAAA,EAAM,CAAChM,QAAQ,kBAAkBkC,QA9UjB+J,KAC7B,IAAKrG,EAAa,OAElB,MAAMsG,EAAoB,CAAC,UAG3B,IAAK,MAAMC,KAAMnG,EACfkG,EAAQ/D,KAAKgE,EAAGC,aAAeD,EAAGE,gBAAgBC,cAIpD,IAAK,MAAM1D,KAAOtB,GAChB4E,EAAQ/D,KAAKS,EAAIR,OAGnB,MAAMmE,EAAKC,EAAAA,MAAAA,aAAwB,CAACN,IAC9BO,EAAKD,EAAAA,MAAAA,WACXA,EAAAA,MAAAA,kBAA6BC,EAAIF,EAAI,QACrCC,EAAAA,UACEC,EAAG,oBAAD7N,OACkBgH,EAAY+F,eAAee,QAAQ,OAAQ,KAAI,WA0TS5L,SAAA,EAChEkB,EAAAA,EAAAA,KAAA,KAAGnB,UAAU,wBAAwB,gCAIzCc,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAACkJ,EAAAA,EAAAA,MAAU,CAAApK,SAAC,yBACZkB,EAAAA,EAAAA,KAACkJ,EAAAA,EAAAA,QAAY,CACXzC,KAAK,OACLkE,OAAO,aACPnM,IAAKsG,EACLwE,SA/TU9J,IAA4C,IAADoL,EACnE,MAAMC,EAAqB,QAAjBD,EAAGpL,EAAE+J,OAAOuB,aAAK,IAAAF,OAAA,EAAdA,EAAiB,GAC9B,IAAKC,IAASjH,EAAa,OAE3BiB,EAAYgG,EAAKE,MACjB5F,GAAgB,MAChBE,GAAkB,MAClBZ,GAAkB,GAClBE,EAAc,IAEd,MAAMqG,EAAS,IAAIC,WACnBD,EAAOE,OAAUC,IAAS,IAADC,EACvB,MAAM1O,EAAiB,QAAb0O,EAAGD,EAAI5B,cAAM,IAAA6B,OAAA,EAAVA,EAAYC,OACnBC,EAAWd,EAAAA,KAAU9N,EAAM,CAAE+J,KAAM,WACnC8E,EAAYD,EAASE,WAAW,GAChCC,EAAQH,EAASI,OAAOH,GACxBI,EAAkBnB,EAAAA,MAAAA,cAAyBiB,EAAO,CAAEG,OAAQ,KAElE,GAAwB,IAApBD,EAAShK,OAEX,YADAjC,MAAM,gDAIR,MAAMwK,EAAU7J,OAAOwL,KAAKF,EAAS,IACrCxH,EAAgB+F,GAChB7F,EAAgBsH,GAvFIzB,KACtB,MAAM4B,EAAe5B,EAAQnC,IAAKgE,GAAMA,EAAEpJ,cAAcjB,QAClDsK,EAAiC,CAAC,EAGlCC,EAAYH,EAAaI,UAC5BH,GAAY,WAANA,GAAwB,YAANA,GAAyB,YAANA,GAAyB,cAANA,GAA2B,eAANA,GAElFE,GAAa,IAAGD,EAAe,OAAI9B,EAAQ+B,IAG/C,IAAK,MAAM9B,KAAMnG,EAAmB,CAClC,MAAMmI,EAAKhC,EAAGE,gBACRjE,GAAS+D,EAAGC,aAAe+B,EAAG7B,cAAc3H,cAC5CyJ,EAAYD,EAAGC,UAAUzJ,cACzB0J,GAAUF,EAAGG,gBAAkB,IAAI3J,cACzC,IAAK,IAAI4J,EAAI,EAAGA,EAAIrC,EAAQvI,OAAQ4K,IAAK,CACvC,MAAMC,EAASV,EAAaS,GAC5B,GAAIC,IAAWpG,GAASoG,IAAWJ,GAAcC,GAAUG,IAAWH,GAAWG,EAAOC,SAASL,GAAY,CAC3GJ,EAAO,QAADpP,OAASuP,EAAGO,UAAaxC,EAAQqC,GACvC,KACF,CACF,CACF,CAGA,IAAK,MAAM3F,KAAOtB,GAAe,CAC/B,MAAMqH,EAAMb,EAAac,QAAQhG,EAAIR,MAAMzD,eACvCgK,GAAO,IAAGX,EAAOpF,EAAIR,OAAS8D,EAAQyC,GAC5C,CAEApI,EAAayH,IAyDXa,CAAe3C,IAEjBc,EAAO8B,mBAAmBjC,UAsShB7K,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,WAAUC,SACtB8F,IAAY5E,EAAAA,EAAAA,KAAA,SAAOnB,UAAU,aAAYC,SAAE8F,YAOnDV,EAAavC,OAAS,GAAKiC,IAAgBY,IAC1C7E,EAAAA,EAAAA,MAAA,OAAKd,UAAU,+BAA8BC,SAAA,EAC3Ca,EAAAA,EAAAA,MAAA,OAAKd,UAAU,yDAAwDC,SAAA,EACrEa,EAAAA,EAAAA,MAAA,MAAId,UAAU,OAAMC,SAAA,CAAC,oBACD,KAClBa,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,YAAYhL,UAAU,OAAMC,SAAA,CACnC+H,GAAY,MAAII,GAAc,iBAGnCjH,EAAAA,EAAAA,KAACgK,EAAAA,EAAM,CACLhM,QAAQ,UACRkC,QApTO6M,KACnB,IAAKnJ,GAAuC,IAAxBQ,EAAazC,OAAc,OAE/C,MAAMqL,EAAoB5I,EAAa2D,IAAKkF,IAE1C,MAAMC,EAAY5I,EAAkB,OACpC,IACI6I,EADAC,EAAwB,KAExBF,QAAgCpN,IAAnBmN,EAAIC,IAA+C,KAAnBD,EAAIC,IACnDE,EAAStL,OAAOmL,EAAIC,IAChBnL,MAAMqL,KACRA,EAAS,KACTD,EAAc,mBAGhBA,EAAc,iBAIhB,MAAME,EAA6C,CAAC,EAC9CC,EAAsC,CAAC,EAE7C,IAAK,MAAM3H,KAAW/B,EAAa4B,SAAU,CAC3C,MAAMI,EAAShC,EAAa4B,SAASoH,QAAQjH,GACvCE,EAAOlF,EAAYiF,GAEzBD,EAAQG,UAAUJ,QAAQ,CAACK,EAAGC,KAC5B,GAAID,EAAEE,MAAO,CAEX,MAAMsH,EAA8B,GACpCxH,EAAExE,QAAQmE,QAAQ,CAACzD,EAAKiE,KACtB,MAAMsH,EAAWxM,EAAc6E,EAAMG,EAAME,GACrCuH,EAAWnJ,EAAUkJ,GAC3B,GAAIC,EAAU,CAAC,IAADC,EACZ,MAAMC,EAAU7M,OAAoB,QAAd4M,EAACT,EAAIQ,UAAS,IAAAC,EAAAA,EAAI,IAAIhM,OAC5B,MAAZiM,GAA6C,QAA1BA,EAAQhL,eAAqD,MAA1BgL,EAAQhL,eAChE4K,EAAkBpH,KAAKlE,EAAIT,SAE/B,IAGF,MAAMJ,EAASJ,EAAc6E,EAAMG,GACF,IAA7BuH,EAAkB5L,OACpB0L,EAAQtH,EAAEO,yBAA2BiH,EAAkB,GAC9CA,EAAkB5L,OAAS,GACpC0L,EAAQtH,EAAEO,yBAA2B,KACrCgH,EAAOlM,GAAO,8CAEdiM,EAAQtH,EAAEO,yBAA2B,IAEzC,KAAO,CAEL,MAAMlF,EAASJ,EAAc6E,EAAMG,GAC7ByH,EAAWnJ,EAAUlD,GAC3B,GAAIqM,EAAU,CACZ,MAAMpC,EAAShK,EAAgB4L,EAAIQ,GAAW1H,EAAExE,SAChD8L,EAAQtH,EAAEO,yBAA2B+E,EAAO7J,SACxC6J,EAAOzJ,QAAO0L,EAAOlM,GAAUiK,EAAOzJ,MAC5C,MACEyL,EAAQtH,EAAEO,yBAA2B,IAEzC,GAEJ,CAEA,MAAO,CAAE8G,SAAQC,UAASC,SAAQH,iBAGpCxI,EAAcqI,GACdvI,GAAkB,IAgPNiF,UAAWpF,EAAkB,OAAExF,SAChC,gCAMHa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBkB,EAAAA,EAAAA,KAAA,MAAInB,UAAU,gCAA+BC,SAAC,cAC9CkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,UAASC,UACtBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBkB,EAAAA,EAAAA,KAACkJ,EAAAA,EAAAA,MAAU,CAACrK,UAAU,qBAAoBC,SAAC,yBAC3Ca,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,OAAW,CACVG,KAAK,KACLV,MAAOrE,EAAkB,QAAK,GAC9BgF,SAAW9J,GAAMoJ,GAAgB,SAAUpJ,EAAE+J,OAAOZ,OAAO7J,SAAA,EAE3DkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,qBAChBoF,EAAa6D,IAAKgE,IACjB/L,EAAAA,EAAAA,KAAA,UAAgB2I,MAAOoD,EAAEjN,SAAEiN,GAAdA,eAQtB/H,EAAkBrC,OAAS,IAC1BhC,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAA,MAAId,UAAU,gCAA+BC,SAAA,CAAC,gBAE5Ca,EAAAA,EAAAA,MAACiK,EAAAA,EAAK,CAACC,GAAG,YAAYhL,UAAU,OAAO+O,MAAO,CAAEC,SAAU,UAAW/O,SAAA,CAClEkF,EAAkBrC,OAAO,iBAG9B3B,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,UAASC,SACrBkF,EAAkB+D,IAAKoC,IACtB,MAAMgC,EAAKhC,EAAGE,gBACRjE,EAAQ+D,EAAGC,aAAe+B,EAAG7B,aACnC,OACE3K,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBa,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,MAAU,CAACrK,UAAU,qBAAoBC,SAAA,CACvCsH,EACA+D,EAAG2D,cAAe9N,EAAAA,EAAAA,KAAA,QAAMnB,UAAU,mBAAkBC,SAAC,OACtDa,EAAAA,EAAAA,MAAA,QAAMd,UAAU,4BAA4B+O,MAAO,CAAEC,SAAU,UAAW/O,SAAA,CAAC,IACpD,WAAnBqN,EAAG4B,YAA2B5B,EAAGG,eAAiB,SAAS,WAGjE3M,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,OAAW,CACVG,KAAK,KACLV,MAAOrE,EAAU,QAAD1H,OAASuP,EAAGO,WAAc,GAC1CpD,SAAW9J,GAAMoJ,GAAgB,QAADhM,OAASuP,EAAGO,SAAWlN,EAAE+J,OAAOZ,OAAO7J,SAAA,EAEvEkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,qBAChBoF,EAAa6D,IAAKgE,IACjB/L,EAAAA,EAAAA,KAAA,UAAgB2I,MAAOoD,EAAEjN,SAAEiN,GAAdA,SAfYI,EAAGO,gBA0B3CrM,OAAO2N,QAAQtH,IAAiBqB,IAAIkG,IAAA,IAAEpI,GAAM,YAAEQ,EAAW,OAAEZ,IAASwI,EAAA,OACnEtO,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAA,MAAId,UAAU,gCAA+BC,SAAA,CAC1C+G,EAAK,MAAIQ,MAEZrG,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,UAASC,SACrB2G,EAAOsC,IAAKnB,IACXjH,EAAAA,EAAAA,MAAA,OAAKd,UAAU,WAAUC,SAAA,EACvBa,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,MAAU,CAACrK,UAAU,qBAAqBqP,MAAOtH,EAAIL,aAAazH,SAAA,CAChE8H,EAAIR,OACLpG,EAAAA,EAAAA,KAAA,QAAMnB,UAAU,4BAA4B+O,MAAO,CAAEC,SAAU,WAAY/O,SAC3D,WAAb8H,EAAIH,MACH9G,EAAAA,EAAAA,MAAAwO,EAAAA,SAAA,CAAArP,SAAA,CAAE,IAAE8H,EAAIJ,WAAW,QAEnB7G,EAAAA,EAAAA,MAAAwO,EAAAA,SAAA,CAAArP,SAAA,CAAE,IACE8H,EAAIL,cAAgBK,EAAIL,aAAa5E,OAAS,GAC5CiF,EAAIL,aAAa6H,UAAU,EAAG,IAAM,MACpCxH,EAAIL,aAAa,aAK7B5G,EAAAA,EAAAA,MAACuJ,EAAAA,EAAAA,OAAW,CACVG,KAAK,KACLV,MAAOrE,EAAUsC,EAAIR,QAAU,GAC/BkD,SAAW9J,GAAMoJ,GAAgBhC,EAAIR,MAAO5G,EAAE+J,OAAOZ,OAAO7J,SAAA,EAE5DkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,qBAChBoF,EAAa6D,IAAKgE,IACjB/L,EAAAA,EAAAA,KAAA,UAAgB2I,MAAOoD,EAAEjN,SAAEiN,GAAdA,SAtBYnF,EAAIR,YANdP,QAwChCrB,GAAkBE,EAAW/C,OAAS,IACrC3B,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,OAAMC,UACnBkB,EAAAA,EAAAA,KAACgK,EAAAA,EAAM,CACLhM,QAAQ,oBACRqL,KAAK,KACLnJ,QAASA,KACPuE,GAAkB,GAClBE,EAAc,KACd7F,SACH,6BAOJ4F,EAAW/C,OAAS,GAAKiC,IACxBjE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAA,MAAId,UAAU,OAAMC,SAAA,CAAC,YACT4F,EAAW/C,OAAO,aAC3B+C,EAAW2J,KAAMC,GAAMjO,OAAOwL,KAAKyC,EAAEhB,QAAQ3L,OAAS,KACrD3B,EAAAA,EAAAA,KAAC4J,EAAAA,EAAK,CAACC,GAAG,UAAUhL,UAAU,OAAMC,SAAC,mBAGzCkB,EAAAA,EAAAA,KAAA,OAAKnB,UAAU,mBAAmB+O,MAAO,CAAEW,UAAW,SAAUzP,UAC9Da,EAAAA,EAAAA,MAAA,SAAOd,UAAU,4CAA2CC,SAAA,EAC1Da,EAAAA,EAAAA,MAAA,SAAOd,UAAU,aAAa+O,MAAO,CAAEY,SAAU,SAAUC,IAAK,GAAI3P,SAAA,EAElEa,EAAAA,EAAAA,MAAA,MAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAA,MAAI0O,QAAS,EAAGd,MAAO,CAAEe,SAAU,QAAS7P,SAAC,OAC7CkB,EAAAA,EAAAA,KAAA,MAAI0O,QAAS,EAAGd,MAAO,CAAEe,SAAU,SAAU7P,SAAC,WAC7CuB,OAAO2N,QAAQtH,IAAiBqB,IAAI6G,IAAsC,IAApC/I,GAAM,YAAEQ,EAAW,OAAEZ,IAASmJ,EAEnE,MAAMC,EAAc,IAAI/G,IAAIrC,EAAOsC,IAAK+G,GAAMA,EAAExI,0BAChD,OACE3G,EAAAA,EAAAA,MAAA,MAEEoP,QAASF,EAAYxF,KACrBxK,UAAU,cACV+O,MAAO,CAAEoB,WAAY,kBAAmBlQ,SAAA,CAEvC+G,EAAK,MAAIQ,IALLR,SAWb7F,EAAAA,EAAAA,KAAA,MAAAlB,SACGiK,GAAehB,IAAI,CAACkH,EAAKtC,KAAS,IAADuC,EAAAC,EAEhC,MAAMC,EAA2B,IAARzC,GAAa5D,GAAe4D,EAAM,KACkC,QAA3FuC,EAAAtL,EAAYkC,UAAU5D,KAAK6D,GAAKA,EAAEO,0BAA4ByC,GAAe4D,EAAM,GAAG1D,aAAK,IAAAiG,OAAA,EAA3FA,EAA6FG,2BACtB,QAD4CF,EACnHvL,EAAYkC,UAAU5D,KAAK6D,GAAKA,EAAEO,0BAA4B2I,EAAIhG,aAAK,IAAAkG,OAAA,EAAvEA,EAAyEE,wBAC3E,OACE1P,EAAAA,EAAAA,MAAA,MAEEiO,OAAKhO,EAAAA,EAAAA,GAAA,CACH+O,SAAU,SACNS,EAAmB,CAAEJ,WAAY,kBAAqB,CAAC,GAE7Dd,MAAOe,EAAI1I,aAAazH,SAAA,CAEvBmQ,EAAI7I,MACJ6I,EAAIhJ,QACHjG,EAAAA,EAAAA,KAAC4J,EAAAA,EAAK,CAACC,GAAG,OAAOhL,UAAU,OAAO+O,MAAO,CAAEC,SAAU,UAAW/O,SAAC,UAT9DmQ,EAAI7I,eAgBnBpG,EAAAA,EAAAA,KAAA,SAAAlB,SACG4F,EAAWqD,IAAI,CAACkF,EAAKqC,KAAM,IAAAC,EAAA,OAC1B5P,EAAAA,EAAAA,MAAA,MAAAb,SAAA,EACEkB,EAAAA,EAAAA,KAAA,MAAAlB,SAAKwQ,EAAS,KACdtP,EAAAA,EAAAA,KAAA,MAAInB,UAAWoO,EAAIE,YAAc,eAAiB,GAAGrO,UACnDkB,EAAAA,EAAAA,KAAA,SACEyG,KAAK,SACL5H,UAAU,+BACV8J,MAAiB,QAAZ4G,EAAEtC,EAAIG,cAAM,IAAAmC,EAAAA,EAAI,GACrBjG,SAAW9J,IAAMgQ,OAtabC,EAsagCH,EAtad3G,EAsasBnJ,EAAE+J,OAAOZ,WAra3EhE,EAAemE,IACb,MAAM4G,EAAU,IAAI5G,GACd6G,EAAmB,KAAVhH,EAAe,KAAO7G,OAAO6G,GAM5C,OALA+G,EAAQD,IAAS7P,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GACZ8P,EAAQD,IAAS,IACpBrC,OAAQuC,EACRxC,YAAwB,OAAXwC,GAAmB5N,MAAM4N,GAAU,sBAAmB7P,IAE9D4P,IATgBF,IAACC,EAAkB9G,GAuatBiF,MAAO,CAAEgC,MAAO,aAGnB7G,GAAehB,IAAKkH,IACnB,MAAMzN,EAAWyL,EAAII,QAAQ4B,EAAIhG,MAC3B4G,EAAWxP,OAAOwL,KAAKoB,EAAIK,QAAQe,KACtCyB,GAAWA,EAAOC,WAAWd,EAAI7I,MAAM4J,MAAM,MAAM,KAEhDC,EAAuB,OAAbzO,IAAsBqO,EAEtC,OACE7P,EAAAA,EAAAA,KAAA,MAEEnB,UAAWgR,EAAW,eAAiBI,EAAU,gBAAkB,GACnE/B,MACE7N,OAAO2N,QAAQf,EAAIK,QAChBvG,OAAOmJ,IAAA,IAAEC,GAAED,EAAA,OAAKC,EAAEJ,WAAWd,EAAI7I,MAAM4J,MAAM,MAAM,MACnDjI,IAAIqI,IAAA,IAAE,CAAEC,GAAED,EAAA,OAAKC,IACfC,KAAK,OAAS,GAClBxR,UAEDa,EAAAA,EAAAA,MAAA,UACEd,UAAU,6BACV8J,MAAe,OAARnH,QAAQ,IAARA,EAAAA,EAAY,GACnB8H,SAAW9J,GAlbZ+Q,EACzBd,EACAxG,EACAzH,KAEAmD,EAAemE,IACb,MAAM4G,EAAU,IAAI5G,GACdmE,GAAGrN,EAAAA,EAAAA,GAAA,GAAQ8P,EAAQD,IAGzB,OAFAxC,EAAII,SAAOzN,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQqN,EAAII,SAAO,IAAE,CAACpE,GAAOzH,IACxCkO,EAAQD,GAAYxC,EACbyC,KAyamBa,CACEjB,EACAL,EAAIhG,KACe,KAAnBzJ,EAAE+J,OAAOZ,MAAe,KAAO7G,OAAOtC,EAAE+J,OAAOZ,QAElD7J,SAAA,EAEDkB,EAAAA,EAAAA,KAAA,UAAQ2I,MAAM,GAAE7J,SAAC,eAChBmQ,EAAI1N,QAAQwG,IAAK9F,IAChBjC,EAAAA,EAAAA,KAAA,UAA2B2I,MAAO1G,EAAIT,SAAS1C,SAC5CmD,EAAIuE,YADMvE,EAAIT,eAtBhByN,EAAI7I,WApBRkJ,eA2DpB5K,EAAW/C,OAAS,GAAKiC,IACxBjE,EAAAA,EAAAA,MAAA,OAAKd,UAAU,0BAAyBC,SAAA,CACrCkG,GAAcI,KACbzF,EAAAA,EAAAA,MAAA,OAAKd,UAAU,OAAMC,SAAA,EACnBa,EAAAA,EAAAA,MAAA,OAAKd,UAAU,sCAAqCC,SAAA,EAClDa,EAAAA,EAAAA,MAAA,SAAOd,UAAU,UAASC,SAAA,CAAEsG,GAAeoL,MAAM,UACjD7Q,EAAAA,EAAAA,MAAA,SAAAb,SAAA,CAAQsG,GAAesD,QAAQ,MAAItD,GAAeqL,aAEpDzQ,EAAAA,EAAAA,KAAC0Q,EAAAA,EAAW,CACVC,IAAKvL,GAAeqL,MAAQ,EAAKrL,GAAesD,QAAUtD,GAAeqL,MAAS,IAAM,EACxFG,UAAQ,EACRC,SAAO,QAKblR,EAAAA,EAAAA,MAAA,OAAKd,UAAU,kCAAiCC,SAAA,EAC9CkB,EAAAA,EAAAA,KAACgK,EAAAA,EAAM,CACLhM,QAAQ,UACRqL,KAAK,KACLnJ,QA3cOkH,UACnB,IAAKxD,GAAqC,IAAtBc,EAAW/C,OAAc,OAE7C,MAAMmP,EAAcpM,EAAWqC,OAAQuH,GAAmB,OAAbA,EAAElB,QAAmBkB,EAAEnB,aACpE,GAAI2D,EAAYnP,OAAS,EAEvB,YADAjC,MAAM,GAAD9C,OAAIkU,EAAYnP,OAAM,+EAI7B,MAAMoP,EAAiBrM,EAAWqC,OAAQuH,GAAMjO,OAAOwL,KAAKyC,EAAEhB,QAAQ3L,OAAS,GAC/E,KAAIoP,EAAepP,OAAS,IACrBqP,OAAOC,QAAQ,GAADrU,OAAImU,EAAepP,OAAM,0EAD9C,CAKAsD,GAAc,GACdE,GAAgB,MAChBE,GAAkB,CAAEmL,MAAO,qBAAsB9H,QAAS,EAAG+H,MAAO,IAEpE,IACE,MAAMS,EAAWxM,EAAWqD,IAAKkF,IAC/B,MAAMI,EAAmE,GACzE,IAAK,MAAO8D,EAAS3P,KAAanB,OAAO2N,QAAQf,EAAII,SAClC,OAAb7L,QAAkC1B,IAAb0B,GACvB6L,EAAQlH,KAAK,CACXG,wBAAyBxE,OAAOqP,GAChC3P,aAIN,MAAO,CAAE4P,cAAenE,EAAIG,OAASC,aAGjChG,QDzkBsB3K,ECykBQ,CAClCgE,aAAckD,EAAalD,aAC3BwQ,YDpkBCvU,IAAAA,KAAW,GAADC,OAAIL,EAAO,kCAAkCG,ICukB1D2I,GAAkB,CAAEmL,MAAO,qBAAsB9H,QAAS,EAAG+H,MAAO,IACpEtL,GAAgBkC,EAAI3K,KACtB,CAAE,MAAOkF,GAAa,IAADyP,EACnB9J,QAAQ3F,MAAM,iBAAkBA,GAChCuD,GAAgB,CACdmM,OAAQ,QACRC,SAAuB,QAAdF,EAAAzP,EAAM4P,gBAAQ,IAAAH,OAAA,EAAdA,EAAgB3U,OAAQkF,EAAM2P,SAE3C,CAAC,QACCtM,GAAc,GACdI,GAAkB,KACpB,CDzlBG,IAA2B3I,CCqjB9B,GA+bYgN,SAAU1E,EAAWlG,SAEpBkG,GACCrF,EAAAA,EAAAA,MAAAwO,EAAAA,SAAA,CAAArP,SAAA,EAAEkB,EAAAA,EAAAA,KAACmJ,EAAAA,EAAO,CAACC,UAAU,SAASC,KAAK,KAAKxK,UAAU,SAAS,oBAE3Dc,EAAAA,EAAAA,MAAAwO,EAAAA,SAAA,CAAArP,SAAA,CAAE,eAAa4F,EAAW/C,OAAO,kBAIpCuD,IAAwC,YAAxBA,GAAaoM,SAC5B3R,EAAAA,EAAAA,MAACtB,EAAK,CAACL,QAAQ,UAAUa,UAAU,mBAAkBC,SAAA,CAAC,yBAC7B,KACvBkB,EAAAA,EAAAA,KAAA,UAAAlB,SAASoG,GAAauM,oBAA2B,cAC7B,QAAnB3O,EAAAoC,GAAaoI,cAAM,IAAAxK,OAAA,EAAnBA,EAAqBnB,QAAS,IAC7BhC,EAAAA,EAAAA,MAAA,QAAMd,UAAU,mBAAkBC,SAAA,CAC/BoG,GAAaoI,OAAO3L,OAAO,aAC3BuD,GAAaoI,OAAOvF,IAAI,CAACH,EAAU2E,KAClC5M,EAAAA,EAAAA,MAAA,OAAAb,SAAA,CAAa,WAAS8I,EAAIwJ,cAAc,KAAGxJ,EAAIhG,QAArC2K,UAOnBrH,IAAwC,UAAxBA,GAAaoM,SAC5B3R,EAAAA,EAAAA,MAACtB,EAAK,CAACL,QAAQ,SAASa,UAAU,mBAAkBC,SAAA,CAAC,sBAC/BoG,GAAaqM,uB","sources":["app/pages/AssessmentMapping/API/AssessmentMapping_APIs.ts","../node_modules/react-bootstrap/esm/Alert.js","app/pages/OfflineAssessmentUpload/API/OfflineUpload_APIs.ts","app/pages/OfflineAssessmentUpload/OfflineAssessmentUploadPage.tsx"],"sourcesContent":["import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\n// ============ ADMIN APIs ============\n\nexport function createAssessmentMapping(data: {\n  assessmentId: number;\n  instituteCode: number;\n  mappingLevel: string;\n  sessionId?: number;\n  classId?: number;\n  sectionId?: number;\n}) {\n  return axios.post(`${API_URL}/assessment-mapping/create`, data);\n}\n\nexport function getAssessmentMappingsByInstitute(instituteCode: number) {\n  return axios.get(\n    `${API_URL}/assessment-mapping/getByInstitute/${instituteCode}`\n  );\n}\n\nexport function updateAssessmentMapping(\n  id: number,\n  data: { isActive: boolean }\n) {\n  return axios.put(`${API_URL}/assessment-mapping/update/${id}`, data);\n}\n\nexport function deleteAssessmentMapping(id: number) {\n  return axios.delete(`${API_URL}/assessment-mapping/delete/${id}`);\n}\n\n// Lightweight: only id, assessmentName, isActive (no questionnaire cascade)\nexport function getAssessmentSummaryList() {\n  return axios.get(`${API_URL}/assessments/get/list-summary`);\n}\n\n// ============ PUBLIC APIs ============\n\nexport function getMappingInfoByToken(token: string) {\n  return axios.get(`${API_URL}/assessment-mapping/public/info/${token}`);\n}\n\nexport function registerStudentByToken(\n  token: string,\n  studentData: {\n    name: string;\n    email: string;\n    dob: string;\n    phone: string;\n    gender: string;\n    classId?: number;\n    schoolSectionId?: number;\n  }\n) {\n  return axios.post(\n    `${API_URL}/assessment-mapping/public/register/${token}`,\n    studentData\n  );\n}\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useUncontrolled } from 'uncontrollable';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport Anchor from '@restart/ui/Anchor';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport Fade from './Fade';\nimport CloseButton from './CloseButton';\nimport divWithClassName from './divWithClassName';\nimport createWithBsPrefix from './createWithBsPrefix';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nconst DivStyledAsH4 = divWithClassName('h4');\nDivStyledAsH4.displayName = 'DivStyledAsH4';\nconst AlertHeading = createWithBsPrefix('alert-heading', {\n  Component: DivStyledAsH4\n});\nconst AlertLink = createWithBsPrefix('alert-link', {\n  Component: Anchor\n});\nconst defaultProps = {\n  variant: 'primary',\n  show: true,\n  transition: Fade,\n  closeLabel: 'Close alert'\n};\nconst Alert = /*#__PURE__*/React.forwardRef((uncontrolledProps, ref) => {\n  const {\n    bsPrefix,\n    show,\n    closeLabel,\n    closeVariant,\n    className,\n    children,\n    variant,\n    onClose,\n    dismissible,\n    transition,\n    ...props\n  } = useUncontrolled(uncontrolledProps, {\n    show: 'onClose'\n  });\n  const prefix = useBootstrapPrefix(bsPrefix, 'alert');\n  const handleClose = useEventCallback(e => {\n    if (onClose) {\n      onClose(false, e);\n    }\n  });\n  const Transition = transition === true ? Fade : transition;\n\n  const alert = /*#__PURE__*/_jsxs(\"div\", {\n    role: \"alert\",\n    ...(!Transition ? props : undefined),\n    ref: ref,\n    className: classNames(className, prefix, variant && `${prefix}-${variant}`, dismissible && `${prefix}-dismissible`),\n    children: [dismissible && /*#__PURE__*/_jsx(CloseButton, {\n      onClick: handleClose,\n      \"aria-label\": closeLabel,\n      variant: closeVariant\n    }), children]\n  });\n\n  if (!Transition) return show ? alert : null;\n  return /*#__PURE__*/_jsx(Transition, {\n    unmountOnExit: true,\n    ...props,\n    ref: undefined,\n    in: show,\n    children: alert\n  });\n});\nAlert.displayName = 'Alert';\nAlert.defaultProps = defaultProps;\nexport default Object.assign(Alert, {\n  Link: AlertLink,\n  Heading: AlertHeading\n});","import axios from \"axios\";\n\nconst API_URL = process.env.REACT_APP_API_URL;\n\nexport function getOfflineMapping(assessmentId: number) {\n  return axios.get(`${API_URL}/assessment-answer/offline-mapping/${assessmentId}`);\n}\n\nexport { addStudentInfo } from '../../StudentInformation/StudentInfo_APIs';\n\nexport function bulkSubmitAnswers(data: {\n  assessmentId: number;\n  students: {\n    userStudentId: number;\n    answers: { questionnaireQuestionId: number; optionId: number }[];\n  }[];\n}) {\n  return axios.post(`${API_URL}/assessment-answer/bulk-submit`, data);\n}\n","import { useEffect, useState, useRef, useMemo } from \"react\";\nimport { Spinner, Button, Form, Badge, Alert, ProgressBar } from \"react-bootstrap\";\nimport * as XLSX from \"xlsx\";\nimport { ReadCollegeData } from \"../College/API/College_APIs\";\nimport { getAssessmentMappingsByInstitute, getAssessmentSummaryList } from \"../AssessmentMapping/API/AssessmentMapping_APIs\";\nimport { getOfflineMapping, bulkSubmitAnswers } from \"./API/OfflineUpload_APIs\";\nimport { getDemographicsByAssessment } from \"../CreateAssessment/API/Assessment_Demographics_APIs\";\n\n// ============ Interfaces ============\n\ninterface OptionInfo {\n  optionId: number;\n  sequence: number;\n  optionText: string;\n}\n\ninterface QuestionMapping {\n  questionnaireQuestionId: number;\n  excelQuestionHeader: string;\n  questionText: string;\n  questionType: string;\n  isMQT: boolean;\n  questionnaireSectionId: number | null;\n  sectionName: string | null;\n  sectionOrder: string | null;\n  options: OptionInfo[];\n}\n\ninterface SectionMapping {\n  questionnaireSectionId: number;\n  sectionName: string;\n  sectionOrder: string;\n  questions: QuestionMapping[];\n}\n\ninterface MappingData {\n  assessmentId: number;\n  assessmentName: string;\n  questionnaireName: string;\n  questions: QuestionMapping[];\n  sections: SectionMapping[];\n}\n\ninterface ParsedRow {\n  userId: number | null;\n  answers: { [questionnaireQuestionId: number]: number | null };\n  errors: { [label: string]: string };\n  userIdError?: string;\n}\n\n// Dynamic demographic field from AssessmentDemographicMapping API\ninterface DemographicField {\n  mappingId: number;\n  assessmentId: number;\n  fieldDefinition: {\n    fieldId: number;\n    fieldName: string;\n    displayLabel: string;\n    fieldSource: string; // \"SYSTEM\" | \"CUSTOM\"\n    systemFieldKey: string | null;\n    dataType: string;\n    options?: { optionId: number; optionValue: string; optionLabel: string; displayOrder: number }[];\n  };\n  isMandatory: boolean;\n  displayOrder: number;\n  customLabel: string | null;\n}\n\n// ============ Helpers ============\n\n/** Generate section code from alphabetical index: 0 -> SEC_A, 1 -> SEC_B, etc. */\nconst sectionCode = (index: number): string => {\n  const letter = String.fromCharCode(65 + index); // A, B, C...\n  return `SEC_${letter}`;\n};\n\n/** Generate label for a question or option dropdown */\nconst generateLabel = (\n  secCode: string,\n  questionIndex: number,\n  optionIndex?: number\n): string => {\n  const qLabel = `${secCode}_Q${questionIndex + 1}`;\n  if (optionIndex !== undefined) {\n    return `${qLabel}_O${optionIndex + 1}`;\n  }\n  return qLabel;\n};\n\n/** Resolve cell value to optionId for non-MQT questions */\nconst resolveOptionId = (\n  cellValue: any,\n  options: OptionInfo[]\n): { optionId: number | null; error?: string } => {\n  if (cellValue === null || cellValue === undefined || cellValue === \"\") {\n    return { optionId: null };\n  }\n\n  const val = String(cellValue).trim();\n  if (val === \"\") return { optionId: null };\n\n  if (!options || options.length === 0) {\n    return { optionId: null, error: \"No options defined\" };\n  }\n\n  // Try numeric: 1, 2, 3... -> sequence\n  const num = Number(val);\n  if (!isNaN(num) && Number.isInteger(num) && num >= 1) {\n    const opt = options.find((o) => o.sequence === num);\n    if (opt) return { optionId: opt.optionId };\n    return { optionId: null, error: `Sequence ${num} out of range (max ${options.length})` };\n  }\n\n  // Try alphabetic: A, B, C... -> 1, 2, 3\n  const upper = val.toUpperCase();\n  if (/^[A-Z]$/.test(upper)) {\n    const seq = upper.charCodeAt(0) - 64;\n    const opt = options.find((o) => o.sequence === seq);\n    if (opt) return { optionId: opt.optionId };\n    return { optionId: null, error: `Letter ${upper} out of range (max ${options.length} options)` };\n  }\n\n  // Try Yes/No\n  const lower = val.toLowerCase();\n  if (lower === \"yes\" || lower === \"y\") {\n    const opt = options.find((o) => o.sequence === 1);\n    if (opt) return { optionId: opt.optionId };\n  }\n  if (lower === \"no\" || lower === \"n\") {\n    const opt = options.find((o) => o.sequence === 2);\n    if (opt) return { optionId: opt.optionId };\n  }\n\n  return { optionId: null, error: `Unrecognized value: \"${val}\"` };\n};\n\n// ============ Component ============\n\nconst OfflineAssessmentUploadPage = () => {\n  // Selection state\n  const [institutes, setInstitutes] = useState<any[]>([]);\n  const [selectedInstitute, setSelectedInstitute] = useState<string>(\"\");\n  const [assessmentMappings, setAssessmentMappings] = useState<any[]>([]);\n  const [selectedAssessment, setSelectedAssessment] = useState<string>(\"\");\n  const [loadingInstitutes, setLoadingInstitutes] = useState(false);\n  const [loadingAssessments, setLoadingAssessments] = useState(false);\n\n  // Mapping data from backend\n  const [mappingData, setMappingData] = useState<MappingData | null>(null);\n  const [loadingMapping, setLoadingMapping] = useState(false);\n\n  // Dynamic demographic fields for the selected assessment\n  const [demographicFields, setDemographicFields] = useState<DemographicField[]>([]);\n\n  // Excel & column mapping state\n  const [excelHeaders, setExcelHeaders] = useState<string[]>([]);\n  const [rawExcelData, setRawExcelData] = useState<any[]>([]);\n  const [columnMap, setColumnMap] = useState<Record<string, string>>({});\n  const [mappingApplied, setMappingApplied] = useState(false);\n\n  // Preview state\n  const [parsedRows, setParsedRows] = useState<ParsedRow[]>([]);\n  const [fileName, setFileName] = useState<string>(\"\");\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  // Submit state\n  const [submitting, setSubmitting] = useState(false);\n  const [submitResult, setSubmitResult] = useState<any>(null);\n  const [submitProgress, setSubmitProgress] = useState<{\n    phase: string;\n    current: number;\n    total: number;\n  } | null>(null);\n\n  // ============ Derived: build mapping labels from sections ============\n\n  const mappingLabels = useMemo(() => {\n    if (!mappingData?.sections) return [];\n\n    const labels: {\n      label: string;\n      sectionName: string;\n      secCode: string;\n      questionnaireQuestionId: number;\n      questionText: string;\n      isMQT: boolean;\n      optionId?: number;\n      optionText?: string;\n      type: \"question\" | \"option\";\n    }[] = [];\n\n    mappingData.sections.forEach((section, secIdx) => {\n      const secC = sectionCode(secIdx);\n      section.questions.forEach((q, qIdx) => {\n        if (q.isMQT) {\n          // One dropdown per option\n          q.options.forEach((opt, optIdx) => {\n            labels.push({\n              label: generateLabel(secC, qIdx, optIdx),\n              sectionName: section.sectionName,\n              secCode: secC,\n              questionnaireQuestionId: q.questionnaireQuestionId,\n              questionText: q.questionText,\n              isMQT: true,\n              optionId: opt.optionId,\n              optionText: opt.optionText,\n              type: \"option\",\n            });\n          });\n        } else {\n          // One dropdown per question\n          labels.push({\n            label: generateLabel(secC, qIdx),\n            sectionName: section.sectionName,\n            secCode: secC,\n            questionnaireQuestionId: q.questionnaireQuestionId,\n            questionText: q.questionText,\n            isMQT: false,\n            type: \"question\",\n          });\n        }\n      });\n    });\n\n    return labels;\n  }, [mappingData]);\n\n  // Group labels by section code for rendering\n  const labelsBySection = useMemo(() => {\n    const grouped: Record<string, { sectionName: string; labels: typeof mappingLabels }> = {};\n    for (const lbl of mappingLabels) {\n      if (!grouped[lbl.secCode]) {\n        grouped[lbl.secCode] = { sectionName: lbl.sectionName, labels: [] };\n      }\n      grouped[lbl.secCode].labels.push(lbl);\n    }\n    return grouped;\n  }, [mappingLabels]);\n\n  // Mapping progress\n  const mappedCount = Object.values(columnMap).filter(Boolean).length;\n  // +1 for userId\n  const totalMappable = 1 + demographicFields.length + mappingLabels.length;\n\n  // ============ Load data ============\n\n  useEffect(() => {\n    loadInstitutes();\n  }, []);\n\n  const loadInstitutes = async () => {\n    setLoadingInstitutes(true);\n    try {\n      const res = await ReadCollegeData();\n      setInstitutes(res.data || []);\n    } catch (error) {\n      console.error(\"Failed to load institutes:\", error);\n    } finally {\n      setLoadingInstitutes(false);\n    }\n  };\n\n  useEffect(() => {\n    if (selectedInstitute) {\n      loadAssessments(Number(selectedInstitute));\n    } else {\n      setAssessmentMappings([]);\n      setSelectedAssessment(\"\");\n      setMappingData(null);\n      resetUploadState();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedInstitute]);\n\n  const loadAssessments = async (instituteCode: number) => {\n    setLoadingAssessments(true);\n    setSelectedAssessment(\"\");\n    setMappingData(null);\n    setDemographicFields([]);\n    resetUploadState();\n    try {\n      // Fetch independently so one failure doesn't block the other\n      let mappings: any[] = [];\n      let allAssessments: any[] = [];\n\n      try {\n        const mappingsRes = await getAssessmentMappingsByInstitute(instituteCode);\n        mappings = mappingsRes.data || [];\n      } catch (err) {\n        console.error(\"Failed to load institute mappings:\", err);\n      }\n\n      try {\n        const summaryRes = await getAssessmentSummaryList();\n        allAssessments = summaryRes.data || [];\n      } catch (err) {\n        console.error(\"Failed to load assessment list:\", err);\n      }\n\n      if (mappings.length > 0) {\n        const mappedIds = new Set(mappings.map((m: any) => m.assessmentId));\n        const filtered = allAssessments.filter((a: any) => mappedIds.has(a.id));\n        setAssessmentMappings(filtered);\n      } else {\n        // No institute mappings: show all assessments\n        setAssessmentMappings(allAssessments);\n      }\n    } catch (error) {\n      console.error(\"Failed to load assessments:\", error);\n    } finally {\n      setLoadingAssessments(false);\n    }\n  };\n\n  useEffect(() => {\n    if (selectedAssessment) {\n      loadMapping(Number(selectedAssessment));\n    } else {\n      setMappingData(null);\n      setDemographicFields([]);\n      resetUploadState();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [selectedAssessment]);\n\n  const loadMapping = async (assessmentId: number) => {\n    setLoadingMapping(true);\n    resetUploadState();\n    setDemographicFields([]);\n    try {\n      const [mappingRes, demoRes] = await Promise.all([\n        getOfflineMapping(assessmentId),\n        getDemographicsByAssessment(assessmentId),\n      ]);\n      setMappingData(mappingRes.data);\n      setDemographicFields(demoRes.data || []);\n    } catch (error) {\n      console.error(\"Failed to load mapping:\", error);\n      alert(\"Failed to load assessment mapping. Make sure the assessment has a linked questionnaire.\");\n    } finally {\n      setLoadingMapping(false);\n    }\n  };\n\n  const resetUploadState = () => {\n    setParsedRows([]);\n    setFileName(\"\");\n    setExcelHeaders([]);\n    setRawExcelData([]);\n    setColumnMap({});\n    setMappingApplied(false);\n    setSubmitResult(null);\n    setSubmitProgress(null);\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  };\n\n  // ============ Auto-mapping ============\n\n  const runAutoMapping = (headers: string[]) => {\n    const headersLower = headers.map((h) => h.toLowerCase().trim());\n    const newMap: Record<string, string> = {};\n\n    // Auto-map userId\n    const userIdIdx = headersLower.findIndex(\n      (h) => h === \"userid\" || h === \"user_id\" || h === \"user id\" || h === \"studentid\" || h === \"student_id\"\n    );\n    if (userIdIdx >= 0) newMap[\"userId\"] = headers[userIdIdx];\n\n    // Auto-map demographics by matching fieldName or displayLabel\n    for (const df of demographicFields) {\n      const fd = df.fieldDefinition;\n      const label = (df.customLabel || fd.displayLabel).toLowerCase();\n      const fieldName = fd.fieldName.toLowerCase();\n      const sysKey = (fd.systemFieldKey || \"\").toLowerCase();\n      for (let i = 0; i < headers.length; i++) {\n        const hLower = headersLower[i];\n        if (hLower === label || hLower === fieldName || (sysKey && hLower === sysKey) || hLower.includes(fieldName)) {\n          newMap[`demo_${fd.fieldId}`] = headers[i];\n          break;\n        }\n      }\n    }\n\n    // Auto-map question/option labels by exact match\n    for (const lbl of mappingLabels) {\n      const idx = headersLower.indexOf(lbl.label.toLowerCase());\n      if (idx >= 0) newMap[lbl.label] = headers[idx];\n    }\n\n    setColumnMap(newMap);\n  };\n\n  // ============ Template Download ============\n\n  const handleDownloadTemplate = () => {\n    if (!mappingData) return;\n\n    const headers: string[] = [\"userId\"];\n\n    // Demographics headers from assessment config\n    for (const df of demographicFields) {\n      headers.push(df.customLabel || df.fieldDefinition.displayLabel);\n    }\n\n    // Question/option headers using labels\n    for (const lbl of mappingLabels) {\n      headers.push(lbl.label);\n    }\n\n    const ws = XLSX.utils.aoa_to_sheet([headers]);\n    const wb = XLSX.utils.book_new();\n    XLSX.utils.book_append_sheet(wb, ws, \"Data\");\n    XLSX.writeFile(\n      wb,\n      `offline_template_${mappingData.assessmentName.replace(/\\s+/g, \"_\")}.xlsx`\n    );\n  };\n\n  // ============ File Upload ============\n\n  const handleFileUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (!file || !mappingData) return;\n\n    setFileName(file.name);\n    setSubmitResult(null);\n    setSubmitProgress(null);\n    setMappingApplied(false);\n    setParsedRows([]);\n\n    const reader = new FileReader();\n    reader.onload = (evt) => {\n      const data = evt.target?.result;\n      const workbook = XLSX.read(data, { type: \"binary\" });\n      const sheetName = workbook.SheetNames[0];\n      const sheet = workbook.Sheets[sheetName];\n      const jsonData: any[] = XLSX.utils.sheet_to_json(sheet, { defval: \"\" });\n\n      if (jsonData.length === 0) {\n        alert(\"The Excel file is empty or has no data rows.\");\n        return;\n      }\n\n      const headers = Object.keys(jsonData[0]);\n      setExcelHeaders(headers);\n      setRawExcelData(jsonData);\n      runAutoMapping(headers);\n    };\n    reader.readAsBinaryString(file);\n  };\n\n  // ============ Apply Mapping & Parse ============\n\n  const applyMapping = () => {\n    if (!mappingData || rawExcelData.length === 0) return;\n\n    const rows: ParsedRow[] = rawExcelData.map((row) => {\n      // Resolve userId\n      const userIdCol = columnMap[\"userId\"];\n      let userId: number | null = null;\n      let userIdError: string | undefined;\n      if (userIdCol && row[userIdCol] !== undefined && row[userIdCol] !== \"\") {\n        userId = Number(row[userIdCol]);\n        if (isNaN(userId)) {\n          userId = null;\n          userIdError = \"Invalid userId\";\n        }\n      } else {\n        userIdError = \"Missing userId\";\n      }\n\n      // Resolve answers\n      const answers: { [qqId: number]: number | null } = {};\n      const errors: { [label: string]: string } = {};\n\n      for (const section of mappingData!.sections) {\n        const secIdx = mappingData!.sections.indexOf(section);\n        const secC = sectionCode(secIdx);\n\n        section.questions.forEach((q, qIdx) => {\n          if (q.isMQT) {\n            // MQT: check each option column, find the one with value 1\n            const selectedOptionIds: number[] = [];\n            q.options.forEach((opt, optIdx) => {\n              const optLabel = generateLabel(secC, qIdx, optIdx);\n              const excelCol = columnMap[optLabel];\n              if (excelCol) {\n                const cellVal = String(row[excelCol] ?? \"\").trim();\n                if (cellVal === \"1\" || cellVal.toLowerCase() === \"yes\" || cellVal.toLowerCase() === \"y\") {\n                  selectedOptionIds.push(opt.optionId);\n                }\n              }\n            });\n\n            const qLabel = generateLabel(secC, qIdx);\n            if (selectedOptionIds.length === 1) {\n              answers[q.questionnaireQuestionId] = selectedOptionIds[0];\n            } else if (selectedOptionIds.length > 1) {\n              answers[q.questionnaireQuestionId] = null;\n              errors[qLabel] = `Multiple options selected for MQT question`;\n            } else {\n              answers[q.questionnaireQuestionId] = null; // none selected\n            }\n          } else {\n            // Non-MQT: single column with option number/letter\n            const qLabel = generateLabel(secC, qIdx);\n            const excelCol = columnMap[qLabel];\n            if (excelCol) {\n              const result = resolveOptionId(row[excelCol], q.options);\n              answers[q.questionnaireQuestionId] = result.optionId;\n              if (result.error) errors[qLabel] = result.error;\n            } else {\n              answers[q.questionnaireQuestionId] = null;\n            }\n          }\n        });\n      }\n\n      return { userId, answers, errors, userIdError };\n    });\n\n    setParsedRows(rows);\n    setMappingApplied(true);\n  };\n\n  // ============ Edit Handlers ============\n\n  const handleUserIdChange = (rowIndex: number, value: string) => {\n    setParsedRows((prev) => {\n      const updated = [...prev];\n      const numVal = value === \"\" ? null : Number(value);\n      updated[rowIndex] = {\n        ...updated[rowIndex],\n        userId: numVal,\n        userIdError: numVal === null || isNaN(numVal) ? \"Invalid userId\" : undefined,\n      };\n      return updated;\n    });\n  };\n\n  const handleAnswerChange = (\n    rowIndex: number,\n    qqId: number,\n    optionId: number | null\n  ) => {\n    setParsedRows((prev) => {\n      const updated = [...prev];\n      const row = { ...updated[rowIndex] };\n      row.answers = { ...row.answers, [qqId]: optionId };\n      updated[rowIndex] = row;\n      return updated;\n    });\n  };\n\n  // ============ Column Map update helper ============\n\n  const updateColumnMap = (key: string, value: string) => {\n    setColumnMap((prev) => ({ ...prev, [key]: value }));\n  };\n\n  // ============ Submit ============\n\n  const handleSubmit = async () => {\n    if (!mappingData || parsedRows.length === 0) return;\n\n    const invalidRows = parsedRows.filter((r) => r.userId === null || r.userIdError);\n    if (invalidRows.length > 0) {\n      alert(`${invalidRows.length} row(s) have invalid or missing userId. Please fix them before submitting.`);\n      return;\n    }\n\n    const rowsWithErrors = parsedRows.filter((r) => Object.keys(r.errors).length > 0);\n    if (rowsWithErrors.length > 0) {\n      if (!window.confirm(`${rowsWithErrors.length} row(s) have parsing errors. Those answers will be skipped. Continue?`))\n        return;\n    }\n\n    setSubmitting(true);\n    setSubmitResult(null);\n    setSubmitProgress({ phase: \"Submitting answers\", current: 0, total: 1 });\n\n    try {\n      const students = parsedRows.map((row) => {\n        const answers: { questionnaireQuestionId: number; optionId: number }[] = [];\n        for (const [qqIdStr, optionId] of Object.entries(row.answers)) {\n          if (optionId !== null && optionId !== undefined) {\n            answers.push({\n              questionnaireQuestionId: Number(qqIdStr),\n              optionId,\n            });\n          }\n        }\n        return { userStudentId: row.userId!, answers };\n      });\n\n      const res = await bulkSubmitAnswers({\n        assessmentId: mappingData!.assessmentId,\n        students,\n      });\n\n      setSubmitProgress({ phase: \"Submitting answers\", current: 1, total: 1 });\n      setSubmitResult(res.data);\n    } catch (error: any) {\n      console.error(\"Submit failed:\", error);\n      setSubmitResult({\n        status: \"error\",\n        message: error.response?.data || error.message,\n      });\n    } finally {\n      setSubmitting(false);\n      setSubmitProgress(null);\n    }\n  };\n\n  // ============ Get option text for preview ============\n\n  const getOptionTextByQQ = (qqId: number, optionId: number | null): string => {\n    if (optionId === null) return \"\";\n    if (!mappingData) return String(optionId);\n    const q = mappingData.questions.find((q) => q.questionnaireQuestionId === qqId);\n    if (!q) return String(optionId);\n    const opt = q.options.find((o) => o.optionId === optionId);\n    return opt ? opt.optionText : String(optionId);\n  };\n\n  // Build flat list of question columns for preview table\n  const previewColumns = useMemo(() => {\n    if (!mappingData?.sections) return [];\n    const cols: {\n      label: string;\n      qqId: number;\n      questionText: string;\n      isMQT: boolean;\n      options: OptionInfo[];\n    }[] = [];\n\n    mappingData.sections.forEach((section, secIdx) => {\n      const secC = sectionCode(secIdx);\n      section.questions.forEach((q, qIdx) => {\n        cols.push({\n          label: generateLabel(secC, qIdx),\n          qqId: q.questionnaireQuestionId,\n          questionText: q.questionText,\n          isMQT: q.isMQT,\n          options: q.options,\n        });\n      });\n    });\n    return cols;\n  }, [mappingData]);\n\n  // ============ Render ============\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h3 className=\"card-title\">Offline Assessment Data Upload</h3>\n      </div>\n      <div className=\"card-body\">\n        {/* Section 1: School & Assessment Selection */}\n        <div className=\"card card-body bg-light mb-4\">\n          <h6 className=\"mb-3\">Select School & Assessment</h6>\n          <div className=\"row g-3 align-items-end\">\n            <div className=\"col-md-5\">\n              <Form.Label>School / Institute</Form.Label>\n              {loadingInstitutes ? (\n                <div><Spinner animation=\"border\" size=\"sm\" /> Loading...</div>\n              ) : (\n                <Form.Select\n                  value={selectedInstitute}\n                  onChange={(e) => setSelectedInstitute(e.target.value)}\n                >\n                  <option value=\"\">Select an institute...</option>\n                  {institutes.map((inst: any) => (\n                    <option key={inst.instituteCode} value={inst.instituteCode}>\n                      {inst.instituteName}\n                    </option>\n                  ))}\n                </Form.Select>\n              )}\n            </div>\n            <div className=\"col-md-5\">\n              <Form.Label>Assessment</Form.Label>\n              {loadingAssessments ? (\n                <div><Spinner animation=\"border\" size=\"sm\" /> Loading...</div>\n              ) : (\n                <Form.Select\n                  value={selectedAssessment}\n                  onChange={(e) => setSelectedAssessment(e.target.value)}\n                  disabled={!selectedInstitute}\n                >\n                  <option value=\"\">Select an assessment...</option>\n                  {assessmentMappings.map((a: any) => (\n                    <option key={a.id} value={a.id}>\n                      {a.assessmentName}\n                    </option>\n                  ))}\n                </Form.Select>\n              )}\n            </div>\n            <div className=\"col-md-2\">\n              {loadingMapping && <Spinner animation=\"border\" size=\"sm\" className=\"ms-2\" />}\n            </div>\n          </div>\n          {mappingData && (\n            <div className=\"mt-3\">\n              <Badge bg=\"success\" className=\"me-2\">\n                Questionnaire: {mappingData.questionnaireName}\n              </Badge>\n              <Badge bg=\"info\" className=\"me-2\">\n                {mappingData.sections?.length || 0} sections\n              </Badge>\n              <Badge bg=\"secondary\" className=\"me-2\">\n                {mappingData.questions.length} questions\n              </Badge>\n              <Badge bg=\"warning\" text=\"dark\">\n                {demographicFields.length} demographics\n              </Badge>\n            </div>\n          )}\n        </div>\n\n        {/* Section 2: Template Download & Upload */}\n        {mappingData && (\n          <div className=\"card card-body bg-light mb-4\">\n            <h6 className=\"mb-3\">Template & Upload</h6>\n            <div className=\"row g-3 align-items-end\">\n              <div className=\"col-md-4\">\n                <Button variant=\"outline-primary\" onClick={handleDownloadTemplate}>\n                  <i className=\"bi bi-download me-2\" />\n                  Download Excel Template\n                </Button>\n              </div>\n              <div className=\"col-md-6\">\n                <Form.Label>Upload Filled Excel</Form.Label>\n                <Form.Control\n                  type=\"file\"\n                  accept=\".xlsx,.xls\"\n                  ref={fileInputRef}\n                  onChange={handleFileUpload}\n                />\n              </div>\n              <div className=\"col-md-2\">\n                {fileName && <small className=\"text-muted\">{fileName}</small>}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Section 3: Column Mapping UI */}\n        {excelHeaders.length > 0 && mappingData && !mappingApplied && (\n          <div className=\"card card-body bg-light mb-4\">\n            <div className=\"d-flex justify-content-between align-items-center mb-3\">\n              <h6 className=\"mb-0\">\n                Map Excel Columns{\" \"}\n                <Badge bg=\"secondary\" className=\"ms-2\">\n                  {mappedCount} / {totalMappable} mapped\n                </Badge>\n              </h6>\n              <Button\n                variant=\"primary\"\n                onClick={applyMapping}\n                disabled={!columnMap[\"userId\"]}\n              >\n                Apply Mapping & Preview\n              </Button>\n            </div>\n\n            {/* Identity */}\n            <div className=\"mb-4\">\n              <h6 className=\"text-muted border-bottom pb-2\">Identity</h6>\n              <div className=\"row g-3\">\n                <div className=\"col-md-4\">\n                  <Form.Label className=\"mb-1 small fw-bold\">userId (Student ID)</Form.Label>\n                  <Form.Select\n                    size=\"sm\"\n                    value={columnMap[\"userId\"] || \"\"}\n                    onChange={(e) => updateColumnMap(\"userId\", e.target.value)}\n                  >\n                    <option value=\"\">-- not mapped --</option>\n                    {excelHeaders.map((h) => (\n                      <option key={h} value={h}>{h}</option>\n                    ))}\n                  </Form.Select>\n                </div>\n              </div>\n            </div>\n\n            {/* Demographics */}\n            {demographicFields.length > 0 && (\n              <div className=\"mb-4\">\n                <h6 className=\"text-muted border-bottom pb-2\">\n                  Demographics\n                  <Badge bg=\"secondary\" className=\"ms-2\" style={{ fontSize: \"0.7rem\" }}>\n                    {demographicFields.length} fields\n                  </Badge>\n                </h6>\n                <div className=\"row g-3\">\n                  {demographicFields.map((df) => {\n                    const fd = df.fieldDefinition;\n                    const label = df.customLabel || fd.displayLabel;\n                    return (\n                      <div className=\"col-md-4\" key={fd.fieldId}>\n                        <Form.Label className=\"mb-1 small fw-bold\">\n                          {label}\n                          {df.isMandatory && <span className=\"text-danger ms-1\">*</span>}\n                          <span className=\"text-muted fw-normal ms-1\" style={{ fontSize: \"0.7rem\" }}>\n                            ({fd.fieldSource === \"SYSTEM\" ? fd.systemFieldKey : \"custom\"})\n                          </span>\n                        </Form.Label>\n                        <Form.Select\n                          size=\"sm\"\n                          value={columnMap[`demo_${fd.fieldId}`] || \"\"}\n                          onChange={(e) => updateColumnMap(`demo_${fd.fieldId}`, e.target.value)}\n                        >\n                          <option value=\"\">-- not mapped --</option>\n                          {excelHeaders.map((h) => (\n                            <option key={h} value={h}>{h}</option>\n                          ))}\n                        </Form.Select>\n                      </div>\n                    );\n                  })}\n                </div>\n              </div>\n            )}\n\n            {/* Question Mapping by Section */}\n            {Object.entries(labelsBySection).map(([secC, { sectionName, labels }]) => (\n              <div className=\"mb-4\" key={secC}>\n                <h6 className=\"text-muted border-bottom pb-2\">\n                  {secC} - {sectionName}\n                </h6>\n                <div className=\"row g-3\">\n                  {labels.map((lbl) => (\n                    <div className=\"col-md-4\" key={lbl.label}>\n                      <Form.Label className=\"mb-1 small fw-bold\" title={lbl.questionText}>\n                        {lbl.label}\n                        <span className=\"text-muted fw-normal ms-1\" style={{ fontSize: \"0.75rem\" }}>\n                          {lbl.type === \"option\" ? (\n                            <>({lbl.optionText})</>\n                          ) : (\n                            <>\n                              ({lbl.questionText && lbl.questionText.length > 30\n                                ? lbl.questionText.substring(0, 30) + \"...\"\n                                : lbl.questionText})\n                            </>\n                          )}\n                        </span>\n                      </Form.Label>\n                      <Form.Select\n                        size=\"sm\"\n                        value={columnMap[lbl.label] || \"\"}\n                        onChange={(e) => updateColumnMap(lbl.label, e.target.value)}\n                      >\n                        <option value=\"\">-- not mapped --</option>\n                        {excelHeaders.map((h) => (\n                          <option key={h} value={h}>{h}</option>\n                        ))}\n                      </Form.Select>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {/* Back to Mapping button */}\n        {mappingApplied && parsedRows.length > 0 && (\n          <div className=\"mb-3\">\n            <Button\n              variant=\"outline-secondary\"\n              size=\"sm\"\n              onClick={() => {\n                setMappingApplied(false);\n                setParsedRows([]);\n              }}\n            >\n              Back to Column Mapping\n            </Button>\n          </div>\n        )}\n\n        {/* Section 4: Preview & Edit Table */}\n        {parsedRows.length > 0 && mappingData && (\n          <div className=\"mb-4\">\n            <h6 className=\"mb-3\">\n              Preview ({parsedRows.length} students)\n              {parsedRows.some((r) => Object.keys(r.errors).length > 0) && (\n                <Badge bg=\"warning\" className=\"ms-2\">Has errors</Badge>\n              )}\n            </h6>\n            <div className=\"table-responsive\" style={{ maxHeight: \"500px\" }}>\n              <table className=\"table table-bordered table-sm table-hover\">\n                <thead className=\"table-dark\" style={{ position: \"sticky\", top: 0 }}>\n                  {/* Section header row */}\n                  <tr>\n                    <th rowSpan={2} style={{ minWidth: \"50px\" }}>#</th>\n                    <th rowSpan={2} style={{ minWidth: \"120px\" }}>userId</th>\n                    {Object.entries(labelsBySection).map(([secC, { sectionName, labels }]) => {\n                      // Count unique questions in this section\n                      const uniqueQQIds = new Set(labels.map((l) => l.questionnaireQuestionId));\n                      return (\n                        <th\n                          key={secC}\n                          colSpan={uniqueQQIds.size}\n                          className=\"text-center\"\n                          style={{ borderLeft: \"2px solid #666\" }}\n                        >\n                          {secC} - {sectionName}\n                        </th>\n                      );\n                    })}\n                  </tr>\n                  {/* Question label row */}\n                  <tr>\n                    {previewColumns.map((col, idx) => {\n                      // Add section border on first question of each section\n                      const isFirstInSection = idx === 0 || previewColumns[idx - 1] &&\n                        mappingData.questions.find(q => q.questionnaireQuestionId === previewColumns[idx - 1].qqId)?.questionnaireSectionId !==\n                        mappingData.questions.find(q => q.questionnaireQuestionId === col.qqId)?.questionnaireSectionId;\n                      return (\n                        <th\n                          key={col.label}\n                          style={{\n                            minWidth: \"140px\",\n                            ...(isFirstInSection ? { borderLeft: \"2px solid #666\" } : {}),\n                          }}\n                          title={col.questionText}\n                        >\n                          {col.label}\n                          {col.isMQT && (\n                            <Badge bg=\"info\" className=\"ms-1\" style={{ fontSize: \"0.6rem\" }}>MQT</Badge>\n                          )}\n                        </th>\n                      );\n                    })}\n                  </tr>\n                </thead>\n                <tbody>\n                  {parsedRows.map((row, rowIdx) => (\n                    <tr key={rowIdx}>\n                      <td>{rowIdx + 1}</td>\n                      <td className={row.userIdError ? \"table-danger\" : \"\"}>\n                        <input\n                          type=\"number\"\n                          className=\"form-control form-control-sm\"\n                          value={row.userId ?? \"\"}\n                          onChange={(e) => handleUserIdChange(rowIdx, e.target.value)}\n                          style={{ width: \"100px\" }}\n                        />\n                      </td>\n                      {previewColumns.map((col) => {\n                        const optionId = row.answers[col.qqId];\n                        const hasError = Object.keys(row.errors).some(\n                          (errKey) => errKey.startsWith(col.label.split(\"_O\")[0])\n                        );\n                        const isBlank = optionId === null && !hasError;\n\n                        return (\n                          <td\n                            key={col.label}\n                            className={hasError ? \"table-danger\" : isBlank ? \"table-warning\" : \"\"}\n                            title={\n                              Object.entries(row.errors)\n                                .filter(([k]) => k.startsWith(col.label.split(\"_O\")[0]))\n                                .map(([, v]) => v)\n                                .join(\", \") || \"\"\n                            }\n                          >\n                            <select\n                              className=\"form-select form-select-sm\"\n                              value={optionId ?? \"\"}\n                              onChange={(e) =>\n                                handleAnswerChange(\n                                  rowIdx,\n                                  col.qqId,\n                                  e.target.value === \"\" ? null : Number(e.target.value)\n                                )\n                              }\n                            >\n                              <option value=\"\">-- Skip --</option>\n                              {col.options.map((opt) => (\n                                <option key={opt.optionId} value={opt.optionId}>\n                                  {opt.optionText}\n                                </option>\n                              ))}\n                            </select>\n                          </td>\n                        );\n                      })}\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {/* Section 5: Submit */}\n        {parsedRows.length > 0 && mappingData && (\n          <div className=\"card card-body bg-light\">\n            {submitting && submitProgress && (\n              <div className=\"mb-3\">\n                <div className=\"d-flex justify-content-between mb-1\">\n                  <small className=\"fw-bold\">{submitProgress.phase}...</small>\n                  <small>{submitProgress.current} / {submitProgress.total}</small>\n                </div>\n                <ProgressBar\n                  now={submitProgress.total > 0 ? (submitProgress.current / submitProgress.total) * 100 : 0}\n                  animated\n                  striped\n                />\n              </div>\n            )}\n\n            <div className=\"d-flex align-items-center gap-3\">\n              <Button\n                variant=\"success\"\n                size=\"lg\"\n                onClick={handleSubmit}\n                disabled={submitting}\n              >\n                {submitting ? (\n                  <><Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />Submitting...</>\n                ) : (\n                  <>Submit All ({parsedRows.length} students)</>\n                )}\n              </Button>\n\n              {submitResult && submitResult.status === \"success\" && (\n                <Alert variant=\"success\" className=\"mb-0 flex-grow-1\">\n                  Successfully processed{\" \"}\n                  <strong>{submitResult.studentsProcessed}</strong> students.\n                  {submitResult.errors?.length > 0 && (\n                    <span className=\"text-danger ms-2\">\n                      {submitResult.errors.length} error(s):\n                      {submitResult.errors.map((err: any, i: number) => (\n                        <div key={i}>Student {err.userStudentId}: {err.error}</div>\n                      ))}\n                    </span>\n                  )}\n                </Alert>\n              )}\n\n              {submitResult && submitResult.status === \"error\" && (\n                <Alert variant=\"danger\" className=\"mb-0 flex-grow-1\">\n                  Submission failed: {submitResult.message}\n                </Alert>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default OfflineAssessmentUploadPage;\n"],"names":["API_URL","process","createAssessmentMapping","data","axios","concat","getAssessmentMappingsByInstitute","instituteCode","updateAssessmentMapping","id","deleteAssessmentMapping","getAssessmentSummaryList","getMappingInfoByToken","token","registerStudentByToken","studentData","DivStyledAsH4","divWithClassName","displayName","AlertHeading","createWithBsPrefix","Component","AlertLink","Anchor","defaultProps","variant","show","transition","Fade","closeLabel","Alert","React","uncontrolledProps","ref","_useUncontrolled","useUncontrolled","bsPrefix","closeVariant","className","children","onClose","dismissible","props","_objectWithoutProperties","_excluded","prefix","useBootstrapPrefix","handleClose","useEventCallback","e","Transition","alert","_jsxs","_objectSpread","role","undefined","classNames","_jsx","CloseButton","onClick","unmountOnExit","in","Object","assign","Link","Heading","getOfflineMapping","assessmentId","sectionCode","index","letter","String","fromCharCode","generateLabel","secCode","questionIndex","optionIndex","qLabel","resolveOptionId","cellValue","options","optionId","val","trim","length","error","num","Number","isNaN","isInteger","opt","find","o","sequence","upper","toUpperCase","test","seq","charCodeAt","lower","toLowerCase","OfflineAssessmentUploadPage","_mappingData$sections","_submitResult$errors","institutes","setInstitutes","useState","selectedInstitute","setSelectedInstitute","assessmentMappings","setAssessmentMappings","selectedAssessment","setSelectedAssessment","loadingInstitutes","setLoadingInstitutes","loadingAssessments","setLoadingAssessments","mappingData","setMappingData","loadingMapping","setLoadingMapping","demographicFields","setDemographicFields","excelHeaders","setExcelHeaders","rawExcelData","setRawExcelData","columnMap","setColumnMap","mappingApplied","setMappingApplied","parsedRows","setParsedRows","fileName","setFileName","fileInputRef","useRef","submitting","setSubmitting","submitResult","setSubmitResult","submitProgress","setSubmitProgress","mappingLabels","useMemo","sections","labels","forEach","section","secIdx","secC","questions","q","qIdx","isMQT","optIdx","push","label","sectionName","questionnaireQuestionId","questionText","optionText","type","labelsBySection","grouped","lbl","mappedCount","values","filter","Boolean","totalMappable","useEffect","loadInstitutes","async","res","ReadCollegeData","console","loadAssessments","resetUploadState","mappings","allAssessments","err","mappedIds","Set","map","m","filtered","a","has","loadMapping","mappingRes","demoRes","Promise","all","getDemographicsByAssessment","current","value","updateColumnMap","key","prev","previewColumns","cols","qqId","Form","Spinner","animation","size","onChange","target","inst","instituteName","disabled","assessmentName","Badge","bg","questionnaireName","text","Button","handleDownloadTemplate","headers","df","customLabel","fieldDefinition","displayLabel","ws","XLSX","wb","replace","accept","_e$target$files","file","files","name","reader","FileReader","onload","evt","_evt$target","result","workbook","sheetName","SheetNames","sheet","Sheets","jsonData","defval","keys","headersLower","h","newMap","userIdIdx","findIndex","fd","fieldName","sysKey","systemFieldKey","i","hLower","includes","fieldId","idx","indexOf","runAutoMapping","readAsBinaryString","applyMapping","rows","row","userIdCol","userIdError","userId","answers","errors","selectedOptionIds","optLabel","excelCol","_row$excelCol","cellVal","style","fontSize","isMandatory","fieldSource","entries","_ref","title","_Fragment","substring","some","r","maxHeight","position","top","rowSpan","minWidth","_ref2","uniqueQQIds","l","colSpan","borderLeft","col","_mappingData$question","_mappingData$question2","isFirstInSection","questionnaireSectionId","rowIdx","_row$userId","handleUserIdChange","rowIndex","updated","numVal","width","hasError","errKey","startsWith","split","isBlank","_ref3","k","_ref4","v","join","handleAnswerChange","phase","total","ProgressBar","now","animated","striped","invalidRows","rowsWithErrors","window","confirm","students","qqIdStr","userStudentId","_error$response","status","message","response","studentsProcessed"],"sourceRoot":""}