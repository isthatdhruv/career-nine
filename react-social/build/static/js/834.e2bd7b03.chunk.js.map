{"version":3,"file":"static/js/834.e2bd7b03.chunk.js","mappings":"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","sources":["app/pages/College/components/CollegeInfoModal.tsx","app/pages/College/components/CollegeAssignRoleModal.tsx","app/pages/College/components/CollegeSectionSessionGradeModal.tsx","app/pages/College/components/CollegeTable.tsx","app/pages/College/components/StudentUploadModal.tsx","app/pages/College/CollegePage.tsx","app/pages/College/components/CollegeEditModal.tsx","../node_modules/react-bootstrap-v5/lib/esm/createChainedFunction.js","../node_modules/react-bootstrap-v5/lib/esm/SafeAnchor.js","../node_modules/react-bootstrap-v5/lib/esm/Button.js"],"sourcesContent":["// CollegeInfoModal.tsx\nimport React, { useEffect, useState } from \"react\";\nimport { Modal } from \"react-bootstrap-v5\";\nimport UseAnimations from \"react-useanimations\";\nimport menu2 from \"react-useanimations/lib/menu2\";\nimport { MapContactsAndBoards, GetInstituteMappings, UpdateCollegeData } from \"../API/College_APIs\";\nimport { ReadBoardData } from \"../../Board/API/Board_APIs\";\nimport { ReadContactInformationData } from \"../../ContactPerson/API/Contact_Person_APIs\";\n\ntype ContactPerson = {\n  id?: string;\n  name?: string;\n  email?: string;\n  phone?: string;\n  gender?: string;\n  designation?: string;\n};\n\ntype Board = {\n  id?: string | number;\n  boardName?: string;\n  name?: string;\n  [key: string]: any;\n};\n\ntype CollegeDataForModal = {\n  instituteCode?: string;\n  contactPersons?: ContactPerson[];\n  maxClass?: number | string;\n  [key: string]: any;\n};\n\ntype Props = {\n  show: boolean;\n  onHide: (v?: boolean) => void;\n  setPageLoading: (v: any) => void;\n  data?: CollegeDataForModal;\n};\n\nconst CollegeInfoModal = (props: Props) => {\n  const [loading, setLoading] = useState(false);\n\n  const [availableContacts, setAvailableContacts] = useState<ContactPerson[]>([]);\n  const [selectedContactIndexes, setSelectedContactIndexes] = useState<number[]>([]);\n  const [contactDropdownOpen, setContactDropdownOpen] = useState(false);\n\n  const [availableBoards, setAvailableBoards] = useState<Board[]>([]);\n  const [selectedBoardIndexes, setSelectedBoardIndexes] = useState<number[]>([]);\n  const [boardDropdownOpen, setBoardDropdownOpen] = useState(false);\n\n  //  Step 3: max class state\n  const [maxClass, setMaxClass] = useState<number | null>(null);\n\n  useEffect(() => {\n    if (!props.show) return;\n\n    const instituteCode = props.data?.instituteCode;\n\n    // Fetch all contacts, all boards, and existing mappings in parallel\n    const fetchData = async () => {\n      try {\n        const [contactsRes, boardsRes, mappingsRes] = await Promise.all([\n          ReadContactInformationData(),\n          ReadBoardData(),\n          instituteCode\n            ? GetInstituteMappings(instituteCode).catch(() => null)\n            : Promise.resolve(null),\n        ]);\n\n        // Parse contacts\n        const rawContacts: any[] =\n          (contactsRes as any)?.data?.data ??\n          (contactsRes as any)?.data?.contacts ??\n          (contactsRes as any)?.data ??\n          [];\n        const contacts: ContactPerson[] = rawContacts.filter(\n          (c) => c && (c.name || c.email || c.phone || c.designation)\n        );\n        setAvailableContacts(contacts);\n\n        // Parse boards\n        const rawBoards: any[] =\n          (boardsRes as any)?.data?.data ??\n          (boardsRes as any)?.data?.boards ??\n          (boardsRes as any)?.data ??\n          [];\n        const boards: Board[] = rawBoards.filter(\n          (b) =>\n            b &&\n            (typeof b.boardName === \"string\" ||\n              typeof b.name === \"string\" ||\n              typeof b.id !== \"undefined\")\n        );\n        setAvailableBoards(boards);\n\n        // Pre-select contacts and boards from existing mappings\n        const mappedContacts: any[] = mappingsRes?.data?.contactPersons ?? [];\n        const mappedBoards: any[] = mappingsRes?.data?.boards ?? [];\n\n        // Pre-select contacts\n        const preSelectedContacts: number[] = [];\n        contacts.forEach((contact, index) => {\n          const match = mappedContacts.find(\n            (mc: any) =>\n              (mc.id && contact.id && String(mc.id) === String(contact.id)) ||\n              (mc.email && contact.email && mc.email === contact.email)\n          );\n          if (match) preSelectedContacts.push(index);\n        });\n        setSelectedContactIndexes(preSelectedContacts);\n\n        // Pre-select boards\n        const preSelectedBoards: number[] = [];\n        boards.forEach((board, index) => {\n          const match = mappedBoards.find(\n            (mb: any) => mb.id !== undefined && board.id !== undefined && String(mb.id) === String(board.id)\n          );\n          if (match) preSelectedBoards.push(index);\n        });\n        setSelectedBoardIndexes(preSelectedBoards);\n      } catch (err) {\n        console.error(\"Failed to load data:\", err);\n        setAvailableContacts([]);\n        setAvailableBoards([]);\n        setSelectedContactIndexes([]);\n        setSelectedBoardIndexes([]);\n      }\n    };\n\n    fetchData();\n\n    // Initialize maxClass from props (if present)\n    if (props.data?.maxClass !== undefined && props.data?.maxClass !== null) {\n      const num = Number(props.data.maxClass);\n      if (!isNaN(num) && num >= 1 && num <= 12) {\n        setMaxClass(num);\n      } else {\n        setMaxClass(null);\n      }\n    } else {\n      setMaxClass(null);\n    }\n  }, [props.show, props.data]);\n\n  const toggleContactSelection = (index: number) => {\n    setSelectedContactIndexes((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n  };\n\n  const isContactSelected = (index: number) => selectedContactIndexes.includes(index);\n\n  const toggleBoardSelection = (index: number) => {\n    setSelectedBoardIndexes((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n  };\n\n  const isBoardSelected = (index: number) => selectedBoardIndexes.includes(index);\n\n  const handleMaxClassChange = (value: string) => {\n    if (value === \"\") {\n      setMaxClass(null);\n      return;\n    }\n    let num = Number(value);\n    if (isNaN(num)) return;\n    if (num < 1) num = 1;\n    if (num > 12) num = 12;\n    setMaxClass(num);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!props.data || !props.data.instituteCode) {\n      props.onHide();\n      return;\n    }\n\n    const contactPersonIds = selectedContactIndexes\n      .map((i) => availableContacts[i]?.id)\n      .filter((id) => id !== undefined)\n      .map((id) => Number(id));\n\n    const boardIds = selectedBoardIndexes\n      .map((i) => availableBoards[i]?.id)\n      .filter((id) => id !== undefined)\n      .map((id) => Number(id));\n\n    setLoading(true);\n    try {\n      // Save contact person and board mappings via dedicated endpoint\n      await MapContactsAndBoards(props.data.instituteCode, contactPersonIds, boardIds);\n\n      // Update maxClass via the existing institute update endpoint\n      if (maxClass !== null) {\n        await UpdateCollegeData({\n          ...props.data,\n          maxClass,\n        });\n      }\n\n      props.setPageLoading([\"true\"]);\n      props.onHide(false);\n    } catch (error) {\n      console.error(\"Mapping failed\", error);\n      window.location.replace(\"/error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getBoardLabel = (board: Board) =>\n    board.boardName ?? board.name ?? (board.id !== undefined ? String(board.id) : \"Board\");\n\n  const selectedContactList = selectedContactIndexes.map((i) => availableContacts[i]);\n  const selectedBoardList = selectedBoardIndexes.map((i) => availableBoards[i]);\n\n  //  Step 2 should only be usable after Step 1 has at least one selection\n  const isStep2Enabled = selectedContactIndexes.length > 0;\n\n  return (\n    <Modal\n      show={props.show}\n      onHide={() => props.onHide()}\n      centered\n      className=\"college-modal\"\n      aria-labelledby=\"college-info-modal-title\"\n    >\n      <Modal.Header className=\"border-0 pb-0\">\n        <div className=\"d-flex flex-column\">\n          <h3 id=\"college-info-modal-title\" className=\"mb-1 fw-bold\">\n            Map Board &amp; Contact Person(s)\n          </h3>\n          <span className=\"text-muted small\">\n            Link the institute with appropriate contact person(s), board(s) and max class.\n          </span>\n        </div>\n\n        <div\n          className=\"btn btn-sm btn-icon btn-light ms-3\"\n          onClick={() => props.onHide()}\n          style={{ cursor: \"pointer\" }}\n        >\n          <UseAnimations animation={menu2} size={24} strokeColor={\"#181C32\"} reverse />\n        </div>\n      </Modal.Header>\n\n      <form onSubmit={handleSubmit} className=\"form w-100\">\n        <Modal.Body className=\"pt-3\">\n          <div className=\"d-flex flex-column gap-4\">\n            {/* ====== STEP 1: CONTACT PERSONS ====== */}\n            <div className=\"card shadow-sm border-0\">\n              <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center mb-2\">\n                  <div>\n                    <div className=\"badge bg-light text-dark mb-1\">Step 1</div>\n                    <h5 className=\"mb-0\">Select Contact Person(s)</h5>\n                    <small className=\"text-muted\">\n                      Choose one or more contact persons associated with this institute.\n                    </small>\n                  </div>\n                  {availableContacts.length > 0 && (\n                    <span className=\"badge bg-success-subtle text-success\">\n                      {selectedContactIndexes.length} selected\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"mb-3\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-success dropdown-toggle d-flex align-items-center px-3 py-2\"\n                    onClick={() => setContactDropdownOpen((o) => !o)}\n                  >\n                    <span className=\"me-2\"></span>\n                    <span>\n                      {selectedContactIndexes.length > 0\n                        ? \"Edit selected contact person(s)\"\n                        : \"Select contact person(s)\"}\n                    </span>\n                  </button>\n\n                  <div\n                    className={`dropdown-menu mt-2 shadow-sm border-0 ${\n                      contactDropdownOpen ? \"show\" : \"\"\n                    }`}\n                    style={{\n                      maxHeight: \"260px\",\n                      overflowY: \"auto\",\n                      minWidth: \"320px\",\n                    }}\n                  >\n                    {availableContacts.length === 0 ? (\n                      <span className=\"dropdown-item-text text-muted fst-italic\">\n                        No contact persons found.\n                      </span>\n                    ) : (\n                      availableContacts.map((person, index) => {\n                        const initials =\n                          (person.name || \"\")\n                            .split(\" \")\n                            .map((p) => p[0])\n                            .join(\"\")\n                            .toUpperCase() || \"?\";\n\n                        return (\n                          <label\n                            key={person.id ?? `${person.email}-${index}`}\n                            className=\"dropdown-item d-flex align-items-start py-2\"\n                            style={{ cursor: \"pointer\" }}\n                          >\n                            <input\n                              type=\"checkbox\"\n                              className=\"form-check-input me-3 mt-1\"\n                              checked={isContactSelected(index)}\n                              onChange={() => toggleContactSelection(index)}\n                            />\n                            <div className=\"d-flex align-items-start w-100\">\n                              <div\n                                className=\"rounded-circle d-flex align-items-center justify-content-center me-3\"\n                                style={{\n                                  width: 32,\n                                  height: 32,\n                                  background: \"#eef3ff\",\n                                  fontSize: 13,\n                                  fontWeight: 600,\n                                }}\n                              >\n                                {initials}\n                              </div>\n                              <div>\n                                <div className=\"fw-semibold\">\n                                  {person.name || \"Unnamed Contact\"}\n                                </div>\n                                <div className=\"text-muted small\">\n                                  {person.email && <span>{person.email}</span>}\n                                  {person.phone && (\n                                    <span>\n                                      {\" \"}\n                                      {person.email ? \"  \" : \"\"}\n                                      {person.phone}\n                                    </span>\n                                  )}\n                                </div>\n                                {(person.gender || person.designation) && (\n                                  <div className=\"small text-muted\">\n                                    {[person.gender, person.designation]\n                                      .filter(Boolean)\n                                      .join(\"  \")}\n                                  </div>\n                                )}\n                              </div>\n                            </div>\n                          </label>\n                        );\n                      })\n                    )}\n                  </div>\n                </div>\n\n                {selectedContactList.length > 0 && (\n                  <div>\n                    <div className=\"text-muted small mb-1\">Selected contact(s):</div>\n                    <div className=\"d-flex flex-wrap gap-2\">\n                      {selectedContactList.map((person, idx) => (\n                        <span\n                          key={person.id ?? `${person.email}-chip-${idx}`}\n                          className=\"badge bg-light text-dark border\"\n                        >\n                          {person.name || \"Unnamed Contact\"}\n                          {person.designation && (\n                            <span className=\"text-muted ms-1 small\">\n                              ({person.designation})\n                            </span>\n                          )}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* ====== STEP 2: BOARDS ====== */}\n            <div\n              className={`card shadow-sm border-0 ${\n                !isStep2Enabled ? \"opacity-75\" : \"\"\n              }`}\n            >\n              <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center mb-2\">\n                  <div>\n                    <div className=\"badge bg-light text-dark mb-1\">Step 2</div>\n                    <h5 className=\"mb-0\">Select Board(s)</h5>\n                    <small className=\"text-muted\">\n                      Map this institute to one or more education boards.\n                      {!isStep2Enabled && (\n                        <span className=\"text-danger ms-1\">\n                          (Select at least one contact person in Step 1 first)\n                        </span>\n                      )}\n                    </small>\n                  </div>\n                  {availableBoards.length > 0 && isStep2Enabled && (\n                    <span className=\"badge bg-primary-subtle text-primary\">\n                      {selectedBoardIndexes.length} selected\n                    </span>\n                  )}\n                </div>\n\n                <div className=\"mb-3\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-primary dropdown-toggle d-flex align-items-center px-3 py-2\"\n                    onClick={() => {\n                      if (!isStep2Enabled) return;\n                      setBoardDropdownOpen((o) => !o);\n                    }}\n                    disabled={!isStep2Enabled}\n                  >\n                    <span className=\"me-2\"></span>\n                    <span>\n                      {selectedBoardIndexes.length > 0\n                        ? \"Edit selected board(s)\"\n                        : \"Select board(s)\"}\n                    </span>\n                  </button>\n\n                  <div\n                    className={`dropdown-menu mt-2 shadow-sm border-0 ${\n                      boardDropdownOpen && isStep2Enabled ? \"show\" : \"\"\n                    }`}\n                    style={{\n                      maxHeight: \"260px\",\n                      overflowY: \"auto\",\n                      minWidth: \"260px\",\n                    }}\n                  >\n                    {!isStep2Enabled ? (\n                      <span className=\"dropdown-item-text text-muted fst-italic\">\n                        Please select contact person(s) in Step 1 first.\n                      </span>\n                    ) : availableBoards.length === 0 ? (\n                      <span className=\"dropdown-item-text text-muted fst-italic\">\n                        No boards found.\n                      </span>\n                    ) : (\n                      availableBoards.map((board, index) => {\n                        const label = getBoardLabel(board);\n\n                        return (\n                          <label\n                            key={`${label}-${index}`}\n                            className=\"dropdown-item d-flex align-items-center py-2\"\n                            style={{ cursor: \"pointer\" }}\n                          >\n                            <input\n                              type=\"checkbox\"\n                              className=\"form-check-input me-3\"\n                              checked={isBoardSelected(index)}\n                              onChange={() => toggleBoardSelection(index)}\n                            />\n                            <span className=\"fw-semibold\">{label}</span>\n                          </label>\n                        );\n                      })\n                    )}\n                  </div>\n                </div>\n\n                {isStep2Enabled && selectedBoardList.length > 0 && (\n                  <div>\n                    <div className=\"text-muted small mb-1\">Selected board(s):</div>\n                    <div className=\"d-flex flex-wrap gap-2\">\n                      {selectedBoardList.map((board, idx) => (\n                        <span\n                          key={`${getBoardLabel(board)}-chip-${idx}`}\n                          className=\"badge bg-light text-dark border\"\n                        >\n                          {getBoardLabel(board)}\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </Modal.Body>\n\n        <Modal.Footer className=\"border-0 pt-0\">\n          <div className=\"d-flex justify-content-between w-100 align-items-center\">\n            <div className=\"text-muted small\">\n              {props.data?.instituteCode && (\n                <>\n                  <span className=\"fw-semibold\">Institute Code: </span>\n                  <span>{props.data.instituteCode}</span>\n                </>\n              )}\n            </div>\n\n            <div>\n              <button\n                type=\"button\"\n                className=\"btn btn-sm btn-light me-2\"\n                onClick={() => props.onHide()}\n                disabled={loading}\n              >\n                Cancel\n              </button>\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-sm btn-primary\"\n                disabled={\n                  loading ||\n                  (availableContacts.length === 0 && availableBoards.length === 0)\n                }\n              >\n                {!loading && (\n                  <span className=\"indicator-label\">Save Selection</span>\n                )}\n                {loading && (\n                  <span className=\"indicator-progress\" style={{ display: \"block\" }}>\n                    Please wait...\n                    <span className=\"spinner-border spinner-border-sm align-middle ms-2\" />\n                  </span>\n                )}\n              </button>\n            </div>\n          </div>\n        </Modal.Footer>\n      </form>\n    </Modal>\n  );\n};\n\nexport default CollegeInfoModal;\n","// CollegeInfoModal.tsx\nimport React, { useEffect, useState } from \"react\";\nimport { Modal } from \"react-bootstrap-v5\";\nimport UseAnimations from \"react-useanimations\";\nimport menu2 from \"react-useanimations/lib/menu2\";\nimport { UpdateCollegeData } from \"../API/College_APIs\";\nimport { ReadBoardData } from \"../../Board/API/Board_APIs\";\nimport { ReadContactInformationData } from \"../../ContactPerson/API/Contact_Person_APIs\";\nimport { readRoleData } from \"../../../modules/role_roleGroup/components/core/Role_RoleGroup_APIs\";\nimport axios from \"axios\";\n\ntype ContactPerson = {\n  id?: string;\n  name?: string;\n  email?: string;\n  phone?: string;\n  gender?: string;\n  designation?: string;\n  roles?: string[]; // optional roles field\n};\n\ntype Board = {\n  id?: string | number;\n  boardName?: string;\n  name?: string;\n  [key: string]: any;\n};\n\ntype CollegeDataForModal = {\n  instituteCode?: string;\n  contactPersons?: ContactPerson[];\n  maxClass?: number | string;\n  [key: string]: any;\n};\n\ntype Props = {\n  show: boolean;\n  onHide: (v?: boolean) => void;\n  setPageLoading: (v: any) => void;\n  data?: CollegeDataForModal;\n};\n\n// fallback list in case API returns no roles or fails\nconst FALLBACK_ROLE_OPTIONS = [\n  \"Principal\",\n  \"Administrator\",\n  \"Coordinator\",\n  \"Teacher\",\n  \"Accountant\",\n  \"Counselor\",\n];\n\nconst CollegeAssignRoleModal = (props: Props) => {\n  const [loading, setLoading] = useState(false);\n\n  const [availableContacts, setAvailableContacts] = useState<ContactPerson[]>([]);\n  const [selectedContactIndexes, setSelectedContactIndexes] = useState<number[]>([]);\n\n  // Per-contact dropdown open state (index -> boolean)\n  const [openRoleDropdowns, setOpenRoleDropdowns] = useState<Record<number, boolean>>({});\n\n  // Per-contact selected roles (index -> string[])\n  const [contactRoles, setContactRoles] = useState<Record<number, string[]>>({});\n\n  const [availableBoards, setAvailableBoards] = useState<Board[]>([]);\n  const [selectedBoardIndexes, setSelectedBoardIndexes] = useState<number[]>([]);\n  const [boardDropdownOpen, setBoardDropdownOpen] = useState(false);\n\n  // Roles from API\n  const [roleOptions, setRoleOptions] = useState<string[]>(FALLBACK_ROLE_OPTIONS);\n  const [rolesLoading, setRolesLoading] = useState(false);\n\n  useEffect(() => {\n    if (!props.show) return;\n\n    // Fetch contacts\n    const fetchContacts = async () => {\n      try {\n        const res = await ReadContactInformationData();\n        const rawContacts: any[] =\n          (res as any)?.data?.data ??\n          (res as any)?.data?.contacts ??\n          (res as any)?.data ??\n          [];\n\n        const contacts: ContactPerson[] = rawContacts.filter(\n          (c) => c && (c.name || c.email || c.phone || c.designation)\n        );\n\n        setAvailableContacts(contacts);\n\n        // Pre-select contacts already mapped to this institute (if any)\n        const instituteContacts = props.data?.contactPersons ?? [];\n        const preSelected: number[] = [];\n\n        contacts.forEach((contact, index) => {\n          const match = instituteContacts.find(\n            (ic) =>\n              (ic.id && contact.id && ic.id === contact.id) ||\n              (ic.email && contact.email && ic.email === contact.email)\n          );\n          if (match) {\n            preSelected.push(index);\n          }\n        });\n\n        setSelectedContactIndexes(preSelected);\n      } catch (err) {\n        console.error(\"Failed to load contacts:\", err);\n        setAvailableContacts([]);\n        setSelectedContactIndexes([]);\n      }\n    };\n\n    // Fetch boards\n    const fetchBoards = async () => {\n      try {\n        const res = await ReadBoardData();\n        const rawBoards: any[] =\n          (res as any)?.data?.data ??\n          (res as any)?.data?.boards ??\n          (res as any)?.data ??\n          [];\n\n        const boards: Board[] = rawBoards.filter(\n          (b) =>\n            b &&\n            (typeof b.boardName === \"string\" ||\n              typeof b.name === \"string\" ||\n              typeof b.id !== \"undefined\")\n        );\n        setAvailableBoards(boards);\n        setSelectedBoardIndexes([]);\n      } catch (err) {\n        console.error(\"Failed to load boards:\", err);\n        setAvailableBoards([]);\n      }\n    };\n\n    // Fetch roles from API\n    const fetchRoles = async () => {\n      setRolesLoading(true);\n      try {\n        const res = await readRoleData();\n        // Normalize different possible shapes: { data: { data: [...] } } or { data: [...] } or [...]\n        const rawRoles: any[] =\n          (res as any)?.data?.data ??\n          (res as any)?.data?.roles ??\n          (res as any)?.data ??\n          [];\n\n        // Try to extract string labels. If roles are objects, try common keys.\n        const roles: string[] = (rawRoles || [])\n          .map((r) => {\n            if (!r && r !== 0) return null;\n            if (typeof r === \"string\") return r;\n            if (typeof r === \"object\") {\n              // prefer name/role/roleName/title\n              return r.role ?? r.name ?? r.roleName ?? r.title ?? r.label ?? null;\n            }\n            return null;\n          })\n          .filter(Boolean) as string[];\n\n        if (roles.length > 0) {\n          setRoleOptions(roles);\n        } else {\n          // fallback if API returned empty\n          setRoleOptions(FALLBACK_ROLE_OPTIONS);\n        }\n      } catch (err) {\n        console.error(\"Failed to load roles:\", err);\n        // fallback to default roles if API fails\n        setRoleOptions(FALLBACK_ROLE_OPTIONS);\n      } finally {\n        setRolesLoading(false);\n      }\n    };\n\n    fetchContacts();\n    fetchBoards();\n    fetchRoles();\n  }, [props.show, props.data]);\n\n  // Initialize per-contact role selections when contacts or selected indexes change.\n  // If props.data.contactPersons had roles, map them.\n  useEffect(() => {\n    const newContactRoles: Record<number, string[]> = {};\n    selectedContactIndexes.forEach((idx) => {\n      // Try to find matching contact in props.data to carry over existing roles\n      const contact = availableContacts[idx];\n      let rolesFromProps: string[] | undefined = undefined;\n      if (props.data?.contactPersons?.length) {\n        const match = (props.data.contactPersons as ContactPerson[]).find(\n          (ic) =>\n            (ic.id && contact?.id && ic.id === contact.id) ||\n            (ic.email && contact?.email && ic.email === contact.email)\n        );\n        rolesFromProps = match?.roles;\n      }\n      newContactRoles[idx] = rolesFromProps && Array.isArray(rolesFromProps) ? rolesFromProps : [];\n    });\n    setContactRoles((prev) => ({ ...newContactRoles, ...prev }));\n    // Reset dropdown open states for safety\n    setOpenRoleDropdowns({});\n  }, [availableContacts, selectedContactIndexes, props.data]);\n\n  const toggleContactSelection = (index: number) => {\n    setSelectedContactIndexes((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n\n    // If deselecting, also clean up roles & dropdown\n    setContactRoles((prev) => {\n      const copy = { ...prev };\n      if (copy[index]) delete copy[index];\n      return copy;\n    });\n    setOpenRoleDropdowns((prev) => {\n      const copy = { ...prev };\n      if (copy[index]) delete copy[index];\n      return copy;\n    });\n  };\n\n  const isContactSelected = (index: number) => selectedContactIndexes.includes(index);\n\n  const toggleBoardSelection = (index: number) => {\n    setSelectedBoardIndexes((prev) =>\n      prev.includes(index) ? prev.filter((i) => i !== index) : [...prev, index]\n    );\n  };\n\n  const isBoardSelected = (index: number) => selectedBoardIndexes.includes(index);\n\n  const openRoleDropdownFor = (index: number) => {\n    setOpenRoleDropdowns((prev) => ({ ...prev, [index]: !prev[index] }));\n  };\n\n  const setRoleForContact = (contactIndex: number, role: string, checked: boolean) => {\n    setContactRoles((prev) => {\n      const current = prev[contactIndex] ?? [];\n      if (checked) {\n        // add if not present\n        if (!current.includes(role)) {\n          return { ...prev, [contactIndex]: [...current, role] };\n        }\n        return prev;\n      } else {\n        // remove\n        return { ...prev, [contactIndex]: current.filter((r) => r !== role) };\n      }\n    });\n  };\n\n  const removeRoleFromContact = (contactIndex: number, role: string) => {\n    setContactRoles((prev) => {\n      const current = prev[contactIndex] ?? [];\n      return { ...prev, [contactIndex]: current.filter((r) => r !== role) };\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!props.data) {\n      props.onHide();\n      return;\n    }\n\n    // Build selected contacts and attach roles per contact (if any)\n    const selectedContacts = selectedContactIndexes.map((i) => {\n      const contact = availableContacts[i];\n      const roles = contactRoles[i] ?? [];\n      return {\n        ...contact,\n        roles,\n      } as ContactPerson;\n    });\n\n    const selectedBoards = selectedBoardIndexes.map((i) => availableBoards[i]);\n\n    setLoading(true);\n    try {\n      const payload: any = {\n        ...props.data,\n        contactPersons: selectedContacts,\n      };\n\n      if (selectedBoards.length > 0) {\n        payload.boards = selectedBoards;\n      }\n\n      await UpdateCollegeData(payload);\n      props.setPageLoading([\"true\"]);\n      props.onHide(false);\n    } catch (error) {\n      console.error(\"UpdateCollegeData failed\", error);\n      window.location.replace(\"/error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getBoardLabel = (board: Board) =>\n    board.boardName ?? board.name ?? (board.id !== undefined ? String(board.id) : \"Board\");\n\n  const selectedContactList = selectedContactIndexes.map((i) => availableContacts[i]);\n  const selectedBoardList = selectedBoardIndexes.map((i) => availableBoards[i]);\n\n  // Step 2 enabled only after Step 1 has at least one selection\n  const isStep2Enabled = selectedContactIndexes.length > 0;\n\n  return (\n    <Modal\n      show={props.show}\n      onHide={() => props.onHide()}\n      centered\n      className=\"college-modal\"\n      dialogClassName=\"college-modal-dialog\"\n      aria-labelledby=\"college-info-modal-title\"\n    >\n      {/* Inline styles to control modal width and prevent horizontal scroll */}\n      <style>{`\n        /* Make the modal wider and responsive */\n        .college-modal .modal-dialog {\n          max-width: 1200px;      /* increase as needed */\n          width: 95vw;\n        }\n        /* Ensure modal body doesn't force horizontal scroll */\n        .college-modal .modal-body {\n          overflow-x: hidden;\n        }\n\n        /* Let tables auto-layout and wrap cells instead of creating horizontal scroll */\n        .college-modal .table-responsive {\n          overflow-x: visible !important;\n        }\n        .college-modal table {\n          table-layout: auto;\n          width: 100%;\n        }\n        .college-modal th, .college-modal td {\n          white-space: normal;\n          word-wrap: break-word;\n          vertical-align: middle;\n        }\n\n        /* Make role badges wrap to next line when space is insufficient */\n        .college-modal .badge {\n          white-space: nowrap;\n          margin-bottom: 4px;\n        }\n\n        /* Ensure the per-contact dropdown doesn't push layout horizontally */\n        .college-modal .card.position-absolute {\n          left: 0;\n          right: auto;\n          max-width: 420px;\n        }\n\n        /* Small screens fallback */\n        @media (max-width: 768px) {\n          .college-modal .modal-dialog {\n            max-width: 100%;\n            width: 98vw;\n          }\n        }\n      `}</style>\n\n      <Modal.Header className=\"border-0 pb-0\">\n        <div className=\"d-flex flex-column\">\n          <h3 id=\"college-info-modal-title\" className=\"mb-1 fw-bold\">\n            Assign Roles\n          </h3>\n          <span className=\"text-muted small\">Assign roles to the selected contact person</span>\n        </div>\n\n        <div\n          className=\"btn btn-sm btn-icon btn-light ms-3\"\n          onClick={() => props.onHide()}\n          style={{ cursor: \"pointer\" }}\n        >\n          <UseAnimations animation={menu2} size={24} strokeColor={\"#181C32\"} reverse />\n        </div>\n      </Modal.Header>\n\n      <form onSubmit={handleSubmit} className=\"form w-100\">\n        <Modal.Body className=\"pt-3\">\n          <div className=\"d-flex flex-column gap-4\">\n            {/* ====== STEP 1: CONTACT PERSONS ====== */}\n            <div className=\"card shadow-sm border-0\">\n              <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center mb-2\">\n                  <div>\n                    <h5 className=\"mb-0\">Selected Contact Person</h5>\n                    <small className=\"text-muted\">\n                      Choose one or more roles associated with the contact person.\n                    </small>\n                  </div>\n                </div>\n\n                {/* Contacts list (checkboxes to select contacts) */}\n                <div className=\"mt-3\">\n                  {availableContacts.length === 0 ? (\n                    <div className=\"text-muted small\">No contacts available</div>\n                  ) : (\n                    <div className=\"list-group\">\n                      {availableContacts.map((contact, idx) => (\n                        <label\n                          key={idx}\n                          className={`list-group-item d-flex justify-content-between align-items-center ${\n                            isContactSelected(idx) ? \"active\" : \"\"\n                          }`}\n                          style={{ cursor: \"pointer\" }}\n                        >\n                          <div className=\"form-check\">\n                            <input\n                              className=\"form-check-input me-2\"\n                              type=\"checkbox\"\n                              checked={isContactSelected(idx)}\n                              onChange={() => toggleContactSelection(idx)}\n                            />\n                            <span className=\"fw-semibold\">\n                              {contact.name ?? contact.email ?? contact.phone ?? \"Unnamed\"}\n                            </span>\n                            <div className=\"small text-muted\">\n                              {contact.designation ? `${contact.designation}  ` : \"\"}\n                              {contact.email ?? contact.phone}\n                            </div>\n                          </div>\n\n                          <div>\n                            {/* Open per-contact role dropdown only for selected contacts */}\n                            <button\n                              type=\"button\"\n                              className=\"btn btn-sm btn-outline-secondary\"\n                              onClick={(ev) => {\n                                ev.stopPropagation();\n                                if (!isContactSelected(idx)) {\n                                  // automatically select contact if opening roles\n                                  toggleContactSelection(idx);\n                                }\n                                openRoleDropdownFor(idx);\n                              }}\n                            >\n                              Roles\n                            </button>\n                          </div>\n                        </label>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                {/* ===== Table Listing Selected Contacts with roles dropdown & badges ===== */}\n                <div className=\"mt-4\">\n                  <h6 className=\"mb-2\">Selected Contacts & Roles</h6>\n\n                  {selectedContactIndexes.length === 0 ? (\n                    <div className=\"text-muted small\">No contact selected yet.</div>\n                  ) : (\n                    <div className=\"table-responsive\">\n                      <table className=\"table table-hover align-middle\">\n                        <thead>\n                          <tr>\n                            <th style={{ width: \"35%\" }}>Contact</th>\n                            <th style={{ width: \"50%\" }}>Assigned Roles</th>\n                            <th style={{ width: \"15%\" }}>Actions</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {selectedContactIndexes.map((ci) => {\n                            const contact = availableContacts[ci];\n                            const roles = contactRoles[ci] ?? [];\n                            const dropdownOpen = !!openRoleDropdowns[ci];\n                            return (\n                              <tr key={ci}>\n                                <td>\n                                  <div className=\"fw-semibold\">\n                                    {contact.name ?? contact.email ?? contact.phone ?? \"Unnamed\"}\n                                  </div>\n                                  <div className=\"small text-muted\">\n                                    {contact.designation ?? \"\"}\n                                    {contact.email ? `  ${contact.email}` : \"\"}\n                                  </div>\n                                </td>\n\n                                <td>\n                                  {/* badges for selected roles */}\n                                  <div className=\"d-flex flex-wrap gap-2\">\n                                    {roles.length === 0 ? (\n                                      <span className=\"small text-muted\">No roles assigned</span>\n                                    ) : (\n                                      roles.map((r) => (\n                                        <span\n                                          key={r}\n                                          className=\"badge bg-light text-dark border d-inline-flex align-items-center\"\n                                          style={{ padding: \"0.45rem 0.6rem\" }}\n                                        >\n                                          <span className=\"me-2 small\">{r}</span>\n                                          <button\n                                            type=\"button\"\n                                            aria-label={`Remove ${r}`}\n                                            className=\"btn btn-sm btn-icon btn-light btn-xs\"\n                                            onClick={() => removeRoleFromContact(ci, r)}\n                                            style={{\n                                              border: \"none\",\n                                              padding: \"0\",\n                                              margin: \"0\",\n                                              lineHeight: 1,\n                                              cursor: \"pointer\",\n                                            }}\n                                          >\n                                            <span style={{ fontSize: 14, marginLeft: 4 }}></span>\n                                          </button>\n                                        </span>\n                                      ))\n                                    )}\n                                  </div>\n\n                                  {/* role dropdown (checkbox list) */}\n                                  <div className=\"position-relative mt-2\">\n                                    {dropdownOpen && (\n                                      <div\n                                        className=\"card shadow-sm position-absolute\"\n                                        style={{\n                                          zIndex: 1200,\n                                          left: 0,\n                                          top: 0,\n                                          minWidth: 260,\n                                          padding: 12,\n                                        }}\n                                        onClick={(e) => e.stopPropagation()}\n                                      >\n                                        <div className=\"fw-semibold mb-2\">Select Roles</div>\n\n                                        {rolesLoading ? (\n                                          <div className=\"small text-muted\">Loading roles...</div>\n                                        ) : (\n                                          <div className=\"roles-list\" style={{ maxHeight: 220, overflow: \"auto\" }}>\n                                            {roleOptions.map((role) => {\n                                              const checked = (contactRoles[ci] ?? []).includes(role);\n                                              return (\n                                                <div key={role} className=\"form-check mb-1\">\n                                                  <input\n                                                    className=\"form-check-input\"\n                                                    type=\"checkbox\"\n                                                    id={`contact-${ci}-role-${role}`}\n                                                    checked={checked}\n                                                    onChange={(ev) =>\n                                                      setRoleForContact(ci, role, ev.target.checked)\n                                                    }\n                                                  />\n                                                  <label\n                                                    className=\"form-check-label ms-2\"\n                                                    htmlFor={`contact-${ci}-role-${role}`}\n                                                    style={{ cursor: \"pointer\" }}\n                                                  >\n                                                    {role}\n                                                  </label>\n                                                </div>\n                                              );\n                                            })}\n                                          </div>\n                                        )}\n\n                                        <div className=\"d-flex justify-content-end mt-2\">\n                                          <button\n                                            type=\"button\"\n                                            className=\"btn btn-sm btn-secondary me-2\"\n                                            onClick={() =>\n                                              setOpenRoleDropdowns((prev) => ({ ...prev, [ci]: false }))\n                                            }\n                                          >\n                                            Done\n                                          </button>\n                                          <button\n                                            type=\"button\"\n                                            className=\"btn btn-sm btn-outline-danger\"\n                                            onClick={() =>\n                                              setContactRoles((prev) => ({ ...prev, [ci]: [] }))\n                                            }\n                                          >\n                                            Clear\n                                          </button>\n                                        </div>\n                                      </div>\n                                    )}\n                                  </div>\n                                </td>\n\n                                <td>\n                                  <div className=\"d-flex gap-2\">\n                                    <button\n                                      type=\"button\"\n                                      className=\"btn btn-sm btn-outline-primary\"\n                                      onClick={() => openRoleDropdownFor(ci)}\n                                    >\n                                      {dropdownOpen ? \"Close\" : \"Edit\"}\n                                    </button>\n\n                                    <button\n                                      type=\"button\"\n                                      className=\"btn btn-sm btn-outline-danger\"\n                                      onClick={() => toggleContactSelection(ci)}\n                                    >\n                                      Remove\n                                    </button>\n                                  </div>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* ====== You can keep existing / additional steps below (Step 2 or Boards) ====== */}\n            {/* ... For brevity I haven't rearranged the rest of your modal  preserved original footer logic below */}\n          </div>\n        </Modal.Body>\n\n        <Modal.Footer className=\"border-0 pt-0\">\n          <div className=\"d-flex justify-content-between w-100 align-items-center\">\n            <div className=\"text-muted small\">\n              {props.data?.instituteCode && (\n                <>\n                  <span className=\"fw-semibold\">Institute Code: </span>\n                  <span>{props.data.instituteCode}</span>\n                </>\n              )}\n            </div>\n\n            <div>\n              <button\n                type=\"button\"\n                className=\"btn btn-sm btn-light me-2\"\n                onClick={() => props.onHide()}\n                disabled={loading}\n              >\n                Cancel\n              </button>\n\n              <button\n                type=\"submit\"\n                className=\"btn btn-sm btn-primary\"\n                disabled={\n                  loading || (availableContacts.length === 0 && availableBoards.length === 0)\n                }\n              >\n                {!loading && <span className=\"indicator-label\">Save Selection</span>}\n                {loading && (\n                  <span className=\"indicator-progress\" style={{ display: \"block\" }}>\n                    Please wait...\n                    <span className=\"spinner-border spinner-border-sm align-middle ms-2\" />\n                  </span>\n                )}\n              </button>\n            </div>\n          </div>\n        </Modal.Footer>\n      </form>\n    </Modal>\n  );\n};\n\nexport default CollegeAssignRoleModal;\n","// CollegeSectionSessionGradeModal.tsx\nimport React, { useState, useEffect, useMemo } from \"react\";\nimport { Modal, Button } from \"react-bootstrap-v5\";\nimport UseAnimations from \"react-useanimations\";\nimport menu2 from \"react-useanimations/lib/menu2\";\nimport {\n  CreateSessionData,\n  GetSessionsByInstituteCode,\n  UpdateSessionData,\n  DeleteSessionData,\n  UpdateClassData,\n  DeleteClassData,\n  UpdateSectionData,\n  DeleteSectionData\n} from \"../API/College_APIs\";\n\n// ============ TYPE DEFINITIONS ============\n\ntype CollegeDataForModal = {\n  instituteCode?: string;\n  instituteName?: string;\n  [key: string]: any;\n};\n\ntype Props = {\n  show: boolean;\n  onHide: (v?: boolean) => void;\n  setPageLoading: (v: any) => void;\n  data?: CollegeDataForModal;\n};\n\ninterface SectionData {\n  id: number | null;\n  sectionName: string;\n  isNew?: boolean;\n}\n\ninterface GradeData {\n  id: number | null;\n  gradeName: string;\n  sections: SectionData[];\n  isNew?: boolean;\n}\n\ninterface SessionData {\n  id: number | null;\n  sessionName: string;\n  grades: GradeData[];\n  isNew?: boolean;\n}\n\ninterface EditState {\n  type: 'session' | 'grade' | 'section';\n  id: number;\n  sessionIndex: number;\n  gradeIndex?: number;\n  sectionIndex?: number;\n  originalValue: string;\n}\n\ninterface DeleteConfirmState {\n  type: 'session' | 'grade' | 'section';\n  id: number;\n  name: string;\n  sessionIndex: number;\n  gradeIndex?: number;\n  sectionIndex?: number;\n}\n\n// ============ COMPONENT ============\n\nconst CollegeSectionSessionGradeModal = (props: Props) => {\n  const [loading, setLoading] = useState(false);\n  const [fetchLoading, setFetchLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Dropdown states\n  const [sessionDropdownOpen, setSessionDropdownOpen] = useState(false);\n  const [gradeDropdownOpen, setGradeDropdownOpen] = useState(false);\n  const [sectionDropdownOpen, setSectionDropdownOpen] = useState(false);\n\n  // Existing data from backend\n  const [existingData, setExistingData] = useState<SessionData[]>([]);\n\n  // New data being added (not yet saved)\n  const [newSessionsData, setNewSessionsData] = useState<SessionData[]>([]);\n\n  // Input states\n  const [newSessionInput, setNewSessionInput] = useState(\"\");\n  const [newGradeInput, setNewGradeInput] = useState(\"\");\n  const [newSectionInput, setNewSectionInput] = useState(\"\");\n\n  // Currently working with (for new data)\n  const [currentSessionIndex, setCurrentSessionIndex] = useState<number | null>(null);\n  const [currentGradeIndex, setCurrentGradeIndex] = useState<number | null>(null);\n\n  // Edit mode tracking\n  const [editState, setEditState] = useState<EditState | null>(null);\n  const [editValue, setEditValue] = useState(\"\");\n\n  // Delete confirmation\n  const [deleteConfirm, setDeleteConfirm] = useState<DeleteConfirmState | null>(null);\n\n  // ============ DATA FETCHING ============\n\n  const transformBackendToLocal = (backendData: any[]): SessionData[] => {\n    return backendData.map(session => ({\n      id: session.id,\n      sessionName: session.sessionYear,\n      grades: (session.schoolClasses || []).map((cls: any) => ({\n        id: cls.id,\n        gradeName: cls.className,\n        sections: (cls.schoolSections || []).map((sec: any) => ({\n          id: sec.id,\n          sectionName: sec.sectionName,\n          isNew: false\n        })),\n        isNew: false\n      })),\n      isNew: false\n    }));\n  };\n\n  const fetchExistingData = async (instituteCode: string | number) => {\n    if (!instituteCode) {\n      console.log(\"No institute code provided, skipping fetch\");\n      return;\n    }\n\n    console.log(\"Fetching data for institute code:\", instituteCode);\n    setFetchLoading(true);\n    setError(null);\n    try {\n      const response = await GetSessionsByInstituteCode(instituteCode);\n      console.log(\"API Response:\", response.data);\n      const transformedData = transformBackendToLocal(response.data);\n      console.log(\"Transformed Data:\", transformedData);\n      setExistingData(transformedData);\n    } catch (err: any) {\n      console.error(\"Error fetching existing data:\", err);\n      console.error(\"Error details:\", err.response?.data || err.message);\n      setError(\"Failed to load existing data\");\n    } finally {\n      setFetchLoading(false);\n    }\n  };\n\n  // Reset and fetch when modal opens\n  useEffect(() => {\n    if (props.show) {\n      console.log(\"Modal opened with data:\", props.data);\n\n      // Reset new data states\n      setNewSessionsData([]);\n      setNewSessionInput(\"\");\n      setNewGradeInput(\"\");\n      setNewSectionInput(\"\");\n      setCurrentSessionIndex(null);\n      setCurrentGradeIndex(null);\n      setSessionDropdownOpen(false);\n      setGradeDropdownOpen(false);\n      setSectionDropdownOpen(false);\n      setEditState(null);\n      setDeleteConfirm(null);\n      setError(null);\n      setExistingData([]);\n\n      // Fetch existing data if institute code exists\n      const instituteCode = props.data?.instituteCode;\n      if (instituteCode && instituteCode !== \"\") {\n        fetchExistingData(instituteCode);\n      } else {\n        console.log(\"No valid institute code in props.data:\", props.data);\n      }\n    }\n  }, [props.show, props.data?.instituteCode]);\n\n  // ============ ADD HANDLERS (for new data) ============\n\n  const handleAddSession = () => {\n    if (newSessionInput.trim()) {\n      const sessionExists = newSessionsData.some(s => s.sessionName === newSessionInput.trim());\n      if (!sessionExists) {\n        setNewSessionsData([...newSessionsData, {\n          id: null,\n          sessionName: newSessionInput.trim(),\n          grades: [],\n          isNew: true\n        }]);\n        setNewSessionInput(\"\");\n      }\n    }\n  };\n\n  const handleSelectSession = (index: number) => {\n    setCurrentSessionIndex(index);\n    setCurrentGradeIndex(null);\n    setSessionDropdownOpen(false);\n  };\n\n  const handleAddGrade = () => {\n    if (currentSessionIndex !== null && newGradeInput.trim()) {\n      const updatedSessions = [...newSessionsData];\n      const currentSession = updatedSessions[currentSessionIndex];\n\n      const gradeExists = currentSession.grades.some(g => g.gradeName === newGradeInput.trim());\n      if (!gradeExists) {\n        currentSession.grades.push({\n          id: null,\n          gradeName: newGradeInput.trim(),\n          sections: [],\n          isNew: true\n        });\n        setNewSessionsData(updatedSessions);\n        setNewGradeInput(\"\");\n      }\n    }\n  };\n\n  const handleSelectGrade = (gradeIndex: number) => {\n    setCurrentGradeIndex(gradeIndex);\n    setGradeDropdownOpen(false);\n  };\n\n  const handleAddSection = () => {\n    if (currentSessionIndex !== null && currentGradeIndex !== null && newSectionInput.trim()) {\n      const updatedSessions = [...newSessionsData];\n      const currentGrade = updatedSessions[currentSessionIndex].grades[currentGradeIndex];\n\n      const sectionExists = currentGrade.sections.some(s => s.sectionName === newSectionInput.trim());\n      if (!sectionExists) {\n        currentGrade.sections.push({\n          id: null,\n          sectionName: newSectionInput.trim(),\n          isNew: true\n        });\n        setNewSessionsData(updatedSessions);\n        setNewSectionInput(\"\");\n      }\n    }\n  };\n\n  const handleRemoveNewSection = (sectionIndex: number) => {\n    if (currentSessionIndex !== null && currentGradeIndex !== null) {\n      const updatedSessions = [...newSessionsData];\n      updatedSessions[currentSessionIndex].grades[currentGradeIndex].sections.splice(sectionIndex, 1);\n      setNewSessionsData(updatedSessions);\n    }\n  };\n\n  // ============ EDIT HANDLERS (for existing data) ============\n\n  const handleStartEdit = (\n    type: 'session' | 'grade' | 'section',\n    id: number,\n    sessionIndex: number,\n    currentValue: string,\n    gradeIndex?: number,\n    sectionIndex?: number\n  ) => {\n    setEditState({\n      type,\n      id,\n      sessionIndex,\n      gradeIndex,\n      sectionIndex,\n      originalValue: currentValue\n    });\n    setEditValue(currentValue);\n  };\n\n  const handleCancelEdit = () => {\n    setEditState(null);\n    setEditValue(\"\");\n  };\n\n  const handleSaveEdit = async () => {\n    if (!editState || !editValue.trim()) return;\n\n    // Optimistic update\n    const updatedData = [...existingData];\n    const session = updatedData[editState.sessionIndex];\n\n    if (editState.type === 'session') {\n      session.sessionName = editValue.trim();\n    } else if (editState.type === 'grade' && editState.gradeIndex !== undefined) {\n      session.grades[editState.gradeIndex].gradeName = editValue.trim();\n    } else if (editState.type === 'section' && editState.gradeIndex !== undefined && editState.sectionIndex !== undefined) {\n      session.grades[editState.gradeIndex].sections[editState.sectionIndex].sectionName = editValue.trim();\n    }\n\n    setExistingData(updatedData);\n    setEditState(null);\n    setEditValue(\"\");\n\n    try {\n      if (editState.type === 'session') {\n        await UpdateSessionData(editState.id, { sessionYear: editValue.trim() });\n      } else if (editState.type === 'grade') {\n        await UpdateClassData(editState.id, { className: editValue.trim() });\n      } else if (editState.type === 'section') {\n        await UpdateSectionData(editState.id, { sectionName: editValue.trim() });\n      }\n    } catch (err) {\n      console.error(\"Error updating:\", err);\n      // Rollback on error\n      const rollbackData = [...existingData];\n      const rollbackSession = rollbackData[editState.sessionIndex];\n\n      if (editState.type === 'session') {\n        rollbackSession.sessionName = editState.originalValue;\n      } else if (editState.type === 'grade' && editState.gradeIndex !== undefined) {\n        rollbackSession.grades[editState.gradeIndex].gradeName = editState.originalValue;\n      } else if (editState.type === 'section' && editState.gradeIndex !== undefined && editState.sectionIndex !== undefined) {\n        rollbackSession.grades[editState.gradeIndex].sections[editState.sectionIndex].sectionName = editState.originalValue;\n      }\n\n      setExistingData(rollbackData);\n      setError(\"Failed to update. Please try again.\");\n    }\n  };\n\n  // ============ DELETE HANDLERS ============\n\n  const handleDeleteConfirm = (\n    type: 'session' | 'grade' | 'section',\n    id: number,\n    name: string,\n    sessionIndex: number,\n    gradeIndex?: number,\n    sectionIndex?: number\n  ) => {\n    setDeleteConfirm({ type, id, name, sessionIndex, gradeIndex, sectionIndex });\n  };\n\n  const handleDeleteConfirmed = async () => {\n    if (!deleteConfirm) return;\n\n    setLoading(true);\n    try {\n      if (deleteConfirm.type === 'session') {\n        await DeleteSessionData(deleteConfirm.id);\n      } else if (deleteConfirm.type === 'grade') {\n        await DeleteClassData(deleteConfirm.id);\n      } else if (deleteConfirm.type === 'section') {\n        await DeleteSectionData(deleteConfirm.id);\n      }\n\n      // Refresh data after delete\n      if (props.data?.instituteCode) {\n        await fetchExistingData(props.data.instituteCode);\n      }\n    } catch (err) {\n      console.error(\"Error deleting:\", err);\n      setError(\"Failed to delete. Please try again.\");\n    } finally {\n      setLoading(false);\n      setDeleteConfirm(null);\n    }\n  };\n\n  // ============ SUBMIT NEW DATA ============\n\n  const handleSubmitNew = async () => {\n    if (newSessionsData.length === 0) return;\n\n    setLoading(true);\n\n    const formattedOutput = newSessionsData.map((session) => ({\n      id: null,\n      sessionYear: session.sessionName,\n      schoolClasses: session.grades.map((grade) => ({\n        id: null,\n        className: grade.gradeName,\n        schoolSections: grade.sections.map((section) => ({\n          id: null,\n          sectionName: section.sectionName\n        }))\n      })),\n      instituteCode: props.data?.instituteCode || null\n    }));\n\n    try {\n      await CreateSessionData(formattedOutput);\n      alert('New sessions submitted successfully!');\n      setNewSessionsData([]);\n      setCurrentSessionIndex(null);\n      setCurrentGradeIndex(null);\n      if (props.data?.instituteCode) {\n        await fetchExistingData(props.data.instituteCode);\n      }\n    } catch (error) {\n      console.error(\"Error in CreateSessionData:\", error);\n      alert('Error submitting. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ============ HELPER FUNCTIONS ============\n\n  const getCurrentSessionName = () => {\n    if (currentSessionIndex !== null) {\n      return newSessionsData[currentSessionIndex]?.sessionName;\n    }\n    return null;\n  };\n\n  const getCurrentGradeName = () => {\n    if (currentSessionIndex !== null && currentGradeIndex !== null) {\n      return newSessionsData[currentSessionIndex]?.grades[currentGradeIndex]?.gradeName;\n    }\n    return null;\n  };\n\n  const getCurrentSections = () => {\n    if (currentSessionIndex !== null && currentGradeIndex !== null) {\n      return newSessionsData[currentSessionIndex]?.grades[currentGradeIndex]?.sections || [];\n    }\n    return [];\n  };\n\n  // Flatten existing data for table display\n  const tableRows = useMemo(() => {\n    const rows: any[] = [];\n    existingData.forEach((session, sIdx) => {\n      if (session.grades.length === 0) {\n        rows.push({\n          sessionId: session.id,\n          sessionName: session.sessionName,\n          sessionIndex: sIdx,\n          gradeId: null,\n          gradeName: '-',\n          gradeIndex: null,\n          sectionId: null,\n          sectionName: '-',\n          sectionIndex: null\n        });\n      } else {\n        session.grades.forEach((grade, gIdx) => {\n          if (grade.sections.length === 0) {\n            rows.push({\n              sessionId: session.id,\n              sessionName: session.sessionName,\n              sessionIndex: sIdx,\n              gradeId: grade.id,\n              gradeName: grade.gradeName,\n              gradeIndex: gIdx,\n              sectionId: null,\n              sectionName: '-',\n              sectionIndex: null\n            });\n          } else {\n            grade.sections.forEach((section, secIdx) => {\n              rows.push({\n                sessionId: session.id,\n                sessionName: session.sessionName,\n                sessionIndex: sIdx,\n                gradeId: grade.id,\n                gradeName: grade.gradeName,\n                gradeIndex: gIdx,\n                sectionId: section.id,\n                sectionName: section.sectionName,\n                sectionIndex: secIdx\n              });\n            });\n          }\n        });\n      }\n    });\n    return rows;\n  }, [existingData]);\n\n  // ============ RENDER ============\n\n  return (\n    <>\n      <Modal\n        show={props.show}\n        onHide={() => props.onHide()}\n        centered\n        size=\"xl\"\n        className=\"college-modal\"\n        aria-labelledby=\"college-detail-modal-title\"\n        style={{ maxHeight: '90vh' }}\n      >\n        <style>{`\n          .college-modal .modal-dialog {\n            max-width: 1200px;\n            height: 85vh;\n          }\n\n          .college-modal .modal-content {\n            height: 100%;\n            display: flex;\n            flex-direction: column;\n          }\n\n          .college-modal .modal-body {\n            flex: 1;\n            overflow-y: auto;\n            max-height: calc(85vh - 180px);\n          }\n\n          .college-modal .dropdown-menu {\n            max-height: 300px;\n          }\n\n          .editable-cell:hover {\n            background-color: #f8f9fa;\n            cursor: pointer;\n          }\n        `}</style>\n\n        <Modal.Header className=\"border-0 pb-0\">\n          <div className=\"d-flex flex-column\">\n            <h3 id=\"college-detail-modal-title\" className=\"mb-1 fw-bold\">\n              Institute Details\n            </h3>\n            <span className=\"text-muted small\">\n              {props.data?.instituteName && (\n                <span className=\"fw-semibold me-2\">{props.data.instituteName}</span>\n              )}\n              Manage sessions, grades, and sections\n            </span>\n          </div>\n\n          <div\n            className=\"btn btn-sm btn-icon btn-light ms-3\"\n            onClick={() => props.onHide()}\n            style={{ cursor: \"pointer\" }}\n          >\n            <UseAnimations animation={menu2} size={24} strokeColor={\"#181C32\"} reverse />\n          </div>\n        </Modal.Header>\n\n        <div className=\"form w-100\">\n          <Modal.Body className=\"pt-3\">\n            {error && (\n              <div className=\"alert alert-danger alert-dismissible mb-3\">\n                {error}\n                <button type=\"button\" className=\"btn-close\" onClick={() => setError(null)}></button>\n              </div>\n            )}\n\n            {/* ====== QUICK ACTIONS - HORIZONTAL LAYOUT ====== */}\n            <div className=\"card shadow-sm border-0 mb-4\" style={{ background: 'linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)' }}>\n              <div className=\"card-body\">\n                <div className=\"mb-3\">\n                  <h5 className=\"mb-1 fw-semibold\">Add New Items</h5>\n                  <small className=\"text-muted\">\n                    Add new sessions, grades, and sections for this institute\n                  </small>\n                </div>\n\n                {/* Horizontal row of dropdowns */}\n                <div className=\"d-flex gap-3 flex-wrap\">\n                  {/* Session Dropdown */}\n                  <div className=\"flex-fill position-relative\" style={{ minWidth: '200px' }}>\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-primary dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100\"\n                      onClick={() => {\n                        setSessionDropdownOpen(!sessionDropdownOpen);\n                        setGradeDropdownOpen(false);\n                        setSectionDropdownOpen(false);\n                      }}\n                    >\n                      <div className=\"d-flex align-items-center gap-2\">\n                        <i className=\"bi bi-calendar-plus\"></i>\n                        <span>{getCurrentSessionName() || \"Session\"}</span>\n                      </div>\n                    </button>\n                    {sessionDropdownOpen && (\n                      <div\n                        className=\"dropdown-menu show w-100 p-3 shadow-lg\"\n                        style={{ minWidth: '100%', maxHeight: '300px', overflowY: 'auto', position: 'absolute', zIndex: 1000 }}\n                      >\n                        <div className=\"mb-3\">\n                          <label className=\"form-label small fw-semibold\">Add New Session</label>\n                          <div className=\"input-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"e.g., 2024-25\"\n                              value={newSessionInput}\n                              onChange={(e) => setNewSessionInput(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === 'Enter') {\n                                  handleAddSession();\n                                  e.preventDefault();\n                                }\n                              }}\n                            />\n                            <button\n                              type=\"button\"\n                              className=\"btn btn-primary\"\n                              onClick={handleAddSession}\n                              disabled={!newSessionInput.trim()}\n                            >\n                              <i className=\"bi bi-plus-lg\"></i>\n                            </button>\n                          </div>\n                        </div>\n\n                        {newSessionsData.length > 0 && (\n                          <>\n                            <div className=\"dropdown-divider\"></div>\n                            <label className=\"form-label small fw-semibold\">New Sessions</label>\n                            <div className=\"list-group\">\n                              {newSessionsData.map((session, index) => (\n                                <button\n                                  key={index}\n                                  type=\"button\"\n                                  className={`list-group-item list-group-item-action ${currentSessionIndex === index ? 'active' : ''}`}\n                                  onClick={() => handleSelectSession(index)}\n                                >\n                                  <div className=\"d-flex justify-content-between align-items-center\">\n                                    <span>{session.sessionName}</span>\n                                    <span className=\"badge bg-secondary\">{session.grades.length} grades</span>\n                                  </div>\n                                </button>\n                              ))}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Grade Dropdown */}\n                  <div className=\"flex-fill position-relative\" style={{ minWidth: '200px' }}>\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-success dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100\"\n                      onClick={() => {\n                        if (currentSessionIndex !== null) {\n                          setGradeDropdownOpen(!gradeDropdownOpen);\n                          setSessionDropdownOpen(false);\n                          setSectionDropdownOpen(false);\n                        }\n                      }}\n                      disabled={currentSessionIndex === null}\n                    >\n                      <div className=\"d-flex align-items-center gap-2\">\n                        <i className=\"bi bi-award\"></i>\n                        <span>{getCurrentGradeName() || \"Grade\"}</span>\n                        {currentSessionIndex === null && <small className=\"ms-1 text-light\">(select session)</small>}\n                      </div>\n                    </button>\n                    {gradeDropdownOpen && currentSessionIndex !== null && (\n                      <div\n                        className=\"dropdown-menu show w-100 p-3 shadow-lg\"\n                        style={{ minWidth: '100%', maxHeight: '300px', overflowY: 'auto', position: 'absolute', zIndex: 1000 }}\n                      >\n                        <div className=\"mb-3\">\n                          <label className=\"form-label small fw-semibold\">\n                            Add Grade to \"{getCurrentSessionName()}\"\n                          </label>\n                          <div className=\"input-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"e.g., Class 9\"\n                              value={newGradeInput}\n                              onChange={(e) => setNewGradeInput(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === 'Enter') {\n                                  handleAddGrade();\n                                  e.preventDefault();\n                                }\n                              }}\n                            />\n                            <button\n                              type=\"button\"\n                              className=\"btn btn-success\"\n                              onClick={handleAddGrade}\n                              disabled={!newGradeInput.trim()}\n                            >\n                              <i className=\"bi bi-plus-lg\"></i>\n                            </button>\n                          </div>\n                        </div>\n\n                        {newSessionsData[currentSessionIndex]?.grades.length > 0 && (\n                          <>\n                            <div className=\"dropdown-divider\"></div>\n                            <label className=\"form-label small fw-semibold\">Grades</label>\n                            <div className=\"list-group\">\n                              {newSessionsData[currentSessionIndex].grades.map((grade, index) => (\n                                <button\n                                  key={index}\n                                  type=\"button\"\n                                  className={`list-group-item list-group-item-action ${currentGradeIndex === index ? 'active' : ''}`}\n                                  onClick={() => handleSelectGrade(index)}\n                                >\n                                  <div className=\"d-flex justify-content-between align-items-center\">\n                                    <span>{grade.gradeName}</span>\n                                    <span className=\"badge bg-secondary\">{grade.sections.length} sections</span>\n                                  </div>\n                                </button>\n                              ))}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Section Dropdown */}\n                  <div className=\"flex-fill position-relative\" style={{ minWidth: '200px' }}>\n                    <button\n                      type=\"button\"\n                      className=\"btn btn-info dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100\"\n                      onClick={() => {\n                        if (currentGradeIndex !== null) {\n                          setSectionDropdownOpen(!sectionDropdownOpen);\n                          setSessionDropdownOpen(false);\n                          setGradeDropdownOpen(false);\n                        }\n                      }}\n                      disabled={currentGradeIndex === null}\n                    >\n                      <div className=\"d-flex align-items-center gap-2\">\n                        <i className=\"bi bi-grid-3x3\"></i>\n                        <span>Section ({getCurrentSections().length})</span>\n                        {currentGradeIndex === null && <small className=\"ms-1 text-light\">(select grade)</small>}\n                      </div>\n                    </button>\n                    {sectionDropdownOpen && currentGradeIndex !== null && (\n                      <div\n                        className=\"dropdown-menu show w-100 p-3 shadow-lg\"\n                        style={{ minWidth: '100%', maxHeight: '300px', overflowY: 'auto', position: 'absolute', zIndex: 1000 }}\n                      >\n                        <div className=\"mb-3\">\n                          <label className=\"form-label small fw-semibold\">\n                            Add Section to \"{getCurrentGradeName()}\"\n                          </label>\n                          <div className=\"input-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"e.g., A, B, C\"\n                              value={newSectionInput}\n                              onChange={(e) => setNewSectionInput(e.target.value)}\n                              onKeyPress={(e) => {\n                                if (e.key === 'Enter') {\n                                  handleAddSection();\n                                  e.preventDefault();\n                                }\n                              }}\n                            />\n                            <button\n                              type=\"button\"\n                              className=\"btn btn-info\"\n                              onClick={handleAddSection}\n                              disabled={!newSectionInput.trim()}\n                            >\n                              <i className=\"bi bi-plus-lg\"></i>\n                            </button>\n                          </div>\n                        </div>\n\n                        {getCurrentSections().length > 0 && (\n                          <>\n                            <div className=\"dropdown-divider\"></div>\n                            <label className=\"form-label small fw-semibold\">Sections</label>\n                            <div className=\"list-group\">\n                              {getCurrentSections().map((section, index) => (\n                                <div\n                                  key={index}\n                                  className=\"list-group-item d-flex justify-content-between align-items-center\"\n                                >\n                                  <span>{section.sectionName}</span>\n                                  <button\n                                    type=\"button\"\n                                    className=\"btn btn-sm btn-danger\"\n                                    onClick={() => handleRemoveNewSection(index)}\n                                  >\n                                    <i className=\"bi bi-trash\"></i>\n                                  </button>\n                                </div>\n                              ))}\n                            </div>\n                          </>\n                        )}\n                      </div>\n                    )}\n                  </div>\n                </div>\n\n                {/* New Items Summary */}\n                {newSessionsData.length > 0 && (\n                  <div className=\"mt-3 p-3 bg-white rounded border\">\n                    <h6 className=\"mb-2 fw-semibold d-flex align-items-center gap-2\">\n                      <i className=\"bi bi-plus-circle text-success\"></i>\n                      New Items to Submit\n                    </h6>\n                    <div className=\"d-flex flex-wrap gap-2\">\n                      {newSessionsData.map((session, idx) => (\n                        <span key={idx} className=\"badge bg-primary px-2 py-1\">\n                          {session.sessionName} ({session.grades.length} grades)\n                        </span>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* ====== EXISTING DATA TABLE ====== */}\n            <div className=\"card shadow-sm border-0\">\n              <div className=\"card-body\">\n                <div className=\"d-flex justify-content-between align-items-center mb-3\">\n                  <div>\n                    <h5 className=\"mb-1 fw-semibold\">Existing Data</h5>\n                    <small className=\"text-muted\">\n                      Click on any cell to edit. Changes are saved immediately.\n                    </small>\n                  </div>\n                  {fetchLoading && (\n                    <div className=\"spinner-border spinner-border-sm text-primary\" role=\"status\">\n                      <span className=\"visually-hidden\">Loading...</span>\n                    </div>\n                  )}\n                </div>\n\n                {tableRows.length === 0 && !fetchLoading ? (\n                  <div className=\"text-center text-muted py-5\">\n                    <i className=\"bi bi-inbox\" style={{ fontSize: '3rem' }}></i>\n                    <p className=\"mt-2 mb-0\">No existing data for this institute</p>\n                  </div>\n                ) : (\n                  <div className=\"table-responsive\">\n                    <table className=\"table table-bordered table-hover mb-0\">\n                      <thead className=\"table-light\">\n                        <tr>\n                          <th style={{ width: '25%' }}>Session</th>\n                          <th style={{ width: '25%' }}>Grade/Class</th>\n                          <th style={{ width: '25%' }}>Section</th>\n                          <th style={{ width: '25%' }}>Actions</th>\n                        </tr>\n                      </thead>\n                      <tbody>\n                        {tableRows.map((row, idx) => (\n                          <tr key={idx}>\n                            {/* Session Cell */}\n                            <td className=\"editable-cell\">\n                              {editState?.type === 'session' && editState.sessionIndex === row.sessionIndex ? (\n                                <div className=\"d-flex gap-1\">\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control form-control-sm\"\n                                    value={editValue}\n                                    onChange={(e) => setEditValue(e.target.value)}\n                                    onKeyPress={(e) => {\n                                      if (e.key === 'Enter') handleSaveEdit();\n                                      if (e.key === 'Escape') handleCancelEdit();\n                                    }}\n                                    autoFocus\n                                  />\n                                  <button className=\"btn btn-sm btn-success\" onClick={handleSaveEdit}>\n                                    <i className=\"bi bi-check\"></i>\n                                  </button>\n                                  <button className=\"btn btn-sm btn-secondary\" onClick={handleCancelEdit}>\n                                    <i className=\"bi bi-x\"></i>\n                                  </button>\n                                </div>\n                              ) : (\n                                <span\n                                  onClick={() => row.sessionId && handleStartEdit('session', row.sessionId, row.sessionIndex, row.sessionName)}\n                                  title=\"Click to edit\"\n                                >\n                                  {row.sessionName}\n                                </span>\n                              )}\n                            </td>\n\n                            {/* Grade Cell */}\n                            <td className=\"editable-cell\">\n                              {editState?.type === 'grade' && editState.sessionIndex === row.sessionIndex && editState.gradeIndex === row.gradeIndex ? (\n                                <div className=\"d-flex gap-1\">\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control form-control-sm\"\n                                    value={editValue}\n                                    onChange={(e) => setEditValue(e.target.value)}\n                                    onKeyPress={(e) => {\n                                      if (e.key === 'Enter') handleSaveEdit();\n                                      if (e.key === 'Escape') handleCancelEdit();\n                                    }}\n                                    autoFocus\n                                  />\n                                  <button className=\"btn btn-sm btn-success\" onClick={handleSaveEdit}>\n                                    <i className=\"bi bi-check\"></i>\n                                  </button>\n                                  <button className=\"btn btn-sm btn-secondary\" onClick={handleCancelEdit}>\n                                    <i className=\"bi bi-x\"></i>\n                                  </button>\n                                </div>\n                              ) : (\n                                <span\n                                  onClick={() => row.gradeId && handleStartEdit('grade', row.gradeId, row.sessionIndex, row.gradeName, row.gradeIndex)}\n                                  title={row.gradeId ? \"Click to edit\" : \"\"}\n                                  style={{ color: row.gradeId ? 'inherit' : '#6c757d' }}\n                                >\n                                  {row.gradeName}\n                                </span>\n                              )}\n                            </td>\n\n                            {/* Section Cell */}\n                            <td className=\"editable-cell\">\n                              {editState?.type === 'section' && editState.sessionIndex === row.sessionIndex && editState.gradeIndex === row.gradeIndex && editState.sectionIndex === row.sectionIndex ? (\n                                <div className=\"d-flex gap-1\">\n                                  <input\n                                    type=\"text\"\n                                    className=\"form-control form-control-sm\"\n                                    value={editValue}\n                                    onChange={(e) => setEditValue(e.target.value)}\n                                    onKeyPress={(e) => {\n                                      if (e.key === 'Enter') handleSaveEdit();\n                                      if (e.key === 'Escape') handleCancelEdit();\n                                    }}\n                                    autoFocus\n                                  />\n                                  <button className=\"btn btn-sm btn-success\" onClick={handleSaveEdit}>\n                                    <i className=\"bi bi-check\"></i>\n                                  </button>\n                                  <button className=\"btn btn-sm btn-secondary\" onClick={handleCancelEdit}>\n                                    <i className=\"bi bi-x\"></i>\n                                  </button>\n                                </div>\n                              ) : (\n                                <span\n                                  onClick={() => row.sectionId && handleStartEdit('section', row.sectionId, row.sessionIndex, row.sectionName, row.gradeIndex, row.sectionIndex)}\n                                  title={row.sectionId ? \"Click to edit\" : \"\"}\n                                  style={{ color: row.sectionId ? 'inherit' : '#6c757d' }}\n                                >\n                                  {row.sectionName}\n                                </span>\n                              )}\n                            </td>\n\n                            {/* Actions Cell */}\n                            <td>\n                              <div className=\"d-flex gap-1\">\n                                {row.sectionId && (\n                                  <button\n                                    className=\"btn btn-sm btn-outline-danger\"\n                                    onClick={() => handleDeleteConfirm('section', row.sectionId, row.sectionName, row.sessionIndex, row.gradeIndex, row.sectionIndex)}\n                                    title=\"Delete section\"\n                                  >\n                                    <i className=\"bi bi-trash\"></i> Section\n                                  </button>\n                                )}\n                                {row.gradeId && !row.sectionId && (\n                                  <button\n                                    className=\"btn btn-sm btn-outline-danger\"\n                                    onClick={() => handleDeleteConfirm('grade', row.gradeId, row.gradeName, row.sessionIndex, row.gradeIndex)}\n                                    title=\"Delete grade\"\n                                  >\n                                    <i className=\"bi bi-trash\"></i> Grade\n                                  </button>\n                                )}\n                                {row.sessionId && !row.gradeId && (\n                                  <button\n                                    className=\"btn btn-sm btn-outline-danger\"\n                                    onClick={() => handleDeleteConfirm('session', row.sessionId, row.sessionName, row.sessionIndex)}\n                                    title=\"Delete session\"\n                                  >\n                                    <i className=\"bi bi-trash\"></i> Session\n                                  </button>\n                                )}\n                              </div>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                )}\n              </div>\n            </div>\n          </Modal.Body>\n\n          <Modal.Footer className=\"border-0 pt-0\">\n            <div className=\"d-flex justify-content-between w-100 align-items-center\">\n              <div className=\"text-muted small\">\n                {props.data?.instituteCode && (\n                  <>\n                    <span className=\"fw-semibold\">Institute Code: </span>\n                    <span>{props.data.instituteCode}</span>\n                  </>\n                )}\n              </div>\n\n              <div className=\"d-flex gap-2\">\n                <button\n                  type=\"button\"\n                  className=\"btn btn-sm btn-light\"\n                  onClick={() => props.onHide()}\n                  disabled={loading}\n                >\n                  Close\n                </button>\n\n                <button\n                  type=\"button\"\n                  className=\"btn btn-sm btn-primary\"\n                  onClick={handleSubmitNew}\n                  disabled={loading || newSessionsData.length === 0}\n                >\n                  {!loading && (\n                    <span className=\"d-flex align-items-center gap-1\">\n                      <i className=\"bi bi-check-circle\"></i>\n                      Submit New ({newSessionsData.length})\n                    </span>\n                  )}\n                  {loading && (\n                    <span className=\"d-flex align-items-center gap-2\">\n                      <span className=\"spinner-border spinner-border-sm\" />\n                      Submitting...\n                    </span>\n                  )}\n                </button>\n              </div>\n            </div>\n          </Modal.Footer>\n        </div>\n      </Modal>\n\n      {/* Delete Confirmation Modal */}\n      <Modal show={deleteConfirm !== null} onHide={() => setDeleteConfirm(null)} centered size=\"sm\">\n        <Modal.Header closeButton>\n          <Modal.Title className=\"h5\">Confirm Delete</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <p className=\"mb-2\">Are you sure you want to delete this {deleteConfirm?.type}?</p>\n          <p className=\"fw-bold text-danger mb-2\">\"{deleteConfirm?.name}\"</p>\n          {deleteConfirm?.type === 'session' && (\n            <p className=\"text-warning small mb-0\">\n              <i className=\"bi bi-exclamation-triangle me-1\"></i>\n              This will also delete all grades and sections within this session.\n            </p>\n          )}\n          {deleteConfirm?.type === 'grade' && (\n            <p className=\"text-warning small mb-0\">\n              <i className=\"bi bi-exclamation-triangle me-1\"></i>\n              This will also delete all sections within this grade.\n            </p>\n          )}\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"secondary\" size=\"sm\" onClick={() => setDeleteConfirm(null)}>\n            Cancel\n          </Button>\n          <Button variant=\"danger\" size=\"sm\" onClick={handleDeleteConfirmed} disabled={loading}>\n            {loading ? (\n              <span className=\"d-flex align-items-center gap-1\">\n                <span className=\"spinner-border spinner-border-sm\" />\n                Deleting...\n              </span>\n            ) : (\n              \"Delete\"\n            )}\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n};\n\nexport default CollegeSectionSessionGradeModal;\n","// CollegeTable.tsx\nimport React, { useState } from \"react\";\nimport { MDBDataTableV5 } from \"mdbreact\";\nimport { AiFillEdit, AiOutlineInfoCircle } from \"react-icons/ai\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport UseAnimations from \"react-useanimations\";\nimport trash from \"react-useanimations/lib/trash\";\nimport { Button, Dropdown } from \"react-bootstrap\";\nimport { IconContext } from \"react-icons\";\nimport { MdEdit, MdDelete, MdSchool, MdOutlineDashboard, MdUploadFile } from \"react-icons/md\";\n\nimport { DeleteCollegeData } from \"../API/College_APIs\";\nimport CollegeEditModal from \"./CollegeEditModal\";\nimport CollegeInfoModal from \"./CollegeInfoModal\";\nimport CollegeAssignRoleModal from \"../components/CollegeAssignRoleModal\";\nimport CollegeDetailModal from \"./CollegeSectionSessionGradeModal\";\n\n// Layout reference image (local path)\nconst layoutImagePath = \"/mnt/data/556d6c4d-1033-4fd7-8d4f-f02d4f436ce2.png\";\n\n/**\n * Row item shape coming from parent table data\n * (kept permissive  API may return extra fields)\n */\ntype CollegeRow = {\n  id?: string | number; //  added: backend id used for delete\n  instituteName?: string;\n  instituteAddress?: string;\n  instituteCode?: string;\n  display?: boolean | string | number | undefined;\n  // optional: questionOptions, contactPersons, etc. if present from API\n  questionOptions?: string[];\n  contactPersons?: any[];\n  [k: string]: any;\n};\n\n/**\n * Modal-friendly partial form shape (matches CollegeInfoModal expected fields).\n * We only include fields the modal uses.\n */\ntype ModalData = {\n  instituteName?: string;\n  instituteAddress?: string;\n  instituteCode?: string;\n  display?: string | number | undefined;\n  questionOptions?: string[];\n  contactPersons?: any[];\n};\n\nconst CollegeTable = (props: {\n  data?: CollegeRow[];\n  setLoading: (v: boolean) => void;\n  setPageLoading: (v: any) => void;\n  onUploadClick?: (college: CollegeRow) => void;\n}) => {\n  const [modalShowEdit, setModalShowEdit] = useState(false);\n  const [editModalData, setEditModalData] = useState<CollegeRow>({\n    instituteName: \"\",\n    instituteAddress: \"\",\n    instituteCode: \"\",\n  });\n\n  // Info modal state: typed as ModalData | undefined\n  const [infoModalShow, setInfoModalShow] = useState(false);\n  const [infoModalData, setInfoModalData] = useState<ModalData | undefined>(\n    undefined\n  );\n\n  const [detailModalShow, setDetailModalShow] = useState(false);\n  const [detailModalData, setDetailModalData] = useState<ModalData | undefined>(\n    undefined\n  );\n\n  const [infoRolesModalShow, setInfoRolesModalShow] = useState(false);\n  const [infoRolesModalData, setInfoRolesModalData] = useState<ModalData | undefined>(\n    undefined\n  );\n  const navigate = useNavigate();\n  // convert a table row into the modal-compatible partial form shape\n  const toModalData = (row: CollegeRow): ModalData => {\n    // convert boolean display -> numeric (1/0), keep numeric/string as is\n    let display: string | number | undefined;\n    if (typeof row.display === \"boolean\") display = row.display ? 1 : 0;\n    else display = row.display as string | number | undefined;\n\n    return {\n      instituteName: row.instituteName ?? \"\",\n      instituteAddress: row.instituteAddress ?? \"\",\n      instituteCode: row.instituteCode ?? \"\",\n      display,\n      // preserve if API returned these already, otherwise use minimal defaults\n      questionOptions: row.questionOptions ?? [\"\"],\n      contactPersons:\n        row.contactPersons &&\n        Array.isArray(row.contactPersons) &&\n        row.contactPersons.length\n          ? row.contactPersons\n          : [\n              {\n                name: \"\",\n                email: \"\",\n                phone: \"\",\n                gender: \"\",\n                designation: \"\",\n              },\n            ],\n    };\n  };\n\n  // Prepare rows only for items with display === true (accepts boolean or numeric/string truthy)\n  const rows =\n    (props.data ?? [])\n      .filter((d) => {\n        if (!d) return false;\n        // if display is boolean, require true; if string/number, treat \"true\"/1 as shown\n        if (typeof d.display === \"boolean\") return d.display === true;\n        if (typeof d.display === \"number\") return d.display !== 0;\n        if (typeof d.display === \"string\")\n          return d.display !== \"0\" && d.display !== \"false\";\n        return Boolean(d.display);\n      })\n      .map((data) => ({\n        name: data.instituteName ?? \"\",\n        code: data.instituteCode ?? \"\",\n        address: data.instituteAddress ?? \"\",\n        actions: (\n          <>\n            {/* Edit Button */}\n            <button\n              type=\"button\"\n              onClick={() => {\n                setEditModalData(data);\n                setModalShowEdit(true);\n              }}\n              className=\"btn btn-icon btn-primary btn-sm me-3\"\n            >\n              <AiFillEdit size={16} />\n            </button>\n\n            {/* Delete Button */}\n            <button\n              type=\"button\"\n              onClick={async () => {\n                try {\n                  const deleteId = data.id ?? data.instituteCode;\n\n                  console.log(\"Attempting to delete college. Row:\", data);\n                  console.log(\"Using deleteId:\", deleteId);\n\n                  if (!deleteId) {\n                    console.error(\n                      \"No 'id' or 'instituteCode' found on this row. Cannot call DeleteCollegeData.\"\n                    );\n                    alert(\"Cannot delete: no valid ID found for this record.\");\n                    return;\n                  }\n\n                  props.setLoading(true);\n\n                  //  Backend expects /instituteDetail/delete/{id}\n                  await DeleteCollegeData(deleteId);\n\n                  // trigger parent reload  toggle pattern is generic\n                  props.setPageLoading((p: any) => !p);\n                } catch (err) {\n                  console.error(\"Delete failed:\", err);\n                  alert(\"Delete failed. Check console for details.\");\n                } finally {\n                  props.setLoading(false);\n                }\n              }}\n              className=\"btn btn-icon btn-danger btn-sm me-3\"\n            >\n              <UseAnimations\n                animation={trash}\n                size={22}\n                strokeColor={\"#EFF8FE\"}\n              />\n            </button>\n\n            {/* Actions Dropdown - Combines Add Course, Info, and Assign Role */}\n            <Dropdown className=\"d-inline\">\n              <Dropdown.Toggle \n                variant=\"success\" \n                size=\"sm\" \n                id={`dropdown-${data.instituteCode}`}\n                className=\"dropdown-toggle\"\n              >\n                Actions\n              </Dropdown.Toggle>\n\n              <Dropdown.Menu\n                style={{\n                  minWidth: '150px',\n                  zIndex: 1050,\n                }}\n                popperConfig={{ strategy: 'fixed' }}\n                renderOnMount\n              >\n                {/* Add Course */}\n                <Link\n                  to=\"/course\"\n                  state={{\n                    collegeId: data.instituteCode,\n                    college: data.instituteName,\n                  }}\n                  style={{ textDecoration: 'none' }}\n                >\n                  <Dropdown.Item as=\"button\">\n                    <AiOutlineInfoCircle size={18} className=\"me-2\" />\n                    Add Course\n                  </Dropdown.Item>\n                </Link>\n\n                {/* Info */}\n                <Dropdown.Item\n                  onClick={() => {\n                    setInfoModalData(toModalData(data));\n                    setInfoModalShow(true);\n                  }}\n                >\n                  <AiOutlineInfoCircle size={18} className=\"me-2\" />\n                  Info\n                </Dropdown.Item>\n\n                {/* Add Details */}\n                <Dropdown.Item\n                  onClick={() => {\n                    setDetailModalData(toModalData(data));\n                    setDetailModalShow(true);\n                  }}\n                >\n                  <AiOutlineInfoCircle size={18} className=\"me-2\" />\n                  Add Details\n                </Dropdown.Item>\n\n                {/* Assign Role */}\n                <Dropdown.Item\n                  onClick={() => {\n                    setInfoRolesModalData(toModalData(data));\n                    setInfoRolesModalShow(true);\n                  }}\n                >\n                  <AiOutlineInfoCircle size={18} className=\"me-2\" />\n                  Assign Roles\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n\n            {/* Upload students excel for this institute */}\n            <Button\n              variant=\"outline-success\"\n              size=\"sm\"\n              onClick={() => {\n                if (props.onUploadClick) {\n                  props.onUploadClick(editModalData);\n                }\n              }}\n              onClickCapture={() => {\n                if (typeof ({} as any) === \"undefined\") {}\n              }}\n            >\n              {/* fallback when using compiled TypeScript; real handler below */}\n            </Button>\n            {/* School Dashboard */}\n            <Button\n              variant=\"outline-info\"\n              size=\"sm\"\n              className=\"me-2\"\n              onClick={() => navigate(`/school/dashboard/${data.instituteCode || data.id}`)}\n            >\n              <IconContext.Provider value={{ style: { paddingBottom: \"3px\" } }}>\n                <MdOutlineDashboard />\n              </IconContext.Provider>\n              <span style={{ marginLeft: 6 }}>Dashboard</span>\n            </Button>\n\n            {/* Actual safe handler - call passed in prop */}\n            <Button\n              variant=\"outline-success\"\n              size=\"sm\"\n              className=\"me-2\"\n              onClick={() => props.onUploadClick && props.onUploadClick(data)}\n            >\n              <IconContext.Provider value={{ style: { paddingBottom: \"3px\" } }}>\n                <MdUploadFile />\n              </IconContext.Provider>\n              <span style={{ marginLeft: 6 }}>Upload Students</span>\n            </Button>\n            {/* Simpler: call prop directly if provided */}\n            <Button\n              hidden\n              onClick={() => {}}\n            />\n          </>\n        ),\n      })) ?? [];\n\n  const datatable = {\n    columns: [\n      {\n        label: \"Name\",\n        field: \"name\",\n        width: 150,\n        attributes: {\n          \"aria-controls\": \"DataTable\",\n          \"aria-label\": \"Name\",\n        },\n      },\n      {\n        label: \"Code\",\n        field: \"code\",\n        sort: \"asc\",\n        width: 100,\n      },\n      {\n        label: \"Address\",\n        field: \"address\",\n        width: 100,\n      },\n      {\n        label: \"Actions\",\n        field: \"actions\",\n        sort: \"disabled\",\n        width: 150,\n      },\n    ],\n    rows: rows,\n  };\n\n  return (\n    <>\n      <MDBDataTableV5\n        hover\n        scrollY\n        maxHeight=\"160vh\"\n        entriesOptions={[5, 20, 25]}\n        entries={25}\n        pagesAmount={4}\n        data={datatable}\n      />\n\n      {/* Edit modal (existing) */}\n      <CollegeEditModal\n        show={modalShowEdit}\n        onHide={() => setModalShowEdit(false)}\n        data={editModalData}\n        setPageLoading={props.setPageLoading}\n      />\n\n      {/* Info modal */}\n      <CollegeInfoModal\n        show={infoModalShow}\n        onHide={() => setInfoModalShow(false)}\n        data={infoModalData}\n        setPageLoading={props.setPageLoading}\n      />\n      {/* Detail modal */}\n      <CollegeDetailModal\n        show={detailModalShow}\n        onHide={() => setDetailModalShow(false)}\n        data={detailModalData}\n        setPageLoading={props.setPageLoading}\n      />\n\n      {/* Assign Roles */}\n      <CollegeAssignRoleModal\n        show={infoRolesModalShow}\n        onHide={() => setInfoRolesModalShow(false)}\n        data={infoRolesModalData}\n        setPageLoading={props.setPageLoading}\n      />\n    </>\n  );\n};\n\nexport default CollegeTable;","import React, { useState } from \"react\";\nimport { Modal, Button, Form } from \"react-bootstrap\";\n\ntype Props = {\n  show: boolean;\n  onHide: () => void;\n  college: any | null;\n  onUploaded?: () => void;\n};\n\nconst StudentUploadModal: React.FC<Props> = ({ show, onHide, college, onUploaded }) => {\n  const [file, setFile] = useState<File | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState<string | null>(null);\n\n  const onFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFile(e.target.files?.[0] || null);\n  };\n\n  const upload = async () => {\n    if (!file || !college) {\n      setMessage(\"Please select a file and institute.\");\n      return;\n    }\n    setLoading(true);\n    setMessage(null);\n    try {\n      const fd = new FormData();\n      fd.append(\"file\", file);\n      // Adjust endpoint to match your backend\n      const res = await fetch(`/api/colleges/${college.instituteCode || college.id}/students/upload`, {\n        method: \"POST\",\n        body: fd,\n      });\n      if (!res.ok) throw new Error(\"Upload failed\");\n      setMessage(\"Uploaded successfully\");\n      if (onUploaded) onUploaded();\n    } catch (err) {\n      console.error(err);\n      setMessage(\"Upload failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Modal show={show} onHide={onHide} size=\"lg\" centered>\n      <Modal.Header closeButton>\n        <Modal.Title>Upload Students Excel</Modal.Title>\n      </Modal.Header>\n      <Modal.Body>\n        <div>\n          <div><strong>Institute:</strong> {college?.instituteName || \"\"}</div>\n          <Form.Group className=\"mt-3\">\n            <Form.Label>Student file (.xlsx, .xls, .csv)</Form.Label>\n            <Form.Control type=\"file\" accept=\".xlsx,.xls,.csv\" onChange={onFileChange} />\n            <Form.Text className=\"text-muted\">First row should contain headers (name, email, rollNo etc.)</Form.Text>\n          </Form.Group>\n          {message && <div className=\"mt-2\">{message}</div>}\n        </div>\n      </Modal.Body>\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={onHide} disabled={loading}>Close</Button>\n        <Button variant=\"primary\" onClick={upload} disabled={loading || !file}>\n          {loading ? \"Uploading\" : \"Upload\"}\n        </Button>\n      </Modal.Footer>\n    </Modal>\n  );\n};\n\nexport default StudentUploadModal;","import { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Button } from \"react-bootstrap\";\nimport { IconContext } from \"react-icons\";\nimport { MdSchool } from \"react-icons/md\";\nimport { MdPersonAdd } from \"react-icons/md\";\nimport { ReadCollegeData } from \"./API/College_APIs\";\nimport CollegeCreateModal from \"./components/CollegeCreateModal\";\nimport CollegeTable from \"./components/CollegeTable\";\nimport StudentUploadModal from \"./components/StudentUploadModal\";\n\nconst CollegePage = () => {\n  const [modalShowCreate, setModalShowCreate] = useState(false);\n  const [collegeData, setCollegeData] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [pageLoading, setPageLoading] = useState([\"false\"]);\n  const [showStudentUpload, setShowStudentUpload] = useState(false);\n  const [selectedCollegeForUpload, setSelectedCollegeForUpload] = useState<any>(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setLoading(true);\n    try {\n      ReadCollegeData().then((data) => {\n        setCollegeData(data.data);\n        setLoading(false);\n      });\n    } catch (error) {\n      console.error(error);\n      // window.location.replace(\"/error\");\n    }\n  }, [pageLoading]);\n\n  const openUploadForCollege = (college: any) => {\n    setSelectedCollegeForUpload(college);\n    setShowStudentUpload(true);\n  };\n\n  const onUploadComplete = () => {\n    // trigger refresh\n    setShowStudentUpload(false);\n    setSelectedCollegeForUpload(null);\n    setPageLoading([String(Date.now())]);\n  };\n\n  return (\n    <div className=\"card\">\n      {loading && (\n        <span className=\"indicator-progress m-5\" style={{ display: \"block\" }}>\n          Please wait...{\" \"}\n          <span className=\"spinner-border spinner-border-sm align-middle ms-2\"></span>\n        </span>\n      )}\n\n      {!loading && (\n        <div className=\"card-header border-0 pt-6\">\n          <div className=\"card-title\">\n            <h1>Institutes List</h1>\n          </div>\n\n          <div className=\"card-toolbar\">\n            <div className=\"d-flex justify-content-end\">\n              <div style={{ display: \"flex\", gap: 8 }}>\n                <Button\n                  variant=\"primary\"\n                  onClick={() => {\n                    setModalShowCreate(true);\n                  }}\n                >\n                  <IconContext.Provider value={{ style: { paddingBottom: \"4px\" } }}>\n                    <div>\n                      Add Institute <MdSchool size={21} />\n                    </div>\n                  </IconContext.Provider>\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {!loading && (\n        <div className=\"card-body pt-5\">\n          <CollegeTable\n            data={collegeData}\n            setLoading={setLoading}\n            setPageLoading={setPageLoading}\n            onUploadClick={openUploadForCollege}\n          />\n        </div>\n      )}\n\n      <CollegeCreateModal\n        setPageLoading={setPageLoading}\n        show={modalShowCreate}\n        onHide={() => setModalShowCreate(false)}\n      />\n\n      <StudentUploadModal\n        show={showStudentUpload}\n        onHide={() => setShowStudentUpload(false)}\n        college={selectedCollegeForUpload}\n        onUploaded={onUploadComplete}\n      />\n    </div>\n  );\n};\n\nexport default CollegePage;\n","import clsx from \"clsx\";\nimport { useFormik } from \"formik\";\nimport { useState } from \"react\";\nimport { Modal } from \"react-bootstrap-v5\";\nimport UseAnimations from \"react-useanimations\";\nimport menu2 from \"react-useanimations/lib/menu2\";\nimport * as Yup from \"yup\";\nimport { UpdateCollegeData } from \"../API/College_APIs\";\n\nconst validationSchema = Yup.object().shape({\n  instituteName: Yup.string().required(),\n  instituteAddress: Yup.string().required(),\n  instituteCode: Yup.string().required(),\n  maxStudents: Yup.string().required(),\n  maxContactPersons: Yup.string().required(),\n});\n\nconst CollegeEditModal = (props: {\n  show: Boolean;\n  onHide: any;\n  data: any;\n  setPageLoading: any;\n}) => {\n  const [loading, setLoading] = useState(false);\n\n  var initialValues: any = {\n    instituteName: props.data.instituteName,\n    instituteAddress: props.data.instituteAddress,\n    instituteCode: props.data.instituteCode,\n    maxStudents: props.data.maxStudents,\n    maxContactPersons: props.data.maxContactPersons,\n    display: 1,\n  };\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues,\n    validationSchema: validationSchema,\n    onSubmit: (values) => {\n      try {\n        setLoading(true);\n        UpdateCollegeData(values).then(() => {\n          props.onHide(false);\n          props.setPageLoading([\"true\"]);\n        });\n      } catch (error) {\n        console.error(error);\n        window.location.replace(\"/error\");\n      }\n    },\n  });\n  return (\n    <Modal {...props} aria-labelledby=\"contained-modal-title-vcenter\" centered>\n      <Modal.Header>\n        <Modal.Title>\n          <h1>Edit College</h1>\n        </Modal.Title>\n        <div\n          className=\"btn btn-sm btn-icon btn-active-color-primary\"\n          onClick={props.onHide}\n        >\n          <UseAnimations\n            animation={menu2}\n            size={28}\n            strokeColor={\"#181C32\"}\n            reverse={true}\n          />\n        </div>\n      </Modal.Header>\n      <form\n        className=\"form w-100 fv-plugins-bootstrap5 fv-plugins-framework\"\n        onSubmit={formik.handleSubmit}\n      >\n        <Modal.Body>\n          <div className=\"modal-body\">\n            <div\n              className=\"scroll-y me-n7 pe-7\"\n              id=\"kt_modal_add_scroll\"\n              data-kt-scroll=\"true\"\n              data-kt-scroll-activate=\"{default: false, lg: true}\"\n              data-kt-scroll-max-height=\"auto\"\n              data-kt-scroll-dependencies=\"#kt_modal_add_header\"\n              data-kt-scroll-wrappers=\"#kt_modal_add_scroll\"\n              data-kt-scroll-offset=\"300px\"\n            >\n              <div className=\"fv-row mb-7\">\n                <label className=\"fs-6 fw-bold mb-2\">Institute Code :</label>\n\n                <input\n                  placeholder=\"Enter Institute Code\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  {...formik.getFieldProps(\"instituteCode\")}\n                  className=\"form-control form-control-lg form-control-solid\"\n                  disabled\n                />\n              </div>\n              <div className=\"fv-row mb-7\">\n                <label className=\"required fs-6 fw-bold mb-2\">\n                  College Name :\n                </label>\n\n                <input\n                  placeholder=\"Enter College Name\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  {...formik.getFieldProps(\"instituteName\")}\n                  className={clsx(\n                    \"form-control form-control-lg form-control-solid\",\n                    {\n                      \"is-invalid text-danger\":\n                        formik.touched.instituteName &&\n                        formik.errors.instituteName,\n                    },\n                    {\n                      \"is-valid\":\n                        formik.touched.instituteName &&\n                        !formik.errors.instituteName,\n                    }\n                  )}\n                />\n                {formik.touched.instituteName && formik.errors.instituteName && (\n                  <div className=\"fv-plugins-message-container\">\n                    <div className=\"fv-help-block text-danger\">\n                      <span role=\"alert\">College Name is Required</span>\n                    </div>\n                  </div>\n                )}\n              </div>\n              <div className=\"fv-row mb-7\">\n                <label className=\"required fs-6 fw-bold mb-2\">\n                  Institute Address :\n                </label>\n\n                <input\n                  placeholder=\"Enter Institute Address\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  {...formik.getFieldProps(\"instituteAddress\")}\n                  className={clsx(\n                    \"form-control form-control-lg form-control-solid\",\n                    {\n                      \"is-invalid text-danger\":\n                        formik.touched.instituteAddress &&\n                        formik.errors.instituteAddress,\n                    },\n                    {\n                      \"is-valid\":\n                        formik.touched.instituteAddress &&\n                        !formik.errors.instituteAddress,\n                    }\n                  )}\n                />\n                {formik.touched.instituteAddress &&\n                  formik.errors.instituteAddress && (\n                    <div className=\"fv-plugins-message-container\">\n                      <div className=\"fv-help-block text-danger\">\n                        <span role=\"alert\">Institute Address is Required</span>\n                      </div>\n                    </div>\n                  )}\n              </div>\n\n              {/* Max Students */}\n              <div className=\"fv-row mb-7\">\n                <label className=\"required fs-6 fw-bold mb-2\">\n                  Maximum Students :\n                </label>\n                <input\n                  placeholder=\"Enter Maximum Students\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  {...formik.getFieldProps(\"maxStudents\")}\n                  className={clsx(\n                    \"form-control form-control-lg form-control-solid\",\n                    {\n                      \"is-invalid text-danger\":\n                        formik.touched.maxStudents && !!formik.errors.maxStudents,\n                    },\n                    {\n                      \"is-valid\":\n                        formik.touched.maxStudents && !formik.errors.maxStudents,\n                    }\n                  )}\n                />\n                {formik.touched.maxStudents && formik.errors.maxStudents && (\n                  <div className=\"fv-plugins-message-container\">\n                    <div className=\"fv-help-block text-danger\">\n                      <span role=\"alert\">Maximum Students is Required</span>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Max Contact Persons */}\n              <div className=\"fv-row mb-7\">\n                <label className=\"required fs-6 fw-bold mb-2\">\n                  Maximum Contact Persons :\n                </label>\n                <input\n                  placeholder=\"Enter Maximum Contact Persons\"\n                  type=\"text\"\n                  autoComplete=\"off\"\n                  {...formik.getFieldProps(\"maxContactPersons\")}\n                  className={clsx(\n                    \"form-control form-control-lg form-control-solid\",\n                    {\n                      \"is-invalid text-danger\":\n                        formik.touched.maxContactPersons &&\n                        !!formik.errors.maxContactPersons,\n                    },\n                    {\n                      \"is-valid\":\n                        formik.touched.maxContactPersons &&\n                        !formik.errors.maxContactPersons,\n                    }\n                  )}\n                />\n                {formik.touched.maxContactPersons &&\n                  formik.errors.maxContactPersons && (\n                    <div className=\"fv-plugins-message-container\">\n                      <div className=\"fv-help-block text-danger\">\n                        <span role=\"alert\">\n                          Maximum Contact Persons is Required\n                        </span>\n                      </div>\n                    </div>\n                  )}\n              </div>\n\n            </div>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <button\n            className=\"btn btn-sm btn-light btn-active-light-secoundary\"\n            onClick={props.onHide}\n          >\n            Close\n          </button>\n          <button\n            type=\"submit\"\n            id=\"kt_sign_up_submit\"\n            className=\"btn btn-sm btn-primary btn-active-light-secoundary\"\n            disabled={formik.isSubmitting || !formik.isValid}\n          >\n            {!loading && <span className=\"indicator-label\">Submit</span>}\n            {loading && (\n              <span className=\"indicator-progress\" style={{ display: \"block\" }}>\n                Please wait...{\" \"}\n                <span className=\"spinner-border spinner-border-sm align-middle ms-2\"></span>\n              </span>\n            )}\n          </button>\n        </Modal.Footer>\n      </form>\n    </Modal>\n  );\n};\n\nexport default CollegeEditModal;\n","/**\n * Safe chained function\n *\n * Will only create a new function if needed,\n * otherwise will pass back existing functions or null.\n *\n * @param {function} functions to chain\n * @returns {function|null}\n */\nfunction createChainedFunction() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  return funcs.filter(function (f) {\n    return f != null;\n  }).reduce(function (acc, f) {\n    if (typeof f !== 'function') {\n      throw new Error('Invalid Argument Type, must only provide functions, undefined, or null.');\n    }\n\n    if (acc === null) return f;\n    return function chainedFunction() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      // @ts-ignore\n      acc.apply(this, args); // @ts-ignore\n\n      f.apply(this, args);\n    };\n  }, null);\n}\n\nexport default createChainedFunction;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport createChainedFunction from './createChainedFunction';\n\nfunction isTrivialHref(href) {\n  return !href || href.trim() === '#';\n}\n/**\n * There are situations due to browser quirks or Bootstrap CSS where\n * an anchor tag is needed, when semantically a button tag is the\n * better choice. SafeAnchor ensures that when an anchor is used like a\n * button its accessible. It also emulates input `disabled` behavior for\n * links, which is usually desirable for Buttons, NavItems, DropdownItems, etc.\n */\n\n\nvar SafeAnchor = React.forwardRef(function (_ref, ref) {\n  var _ref$as = _ref.as,\n      Component = _ref$as === void 0 ? 'a' : _ref$as,\n      disabled = _ref.disabled,\n      onKeyDown = _ref.onKeyDown,\n      props = _objectWithoutPropertiesLoose(_ref, [\"as\", \"disabled\", \"onKeyDown\"]);\n\n  var handleClick = function handleClick(event) {\n    var href = props.href,\n        onClick = props.onClick;\n\n    if (disabled || isTrivialHref(href)) {\n      event.preventDefault();\n    }\n\n    if (disabled) {\n      event.stopPropagation();\n      return;\n    }\n\n    if (onClick) {\n      onClick(event);\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(event) {\n    if (event.key === ' ') {\n      event.preventDefault();\n      handleClick(event);\n    }\n  };\n\n  if (isTrivialHref(props.href)) {\n    props.role = props.role || 'button'; // we want to make sure there is a href attribute on the node\n    // otherwise, the cursor incorrectly styled (except with role='button')\n\n    props.href = props.href || '#';\n  }\n\n  if (disabled) {\n    props.tabIndex = -1;\n    props['aria-disabled'] = true;\n  }\n\n  return /*#__PURE__*/React.createElement(Component, _extends({\n    ref: ref\n  }, props, {\n    onClick: handleClick,\n    onKeyDown: createChainedFunction(handleKeyDown, onKeyDown)\n  }));\n});\nSafeAnchor.displayName = 'SafeAnchor';\nexport default SafeAnchor;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport classNames from 'classnames';\nimport React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport SafeAnchor from './SafeAnchor';\nvar defaultProps = {\n  variant: 'primary',\n  active: false,\n  disabled: false\n};\nvar Button = React.forwardRef(function (_ref, ref) {\n  var bsPrefix = _ref.bsPrefix,\n      variant = _ref.variant,\n      size = _ref.size,\n      active = _ref.active,\n      className = _ref.className,\n      block = _ref.block,\n      type = _ref.type,\n      as = _ref.as,\n      props = _objectWithoutPropertiesLoose(_ref, [\"bsPrefix\", \"variant\", \"size\", \"active\", \"className\", \"block\", \"type\", \"as\"]);\n\n  var prefix = useBootstrapPrefix(bsPrefix, 'btn');\n  var classes = classNames(className, prefix, active && 'active', variant && prefix + \"-\" + variant, block && prefix + \"-block\", size && prefix + \"-\" + size);\n\n  if (props.href) {\n    return /*#__PURE__*/React.createElement(SafeAnchor, _extends({}, props, {\n      as: as,\n      ref: ref,\n      className: classNames(classes, props.disabled && 'disabled')\n    }));\n  }\n\n  if (ref) {\n    props.ref = ref;\n  }\n\n  if (type) {\n    props.type = type;\n  } else if (!as) {\n    props.type = 'button';\n  }\n\n  var Component = as || 'button';\n  return /*#__PURE__*/React.createElement(Component, _extends({}, props, {\n    className: classes\n  }));\n});\nButton.displayName = 'Button';\nButton.defaultProps = defaultProps;\nexport default Button;"],"names":["props","_props$data4","loading","setLoading","useState","availableContacts","setAvailableContacts","selectedContactIndexes","setSelectedContactIndexes","contactDropdownOpen","setContactDropdownOpen","availableBoards","setAvailableBoards","selectedBoardIndexes","setSelectedBoardIndexes","boardDropdownOpen","setBoardDropdownOpen","maxClass","setMaxClass","useEffect","_props$data","_props$data2","_props$data3","show","instituteCode","data","async","_ref","_ref2","_data$data","_data","_data2","_ref3","_ref4","_data$data2","_data3","_data4","_mappingsRes$data$con","_mappingsRes$data","_mappingsRes$data$boa","_mappingsRes$data2","contactsRes","boardsRes","mappingsRes","Promise","all","ReadContactInformationData","ReadBoardData","GetInstituteMappings","catch","resolve","contacts","filter","c","name","email","phone","designation","boards","b","boardName","id","mappedContacts","contactPersons","mappedBoards","preSelectedContacts","forEach","contact","index","find","mc","String","push","preSelectedBoards","board","mb","undefined","err","console","error","fetchData","num","Number","isNaN","isContactSelected","includes","isBoardSelected","getBoardLabel","_ref5","_board$boardName","selectedContactList","map","i","selectedBoardList","isStep2Enabled","length","_jsxs","Modal","onHide","centered","className","children","_jsx","onClick","style","cursor","UseAnimations","animation","menu2","size","strokeColor","reverse","onSubmit","e","preventDefault","contactPersonIds","_availableContacts$i","boardIds","_availableBoards$i","MapContactsAndBoards","UpdateCollegeData","_objectSpread","setPageLoading","window","location","replace","type","o","concat","maxHeight","overflowY","minWidth","person","_person$id","initials","split","p","join","toUpperCase","checked","onChange","prev","toggleContactSelection","width","height","background","fontSize","fontWeight","gender","Boolean","idx","_person$id2","disabled","label","toggleBoardSelection","_Fragment","display","FALLBACK_ROLE_OPTIONS","openRoleDropdowns","setOpenRoleDropdowns","contactRoles","setContactRoles","roleOptions","setRoleOptions","rolesLoading","setRolesLoading","_props$data$contactPe","res","instituteContacts","preSelected","ic","fetchContacts","fetchBoards","_ref6","_data$data3","_data5","_data6","readRoleData","roles","r","_ref7","_ref8","_ref9","_ref0","_r$role","role","roleName","title","fetchRoles","newContactRoles","_props$data2$contactP","rolesFromProps","match","Array","isArray","copy","openRoleDropdownFor","dialogClassName","selectedContacts","_contactRoles$i","selectedBoards","payload","_ref10","_ref11","_contact$name","_contact$email","ev","stopPropagation","ci","_contactRoles$ci","_ref12","_ref13","_contact$name2","_contact$designation","dropdownOpen","padding","removeRoleFromContact","contactIndex","_prev$contactIndex2","current","border","margin","lineHeight","marginLeft","zIndex","left","top","overflow","_contactRoles$ci2","setRoleForContact","_prev$contactIndex","target","htmlFor","_props$data6","_newSessionsData$curr6","_props$data7","fetchLoading","setFetchLoading","setError","sessionDropdownOpen","setSessionDropdownOpen","gradeDropdownOpen","setGradeDropdownOpen","sectionDropdownOpen","setSectionDropdownOpen","existingData","setExistingData","newSessionsData","setNewSessionsData","newSessionInput","setNewSessionInput","newGradeInput","setNewGradeInput","newSectionInput","setNewSectionInput","currentSessionIndex","setCurrentSessionIndex","currentGradeIndex","setCurrentGradeIndex","editState","setEditState","editValue","setEditValue","deleteConfirm","setDeleteConfirm","fetchExistingData","log","response","GetSessionsByInstituteCode","transformedData","session","sessionName","sessionYear","grades","schoolClasses","cls","gradeName","sections","schoolSections","sec","sectionName","isNew","_err$response","message","handleAddSession","trim","some","s","handleAddGrade","updatedSessions","currentSession","g","handleAddSection","currentGrade","handleStartEdit","sessionIndex","currentValue","gradeIndex","sectionIndex","originalValue","handleCancelEdit","handleSaveEdit","updatedData","UpdateSessionData","UpdateClassData","UpdateSectionData","rollbackData","rollbackSession","handleDeleteConfirm","getCurrentSessionName","_newSessionsData$curr","getCurrentGradeName","_newSessionsData$curr2","_newSessionsData$curr3","getCurrentSections","_newSessionsData$curr4","_newSessionsData$curr5","tableRows","useMemo","rows","sIdx","sessionId","gradeId","sectionId","grade","gIdx","section","secIdx","instituteName","position","placeholder","value","onKeyPress","key","handleSelectSession","splice","handleRemoveNewSection","row","autoFocus","color","formattedOutput","_props$data5","CreateSessionData","alert","closeButton","Button","variant","DeleteSessionData","DeleteClassData","DeleteSectionData","_filter$map","modalShowEdit","setModalShowEdit","editModalData","setEditModalData","instituteAddress","infoModalShow","setInfoModalShow","infoModalData","setInfoModalData","detailModalShow","setDetailModalShow","detailModalData","setDetailModalData","infoRolesModalShow","setInfoRolesModalShow","infoRolesModalData","setInfoRolesModalData","navigate","useNavigate","toModalData","_row$instituteName","_row$instituteAddress","_row$instituteCode","_row$questionOptions","questionOptions","datatable","columns","field","attributes","sort","d","_data$instituteName","_data$instituteCode","_data$instituteAddres","code","address","actions","AiFillEdit","_data$id","deleteId","DeleteCollegeData","trash","Dropdown","popperConfig","strategy","renderOnMount","Link","to","state","collegeId","college","textDecoration","as","AiOutlineInfoCircle","onUploadClick","onClickCapture","IconContext","paddingBottom","MdOutlineDashboard","MdUploadFile","hidden","MDBDataTableV5","hover","scrollY","entriesOptions","entries","pagesAmount","CollegeEditModal","CollegeInfoModal","CollegeDetailModal","CollegeAssignRoleModal","onUploaded","file","setFile","setMessage","Form","accept","_e$target$files","files","fd","FormData","append","fetch","method","body","ok","Error","CollegePage","modalShowCreate","setModalShowCreate","collegeData","setCollegeData","pageLoading","showStudentUpload","setShowStudentUpload","selectedCollegeForUpload","setSelectedCollegeForUpload","ReadCollegeData","then","gap","MdSchool","CollegeTable","CollegeCreateModal","StudentUploadModal","onUploadComplete","Date","now","validationSchema","Yup","shape","required","maxStudents","maxContactPersons","initialValues","formik","useFormik","enableReinitialize","values","handleSubmit","autoComplete","getFieldProps","clsx","touched","errors","isSubmitting","isValid","_len","arguments","funcs","_key","f","reduce","acc","_len2","args","_key2","apply","this","isTrivialHref","href","SafeAnchor","React","ref","_ref$as","Component","onKeyDown","_objectWithoutPropertiesLoose","handleClick","event","tabIndex","_extends","createChainedFunction","displayName","bsPrefix","active","block","prefix","useBootstrapPrefix","classes","classNames","defaultProps"],"sourceRoot":""}