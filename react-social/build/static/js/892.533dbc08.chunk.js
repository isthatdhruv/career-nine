"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[892],{23892:(t,a,e)=>{e.r(a),e.d(a,{default:()=>T});var r=e(72791),s=e(43360),i=e(89983),n=e(7692),l=e(16871),c=e(74569),d=e.n(c);const o="https://api.career-9.com",h=("".concat(o,"/instituteBatch/get"),"".concat(o,"/instituteBranch/getbybranchid/")),b="".concat(o,"/instituteBranchBatchMapping/update"),u="".concat(o,"/instituteBatch/delete/");function m(t){return d().post(b,{values:t})}var p=e(1413),x=e(28182),f=e(92506),v=e(28403),j=e(2272),g=e(70099),N=e(7755),y=e(81724),S=e(80184);const B=y.Ry().shape({batchStart:y.Z_().required(),batchEnd:y.Z_().required(),batchDuration:y.Z_().required()}),D=t=>{const[a,e]=(0,r.useState)(!1),[s,i]=(0,r.useState)(!1);var n={batchStart:"",batchEnd:"",batchDuration:"",batchDurationType:"Year",batchId:null,instituteBranchIdDetails:[{branchId:t.branchId}],display:1};const l=(0,f.TA)({enableReinitialize:!0,initialValues:n,validationSchema:B,onSubmit:a=>{console.log(a),e(!0);try{m(a).then(()=>{t.onHide(!1),t.setPageLoading(["true"]),l.resetForm(),e(!1)}).catch(t=>{i(!0),e(!1),console.error(t),l.setSubmitting(!1)})}catch(r){i(!0),e(!1),console.error(r),window.location.replace("/error")}}});return(0,S.jsxs)(v.Z,(0,p.Z)((0,p.Z)({},t),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,S.jsxs)(v.Z.Header,{children:[(0,S.jsx)(v.Z.Title,{children:(0,S.jsx)("h1",{children:"Add Batch"})}),(0,S.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary",onClick:t.onHide,children:(0,S.jsx)(g.Z,{animation:N.Z,size:28,strokeColor:"#181C32",reverse:!0})})]}),(0,S.jsxs)("form",{className:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",onSubmit:l.handleSubmit,children:[(0,S.jsx)(v.Z.Body,{children:(0,S.jsx)("div",{className:"modal-body",children:(0,S.jsxs)("div",{className:"scroll-y me-n7 pe-7",id:"kt_modal_add_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_header","data-kt-scroll-wrappers":"#kt_modal_add_scroll","data-kt-scroll-offset":"300px",children:[(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Start :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch Start",type:"text",autoComplete:"off"},l.getFieldProps("batchStart")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchStart&&l.errors.batchStart},{"is-valid":l.touched.batchStart&&!l.errors.batchStart})})),l.touched.batchStart&&l.errors.batchStart&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch Start is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch End :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch End",type:"text",autoComplete:"off"},l.getFieldProps("batchEnd")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchEnd&&l.errors.batchEnd},{"is-valid":l.touched.batchEnd&&!l.errors.batchEnd})})),l.touched.batchEnd&&l.errors.batchEnd&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch End is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Duration :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch Duration",type:"number",autoComplete:"off"},l.getFieldProps("batchDuration")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchDuration&&l.errors.batchDuration},{"is-valid":l.touched.batchDuration&&!l.errors.batchDuration})})),l.touched.batchDuration&&l.errors.batchDuration&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch Duration is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Duration Type :"}),(0,S.jsx)(j.ZP,{options:[{value:"Year",label:"Year"},{value:"Month",label:"Month"}],defaultValue:[{value:"Year",label:"Year"}],onChange:t=>{l.setFieldValue("batchDurationType",t.value)}})]})]})})}),(0,S.jsxs)(v.Z.Footer,{children:[(0,S.jsx)("button",{className:"btn btn-sm btn-light btn-active-light-secoundary",onClick:t.onHide,children:"Close"}),!s&&(0,S.jsx)("button",{type:"submit",className:"btn btn-sm btn-primary btn-active-light-secoundary",disabled:l.isSubmitting||!l.isValid,children:!a&&!s&&(0,S.jsx)("span",{className:"indicator-label",children:"Submit"})}),!a&&s&&(0,S.jsx)("button",{type:"submit",className:"btn btn-sm btn-danger btn-active-light-secoundary",disabled:l.isSubmitting||!l.isValid,onClick:()=>{l.handleSubmit()},children:(0,S.jsx)("span",{className:"indicator-label",children:"Error Happened"})})]})]})]}))};var k=e(33489),E=e(78820),Z=e(43504),w=e(10120);const _=y.Ry().shape({batchStart:y.Z_().required(),batchEnd:y.Z_().required(),batchDuration:y.Z_().required()}),C=t=>{const[a,e]=(0,r.useState)(!1);var s={batchStart:t.data.instituteBatch.batchStart,batchEnd:t.data.instituteBatch.batchEnd,batchDuration:t.data.instituteBatch.batchDuration,batchDurationType:t.data.instituteBatch.batchDurationType,batchId:t.data.instituteBatch.batchId,display:1},[i]=(0,Z.lr)(),n=i.get("branchId");const l=(0,f.TA)({enableReinitialize:!0,initialValues:s,validationSchema:_,onSubmit:a=>{a.instituteBranchIdDetails=[{branchId:n}];try{m(a).then(()=>{t.onHide(!1),t.setPageLoading(["true"])})}catch(r){console.error(r),window.location.replace("/error")}e(!0)}}),c=[{value:t.data.instituteBatch.batchDurationType,label:t.data.instituteBatch.batchDurationType}];return(0,S.jsxs)(v.Z,(0,p.Z)((0,p.Z)({},t),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,S.jsxs)(v.Z.Header,{children:[(0,S.jsx)(v.Z.Title,{children:(0,S.jsx)("h1",{children:"Edit Batch"})}),(0,S.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary",onClick:t.onHide,children:(0,S.jsx)(g.Z,{animation:N.Z,size:28,strokeColor:"#181C32",reverse:!0})})]}),(0,S.jsxs)("form",{className:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",onSubmit:l.handleSubmit,children:[(0,S.jsx)(v.Z.Body,{children:(0,S.jsx)("div",{className:"modal-body",children:(0,S.jsxs)("div",{className:"scroll-y me-n7 pe-7",id:"kt_modal_add_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_header","data-kt-scroll-wrappers":"#kt_modal_add_scroll","data-kt-scroll-offset":"300px",children:[(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Start :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch Start",type:"text",autoComplete:"off"},l.getFieldProps("batchStart")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchStart&&l.errors.batchStart},{"is-valid":l.touched.batchStart&&!l.errors.batchStart})})),l.touched.batchStart&&l.errors.batchStart&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch Start is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch End :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch End",type:"text",autoComplete:"off"},l.getFieldProps("batchEnd")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchEnd&&l.errors.batchEnd},{"is-valid":l.touched.batchEnd&&!l.errors.batchEnd})})),l.touched.batchEnd&&l.errors.batchEnd&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch End is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Duration :"}),(0,S.jsx)("input",(0,p.Z)((0,p.Z)({placeholder:"Enter Batch Duration",type:"number",autoComplete:"off"},l.getFieldProps("batchDuration")),{},{className:(0,x.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":l.touched.batchDuration&&l.errors.batchDuration},{"is-valid":l.touched.batchDuration&&!l.errors.batchDuration})})),l.touched.batchDuration&&l.errors.batchDuration&&(0,S.jsx)("div",{className:"fv-plugins-message-container",children:(0,S.jsx)("div",{className:"fv-help-block text-danger",children:(0,S.jsx)("span",{role:"alert",children:"Batch Duration is Required"})})})]}),(0,S.jsxs)("div",{className:"fv-row mb-7",children:[(0,S.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Batch Duration Type :"}),(0,S.jsx)(j.ZP,{options:[{value:"Year",label:"Year"},{value:"Month",label:"Month"}],defaultValue:c,onChange:t=>{l.setFieldValue("batchDurationType",t.value)}})]})]})})}),(0,S.jsxs)(v.Z.Footer,{children:[(0,S.jsx)("button",{className:"btn btn-sm btn-light btn-active-light-secoundary",onClick:t.onHide,children:"Close"}),(0,S.jsxs)("button",{type:"submit",id:"kt_sign_up_submit",className:"btn btn-sm btn-primary btn-active-light-secoundary",disabled:l.isSubmitting||!l.isValid,children:[!a&&(0,S.jsx)("span",{className:"indicator-label",children:"Submit"}),a&&(0,S.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,S.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})]}))},q=t=>{const[a,e]=(0,r.useState)(!1),[s,i]=(0,r.useState)({instituteBatch:{batchStart:"",batchEnd:"",batchDuration:"",batchDurationType:"",batchId:"",branchId:""},instituteBranch:""}),n={columns:[{label:"Start",field:"batchStart",width:100,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"End",field:"batchEnd",sort:"asc",width:100},{label:"Duration",field:"batchDuration",sort:"asc",width:100},{label:"Duration Type",field:"batchDurationType",sort:"asc",width:100},{label:"Actions",field:"actions",sort:"disabled",width:150}],rows:t.data.map(a=>!0===a.instituteBatch.display?{batchStart:a.instituteBatch.batchStart,batchEnd:a.instituteBatch.batchEnd,batchDuration:a.instituteBatch.batchDuration,batchDurationType:a.instituteBatch.batchDurationType,actions:(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("button",{onClick:()=>{i(a),e(!0)},className:"btn btn-icon btn-primary btn-sm me-3",children:(0,S.jsx)(E.QML,{size:16})}),(0,S.jsx)("button",{onClick:()=>{var e;t.setLoading(!0),(e=a.instituteBatch.batchId,d().get(u+e)).then(()=>{t.setPageLoading(["true"])})},className:"btn btn-icon btn-danger btn-sm me-3",children:(0,S.jsx)(g.Z,{animation:w.Z,size:22,strokeColor:"#EFF8FE"})}),(0,S.jsx)(Z.rU,{to:"/session",state:{batchId:a.instituteBatch.batchId,batchStart:a.instituteBatch.batchStart,batchEnd:a.instituteBatch.batchEnd},className:"btn btn-sm btn-info",children:"Add Session"})]})}:{})};return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(k.Vm4,{hover:!0,scrollY:!0,maxHeight:"160vh",entriesOptions:[5,20,25],entries:25,pagesAmount:4,data:n}),(0,S.jsx)(C,{show:a,onHide:()=>e(!1),data:s,setPageLoading:t.setPageLoading})]})},T=()=>{const[t,a]=(0,r.useState)(!1),[e,c]=(0,r.useState)([]),[o,b]=(0,r.useState)(!1),[u,m]=(0,r.useState)(["false"]),p=(0,l.TH)().state;return(0,r.useEffect)(()=>{b(!0);try{(t=p.branchId,d().get(h+t)).then(t=>{c(t.data.instituteBranchBatchMapping),b(!1)})}catch(a){console.error(a),window.location.replace("/error")}var t},[u]),(0,S.jsxs)("div",{className:"card",children:[o&&(0,S.jsxs)("span",{className:"indicator-progress m-5",style:{display:"block"},children:["Please wait..."," ",(0,S.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!o&&(0,S.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,S.jsx)("div",{className:"card-title",children:(0,S.jsxs)("h1",{children:[p.branch," - Batches"]})}),(0,S.jsx)("div",{className:"card-toolbar",children:(0,S.jsx)("div",{className:"d-flex justify-content-end",children:(0,S.jsx)(s.Z,{variant:"primary",onClick:()=>{a(!0)},children:(0,S.jsx)(i.Pd.Provider,{value:{style:{paddingBottom:"4px"}},children:(0,S.jsxs)("div",{children:["Add Batch ",(0,S.jsx)(n.$mu,{size:23})]})})})})})]}),!o&&(0,S.jsx)("div",{className:"card-body pt-5",children:(0,S.jsx)(q,{data:e,setLoading:b,setPageLoading:m})}),(0,S.jsx)(D,{branchId:p.branchId,setPageLoading:m,show:t,onHide:()=>a(!1)})]})}}}]);
//# sourceMappingURL=892.533dbc08.chunk.js.map