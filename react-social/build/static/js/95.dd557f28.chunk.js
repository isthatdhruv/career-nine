"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[95,94],{15110:(e,s,t)=>{t.d(s,{Kk:()=>d,Pm:()=>i,XM:()=>o,bR:()=>c,eF:()=>m,zV:()=>u,zW:()=>r});var n=t(74569),a=t.n(n);const l="https://api.career-9.com";function i(e){return a().post("".concat(l,"/assessment-mapping/create"),e)}function d(e){return a().get("".concat(l,"/assessment-mapping/getByInstitute/").concat(e))}function o(e,s){return a().put("".concat(l,"/assessment-mapping/update/").concat(e),s)}function r(e){return a().delete("".concat(l,"/assessment-mapping/delete/").concat(e))}function c(){return a().get("".concat(l,"/assessments/get/list-summary"))}function m(e){return a().get("".concat(l,"/assessment-mapping/public/info/").concat(e))}function u(e,s){return a().post("".concat(l,"/assessment-mapping/public/register/").concat(e),s)}},38095:(e,s,t)=>{t.r(s),t.d(s,{default:()=>M});var n=t(72791),a=t(16871),l=t(43360),i=t(89983),d=t(16856),o=t(54624),r=t(575),c=t(17137),m=t(78820),u=t(43504),h=t(70099),x=t(10120),p=t(70107),b=t(62094),g=t(1413),v=t(28403),j=t(7755),N=t(43677),f=t(51304),y=t(80184);const w=e=>{var s;const[t,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),[d,r]=(0,n.useState)([]),[c,m]=(0,n.useState)(!1),[u,x]=(0,n.useState)([]),[p,b]=(0,n.useState)([]),[w,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(null);(0,n.useEffect)(()=>{var s,t,n;if(!e.show)return;const a=null===(s=e.data)||void 0===s?void 0:s.instituteCode;if((async()=>{try{var e,s,t,n,l,d,c,m,u,h,p,g,v,j;const[y,w,C]=await Promise.all([(0,f.Fk)(),(0,N.AF)(),a?(0,o.XP)(a).catch(()=>null):Promise.resolve(null)]),S=(null!==(e=null!==(s=null!==(t=null===y||void 0===y||null===(n=y.data)||void 0===n?void 0:n.data)&&void 0!==t?t:null===y||void 0===y||null===(l=y.data)||void 0===l?void 0:l.contacts)&&void 0!==s?s:null===y||void 0===y?void 0:y.data)&&void 0!==e?e:[]).filter(e=>e&&(e.name||e.email||e.phone||e.designation));i(S);const k=(null!==(d=null!==(c=null!==(m=null===w||void 0===w||null===(u=w.data)||void 0===u?void 0:u.data)&&void 0!==m?m:null===w||void 0===w||null===(h=w.data)||void 0===h?void 0:h.boards)&&void 0!==c?c:null===w||void 0===w?void 0:w.data)&&void 0!==d?d:[]).filter(e=>e&&("string"===typeof e.boardName||"string"===typeof e.name||"undefined"!==typeof e.id));x(k);const I=null!==(p=null===C||void 0===C||null===(g=C.data)||void 0===g?void 0:g.contactPersons)&&void 0!==p?p:[],Z=null!==(v=null===C||void 0===C||null===(j=C.data)||void 0===j?void 0:j.boards)&&void 0!==v?v:[],P=[];S.forEach((e,s)=>{I.find(s=>s.id&&e.id&&String(s.id)===String(e.id)||s.email&&e.email&&s.email===e.email)&&P.push(s)}),r(P);const A=[];k.forEach((e,s)=>{Z.find(s=>void 0!==s.id&&void 0!==e.id&&String(s.id)===String(e.id))&&A.push(s)}),b(A)}catch(y){console.error("Failed to load data:",y),i([]),x([]),r([]),b([])}})(),void 0!==(null===(t=e.data)||void 0===t?void 0:t.maxClass)&&null!==(null===(n=e.data)||void 0===n?void 0:n.maxClass)){const s=Number(e.data.maxClass);!isNaN(s)&&s>=1&&s<=12?k(s):k(null)}else k(null)},[e.show,e.data]);const I=e=>d.includes(e),Z=e=>p.includes(e),P=e=>{var s,t;return null!==(s=null!==(t=e.boardName)&&void 0!==t?t:e.name)&&void 0!==s?s:void 0!==e.id?String(e.id):"Board"},A=d.map(e=>l[e]),E=p.map(e=>u[e]),F=d.length>0;return(0,y.jsxs)(v.Z,{show:e.show,onHide:()=>e.onHide(),centered:!0,className:"college-modal","aria-labelledby":"college-info-modal-title",children:[(0,y.jsxs)(v.Z.Header,{className:"border-0 pb-0",children:[(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsx)("h3",{id:"college-info-modal-title",className:"mb-1 fw-bold",children:"Map Board & Contact Person(s)"}),(0,y.jsx)("span",{className:"text-muted small",children:"Link the institute with appropriate contact person(s), board(s) and max class."})]}),(0,y.jsx)("div",{className:"btn btn-sm btn-icon btn-light ms-3",onClick:()=>e.onHide(),style:{cursor:"pointer"},children:(0,y.jsx)(h.Z,{animation:j.Z,size:24,strokeColor:"#181C32",reverse:!0})})]}),(0,y.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!e.data||!e.data.instituteCode)return void e.onHide();const t=d.map(e=>{var s;return null===(s=l[e])||void 0===s?void 0:s.id}).filter(e=>void 0!==e).map(e=>Number(e)),n=p.map(e=>{var s;return null===(s=u[e])||void 0===s?void 0:s.id}).filter(e=>void 0!==e).map(e=>Number(e));a(!0);try{await(0,o.Jp)(e.data.instituteCode,t,n),null!==S&&await(0,o.J6)((0,g.Z)((0,g.Z)({},e.data),{},{maxClass:S})),e.setPageLoading(["true"]),e.onHide(!1)}catch(i){console.error("Mapping failed",i),window.location.replace("/error")}finally{a(!1)}},className:"form w-100",children:[(0,y.jsx)(v.Z.Body,{className:"pt-3",children:(0,y.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,y.jsx)("div",{className:"card shadow-sm border-0",children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"badge bg-light text-dark mb-1",children:"Step 1"}),(0,y.jsx)("h5",{className:"mb-0",children:"Select Contact Person(s)"}),(0,y.jsx)("small",{className:"text-muted",children:"Choose one or more contact persons associated with this institute."})]}),l.length>0&&(0,y.jsxs)("span",{className:"badge bg-success-subtle text-success",children:[d.length," selected"]})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsxs)("button",{type:"button",className:"btn btn-outline-success dropdown-toggle d-flex align-items-center px-3 py-2",onClick:()=>m(e=>!e),children:[(0,y.jsx)("span",{className:"me-2",children:"\ud83d\udc64"}),(0,y.jsx)("span",{children:d.length>0?"Edit selected contact person(s)":"Select contact person(s)"})]}),(0,y.jsx)("div",{className:"dropdown-menu mt-2 shadow-sm border-0 ".concat(c?"show":""),style:{maxHeight:"260px",overflowY:"auto",minWidth:"320px"},children:0===l.length?(0,y.jsx)("span",{className:"dropdown-item-text text-muted fst-italic",children:"No contact persons found."}):l.map((e,s)=>{var t;const n=(e.name||"").split(" ").map(e=>e[0]).join("").toUpperCase()||"?";return(0,y.jsxs)("label",{className:"dropdown-item d-flex align-items-start py-2",style:{cursor:"pointer"},children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input me-3 mt-1",checked:I(s),onChange:()=>(e=>{r(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(s)}),(0,y.jsxs)("div",{className:"d-flex align-items-start w-100",children:[(0,y.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:32,height:32,background:"#eef3ff",fontSize:13,fontWeight:600},children:n}),(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"fw-semibold",children:e.name||"Unnamed Contact"}),(0,y.jsxs)("div",{className:"text-muted small",children:[e.email&&(0,y.jsx)("span",{children:e.email}),e.phone&&(0,y.jsxs)("span",{children:[" ",e.email?" \u2022 ":"",e.phone]})]}),(e.gender||e.designation)&&(0,y.jsx)("div",{className:"small text-muted",children:[e.gender,e.designation].filter(Boolean).join(" \u2022 ")})]})]})]},null!==(t=e.id)&&void 0!==t?t:"".concat(e.email,"-").concat(s))})})]}),A.length>0&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-muted small mb-1",children:"Selected contact(s):"}),(0,y.jsx)("div",{className:"d-flex flex-wrap gap-2",children:A.map((e,s)=>{var t;return(0,y.jsxs)("span",{className:"badge bg-light text-dark border",children:[e.name||"Unnamed Contact",e.designation&&(0,y.jsxs)("span",{className:"text-muted ms-1 small",children:["(",e.designation,")"]})]},null!==(t=e.id)&&void 0!==t?t:"".concat(e.email,"-chip-").concat(s))})})]})]})}),(0,y.jsx)("div",{className:"card shadow-sm border-0 ".concat(F?"":"opacity-75"),children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"badge bg-light text-dark mb-1",children:"Step 2"}),(0,y.jsx)("h5",{className:"mb-0",children:"Select Board(s)"}),(0,y.jsxs)("small",{className:"text-muted",children:["Map this institute to one or more education boards.",!F&&(0,y.jsx)("span",{className:"text-danger ms-1",children:"(Select at least one contact person in Step 1 first)"})]})]}),u.length>0&&F&&(0,y.jsxs)("span",{className:"badge bg-primary-subtle text-primary",children:[p.length," selected"]})]}),(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsxs)("button",{type:"button",className:"btn btn-outline-primary dropdown-toggle d-flex align-items-center px-3 py-2",onClick:()=>{F&&C(e=>!e)},disabled:!F,children:[(0,y.jsx)("span",{className:"me-2",children:"\ud83d\udccb"}),(0,y.jsx)("span",{children:p.length>0?"Edit selected board(s)":"Select board(s)"})]}),(0,y.jsx)("div",{className:"dropdown-menu mt-2 shadow-sm border-0 ".concat(w&&F?"show":""),style:{maxHeight:"260px",overflowY:"auto",minWidth:"260px"},children:F?0===u.length?(0,y.jsx)("span",{className:"dropdown-item-text text-muted fst-italic",children:"No boards found."}):u.map((e,s)=>{const t=P(e);return(0,y.jsxs)("label",{className:"dropdown-item d-flex align-items-center py-2",style:{cursor:"pointer"},children:[(0,y.jsx)("input",{type:"checkbox",className:"form-check-input me-3",checked:Z(s),onChange:()=>(e=>{b(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])})(s)}),(0,y.jsx)("span",{className:"fw-semibold",children:t})]},"".concat(t,"-").concat(s))}):(0,y.jsx)("span",{className:"dropdown-item-text text-muted fst-italic",children:"Please select contact person(s) in Step 1 first."})})]}),F&&E.length>0&&(0,y.jsxs)("div",{children:[(0,y.jsx)("div",{className:"text-muted small mb-1",children:"Selected board(s):"}),(0,y.jsx)("div",{className:"d-flex flex-wrap gap-2",children:E.map((e,s)=>(0,y.jsx)("span",{className:"badge bg-light text-dark border",children:P(e)},"".concat(P(e),"-chip-").concat(s)))})]})]})})]})}),(0,y.jsx)(v.Z.Footer,{className:"border-0 pt-0",children:(0,y.jsxs)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:[(0,y.jsx)("div",{className:"text-muted small",children:(null===(s=e.data)||void 0===s?void 0:s.instituteCode)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"fw-semibold",children:"Institute Code: "}),(0,y.jsx)("span",{children:e.data.instituteCode})]})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-light me-2",onClick:()=>e.onHide(),disabled:t,children:"Cancel"}),(0,y.jsxs)("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:t||0===l.length&&0===u.length,children:[!t&&(0,y.jsx)("span",{className:"indicator-label",children:"Save Selection"}),t&&(0,y.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait...",(0,y.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})]})]})};var C=t(94552);const S=["Principal","Administrator","Coordinator","Teacher","Accountant","Counselor"],k=e=>{var s;const[t,a]=(0,n.useState)(!1),[l,i]=(0,n.useState)([]),[d,r]=(0,n.useState)([]),[c,m]=(0,n.useState)({}),[u,x]=(0,n.useState)({}),[p,b]=(0,n.useState)([]),[w,k]=(0,n.useState)([]),[I,Z]=(0,n.useState)(!1),[P,A]=(0,n.useState)(S),[E,F]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!e.show)return;(async()=>{try{var s,t,n,a,l,d,o;const c=await(0,f.Fk)(),m=(null!==(s=null!==(t=null!==(n=null===c||void 0===c||null===(a=c.data)||void 0===a?void 0:a.data)&&void 0!==n?n:null===c||void 0===c||null===(l=c.data)||void 0===l?void 0:l.contacts)&&void 0!==t?t:null===c||void 0===c?void 0:c.data)&&void 0!==s?s:[]).filter(e=>e&&(e.name||e.email||e.phone||e.designation));i(m);const u=null!==(d=null===(o=e.data)||void 0===o?void 0:o.contactPersons)&&void 0!==d?d:[],h=[];m.forEach((e,s)=>{u.find(s=>s.id&&e.id&&s.id===e.id||s.email&&e.email&&s.email===e.email)&&h.push(s)}),r(h)}catch(c){console.error("Failed to load contacts:",c),i([]),r([])}})(),(async()=>{try{var e,s,t,n,a;const l=await(0,N.AF)(),i=(null!==(e=null!==(s=null!==(t=null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.data)&&void 0!==t?t:null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.boards)&&void 0!==s?s:null===l||void 0===l?void 0:l.data)&&void 0!==e?e:[]).filter(e=>e&&("string"===typeof e.boardName||"string"===typeof e.name||"undefined"!==typeof e.id));b(i),k([])}catch(l){console.error("Failed to load boards:",l),b([])}})(),(async()=>{F(!0);try{var e,s,t,n,a;const l=await(0,C.tu)(),i=((null!==(e=null!==(s=null!==(t=null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.data)&&void 0!==t?t:null===l||void 0===l||null===(a=l.data)||void 0===a?void 0:a.roles)&&void 0!==s?s:null===l||void 0===l?void 0:l.data)&&void 0!==e?e:[])||[]).map(e=>{return e||0===e?"string"===typeof e?e:"object"===typeof e&&null!==(s=null!==(t=null!==(n=null!==(a=null!==(l=e.role)&&void 0!==l?l:e.name)&&void 0!==a?a:e.roleName)&&void 0!==n?n:e.title)&&void 0!==t?t:e.label)&&void 0!==s?s:null:null;var s,t,n,a,l}).filter(Boolean);i.length>0?A(i):A(S)}catch(l){console.error("Failed to load roles:",l),A(S)}finally{F(!1)}})()},[e.show,e.data]),(0,n.useEffect)(()=>{const s={};d.forEach(t=>{var n,a;const i=l[t];let d;if(null!==(n=e.data)&&void 0!==n&&null!==(a=n.contactPersons)&&void 0!==a&&a.length){const s=e.data.contactPersons.find(e=>e.id&&(null===i||void 0===i?void 0:i.id)&&e.id===i.id||e.email&&(null===i||void 0===i?void 0:i.email)&&e.email===i.email);d=null===s||void 0===s?void 0:s.roles}s[t]=d&&Array.isArray(d)?d:[]}),x(e=>(0,g.Z)((0,g.Z)({},s),e)),m({})},[l,d,e.data]);const z=e=>{r(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]),x(s=>{const t=(0,g.Z)({},s);return t[e]&&delete t[e],t}),m(s=>{const t=(0,g.Z)({},s);return t[e]&&delete t[e],t})},H=e=>d.includes(e),L=e=>{m(s=>(0,g.Z)((0,g.Z)({},s),{},{[e]:!s[e]}))};d.map(e=>l[e]),w.map(e=>p[e]),d.length;return(0,y.jsxs)(v.Z,{show:e.show,onHide:()=>e.onHide(),centered:!0,className:"college-modal",dialogClassName:"college-modal-dialog","aria-labelledby":"college-info-modal-title",children:[(0,y.jsx)("style",{children:"\n        /* Make the modal wider and responsive */\n        .college-modal .modal-dialog {\n          max-width: 1200px;      /* increase as needed */\n          width: 95vw;\n        }\n        /* Ensure modal body doesn't force horizontal scroll */\n        .college-modal .modal-body {\n          overflow-x: hidden;\n        }\n\n        /* Let tables auto-layout and wrap cells instead of creating horizontal scroll */\n        .college-modal .table-responsive {\n          overflow-x: visible !important;\n        }\n        .college-modal table {\n          table-layout: auto;\n          width: 100%;\n        }\n        .college-modal th, .college-modal td {\n          white-space: normal;\n          word-wrap: break-word;\n          vertical-align: middle;\n        }\n\n        /* Make role badges wrap to next line when space is insufficient */\n        .college-modal .badge {\n          white-space: nowrap;\n          margin-bottom: 4px;\n        }\n\n        /* Ensure the per-contact dropdown doesn't push layout horizontally */\n        .college-modal .card.position-absolute {\n          left: 0;\n          right: auto;\n          max-width: 420px;\n        }\n\n        /* Small screens fallback */\n        @media (max-width: 768px) {\n          .college-modal .modal-dialog {\n            max-width: 100%;\n            width: 98vw;\n          }\n        }\n      "}),(0,y.jsxs)(v.Z.Header,{className:"border-0 pb-0",children:[(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsx)("h3",{id:"college-info-modal-title",className:"mb-1 fw-bold",children:"Assign Roles"}),(0,y.jsx)("span",{className:"text-muted small",children:"Assign roles to the selected contact person"})]}),(0,y.jsx)("div",{className:"btn btn-sm btn-icon btn-light ms-3",onClick:()=>e.onHide(),style:{cursor:"pointer"},children:(0,y.jsx)(h.Z,{animation:j.Z,size:24,strokeColor:"#181C32",reverse:!0})})]}),(0,y.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),!e.data)return void e.onHide();const t=d.map(e=>{var s;const t=l[e],n=null!==(s=u[e])&&void 0!==s?s:[];return(0,g.Z)((0,g.Z)({},t),{},{roles:n})}),n=w.map(e=>p[e]);a(!0);try{const s=(0,g.Z)((0,g.Z)({},e.data),{},{contactPersons:t});n.length>0&&(s.boards=n),await(0,o.J6)(s),e.setPageLoading(["true"]),e.onHide(!1)}catch(i){console.error("UpdateCollegeData failed",i),window.location.replace("/error")}finally{a(!1)}},className:"form w-100",children:[(0,y.jsx)(v.Z.Body,{className:"pt-3",children:(0,y.jsx)("div",{className:"d-flex flex-column gap-4",children:(0,y.jsx)("div",{className:"card shadow-sm border-0",children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,y.jsxs)("div",{children:[(0,y.jsx)("h5",{className:"mb-0",children:"Selected Contact Person"}),(0,y.jsx)("small",{className:"text-muted",children:"Choose one or more roles associated with the contact person."})]})}),(0,y.jsx)("div",{className:"mt-3",children:0===l.length?(0,y.jsx)("div",{className:"text-muted small",children:"No contacts available"}):(0,y.jsx)("div",{className:"list-group",children:l.map((e,s)=>{var t,n,a,l;return(0,y.jsxs)("label",{className:"list-group-item d-flex justify-content-between align-items-center ".concat(H(s)?"active":""),style:{cursor:"pointer"},children:[(0,y.jsxs)("div",{className:"form-check",children:[(0,y.jsx)("input",{className:"form-check-input me-2",type:"checkbox",checked:H(s),onChange:()=>z(s)}),(0,y.jsx)("span",{className:"fw-semibold",children:null!==(t=null!==(n=null!==(a=e.name)&&void 0!==a?a:e.email)&&void 0!==n?n:e.phone)&&void 0!==t?t:"Unnamed"}),(0,y.jsxs)("div",{className:"small text-muted",children:[e.designation?"".concat(e.designation," \u2022 "):"",null!==(l=e.email)&&void 0!==l?l:e.phone]})]}),(0,y.jsx)("div",{children:(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:e=>{e.stopPropagation(),H(s)||z(s),L(s)},children:"Roles"})})]},s)})})}),(0,y.jsxs)("div",{className:"mt-4",children:[(0,y.jsx)("h6",{className:"mb-2",children:"Selected Contacts & Roles"}),0===d.length?(0,y.jsx)("div",{className:"text-muted small",children:"No contact selected yet."}):(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsxs)("table",{className:"table table-hover align-middle",children:[(0,y.jsx)("thead",{children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{width:"35%"},children:"Contact"}),(0,y.jsx)("th",{style:{width:"50%"},children:"Assigned Roles"}),(0,y.jsx)("th",{style:{width:"15%"},children:"Actions"})]})}),(0,y.jsx)("tbody",{children:d.map(e=>{var s,t,n,a,i;const d=l[e],o=null!==(s=u[e])&&void 0!==s?s:[],r=!!c[e];return(0,y.jsxs)("tr",{children:[(0,y.jsxs)("td",{children:[(0,y.jsx)("div",{className:"fw-semibold",children:null!==(t=null!==(n=null!==(a=d.name)&&void 0!==a?a:d.email)&&void 0!==n?n:d.phone)&&void 0!==t?t:"Unnamed"}),(0,y.jsxs)("div",{className:"small text-muted",children:[null!==(i=d.designation)&&void 0!==i?i:"",d.email?" \u2022 ".concat(d.email):""]})]}),(0,y.jsxs)("td",{children:[(0,y.jsx)("div",{className:"d-flex flex-wrap gap-2",children:0===o.length?(0,y.jsx)("span",{className:"small text-muted",children:"No roles assigned"}):o.map(s=>(0,y.jsxs)("span",{className:"badge bg-light text-dark border d-inline-flex align-items-center",style:{padding:"0.45rem 0.6rem"},children:[(0,y.jsx)("span",{className:"me-2 small",children:s}),(0,y.jsx)("button",{type:"button","aria-label":"Remove ".concat(s),className:"btn btn-sm btn-icon btn-light btn-xs",onClick:()=>{return t=e,n=s,void x(e=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];return(0,g.Z)((0,g.Z)({},e),{},{[t]:a.filter(e=>e!==n)})});var t,n},style:{border:"none",padding:"0",margin:"0",lineHeight:1,cursor:"pointer"},children:(0,y.jsx)("span",{style:{fontSize:14,marginLeft:4},children:"\xd7"})})]},s))}),(0,y.jsx)("div",{className:"position-relative mt-2",children:r&&(0,y.jsxs)("div",{className:"card shadow-sm position-absolute",style:{zIndex:1200,left:0,top:0,minWidth:260,padding:12},onClick:e=>e.stopPropagation(),children:[(0,y.jsx)("div",{className:"fw-semibold mb-2",children:"Select Roles"}),E?(0,y.jsx)("div",{className:"small text-muted",children:"Loading roles..."}):(0,y.jsx)("div",{className:"roles-list",style:{maxHeight:220,overflow:"auto"},children:P.map(s=>{var t;const n=(null!==(t=u[e])&&void 0!==t?t:[]).includes(s);return(0,y.jsxs)("div",{className:"form-check mb-1",children:[(0,y.jsx)("input",{className:"form-check-input",type:"checkbox",id:"contact-".concat(e,"-role-").concat(s),checked:n,onChange:t=>((e,s,t)=>{x(n=>{var a;const l=null!==(a=n[e])&&void 0!==a?a:[];return t?l.includes(s)?n:(0,g.Z)((0,g.Z)({},n),{},{[e]:[...l,s]}):(0,g.Z)((0,g.Z)({},n),{},{[e]:l.filter(e=>e!==s)})})})(e,s,t.target.checked)}),(0,y.jsx)("label",{className:"form-check-label ms-2",htmlFor:"contact-".concat(e,"-role-").concat(s),style:{cursor:"pointer"},children:s})]},s)})}),(0,y.jsxs)("div",{className:"d-flex justify-content-end mt-2",children:[(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-secondary me-2",onClick:()=>m(s=>(0,g.Z)((0,g.Z)({},s),{},{[e]:!1})),children:"Done"}),(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>x(s=>(0,g.Z)((0,g.Z)({},s),{},{[e]:[]})),children:"Clear"})]})]})})]}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex gap-2",children:[(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>L(e),children:r?"Close":"Edit"}),(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>z(e),children:"Remove"})]})})]},e)})})]})})]})]})})})}),(0,y.jsx)(v.Z.Footer,{className:"border-0 pt-0",children:(0,y.jsxs)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:[(0,y.jsx)("div",{className:"text-muted small",children:(null===(s=e.data)||void 0===s?void 0:s.instituteCode)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"fw-semibold",children:"Institute Code: "}),(0,y.jsx)("span",{children:e.data.instituteCode})]})}),(0,y.jsxs)("div",{children:[(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-light me-2",onClick:()=>e.onHide(),disabled:t,children:"Cancel"}),(0,y.jsxs)("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:t||0===l.length&&0===p.length,children:[!t&&(0,y.jsx)("span",{className:"indicator-label",children:"Save Selection"}),t&&(0,y.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait...",(0,y.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})]})]})};var I=t(21799);const Z=e=>{var s,t,a,l;const[i,d]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null),[x,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(!1),[N,f]=(0,n.useState)(!1),[w,C]=(0,n.useState)([]),[S,k]=(0,n.useState)([]),[Z,P]=(0,n.useState)(""),[A,E]=(0,n.useState)(""),[F,z]=(0,n.useState)(""),[H,L]=(0,n.useState)(null),[D,M]=(0,n.useState)(null),[U,B]=(0,n.useState)(null),[R,T]=(0,n.useState)(""),[q,_]=(0,n.useState)(null),W=async e=>{if(e){console.log("Fetching data for institute code:",e),c(!0),u(null);try{const s=await(0,o.$E)(e);console.log("API Response:",s.data);const t=s.data.map(e=>({id:e.id,sessionName:e.sessionYear,grades:(e.schoolClasses||[]).map(e=>({id:e.id,gradeName:e.className,sections:(e.schoolSections||[]).map(e=>({id:e.id,sectionName:e.sectionName,isNew:!1})),isNew:!1})),isNew:!1}));console.log("Transformed Data:",t),C(t)}catch(t){var s;console.error("Error fetching existing data:",t),console.error("Error details:",(null===(s=t.response)||void 0===s?void 0:s.data)||t.message),u("Failed to load existing data")}finally{c(!1)}}else console.log("No institute code provided, skipping fetch")};(0,n.useEffect)(()=>{if(e.show){var s;console.log("Modal opened with data:",e.data),k([]),P(""),E(""),z(""),L(null),M(null),p(!1),g(!1),f(!1),B(null),_(null),u(null),C([]);const t=null===(s=e.data)||void 0===s?void 0:s.instituteCode;t&&""!==t?W(t):console.log("No valid institute code in props.data:",e.data)}},[e.show,null===(s=e.data)||void 0===s?void 0:s.instituteCode]);const K=()=>{if(Z.trim()){S.some(e=>e.sessionName===Z.trim())||(k([...S,{id:null,sessionName:Z.trim(),grades:[],isNew:!0}]),P(""))}},Y=()=>{if(null!==H&&A.trim()){const e=[...S],s=e[H];s.grades.some(e=>e.gradeName===A.trim())||(s.grades.push({id:null,gradeName:A.trim(),sections:[],isNew:!0}),k(e),E(""))}},O=()=>{if(null!==H&&null!==D&&F.trim()){const e=[...S],s=e[H].grades[D];s.sections.some(e=>e.sectionName===F.trim())||(s.sections.push({id:null,sectionName:F.trim(),isNew:!0}),k(e),z(""))}},V=(e,s,t,n,a,l)=>{B({type:e,id:s,sessionIndex:t,gradeIndex:a,sectionIndex:l,originalValue:n}),T(n)},G=()=>{B(null),T("")},J=async()=>{if(!U||!R.trim())return;const e=[...w],s=e[U.sessionIndex];"session"===U.type?s.sessionName=R.trim():"grade"===U.type&&void 0!==U.gradeIndex?s.grades[U.gradeIndex].gradeName=R.trim():"section"===U.type&&void 0!==U.gradeIndex&&void 0!==U.sectionIndex&&(s.grades[U.gradeIndex].sections[U.sectionIndex].sectionName=R.trim()),C(e),B(null),T("");try{"session"===U.type?await(0,o.oL)(U.id,{sessionYear:R.trim()}):"grade"===U.type?await(0,o.Zo)(U.id,{className:R.trim()}):"section"===U.type&&await(0,o.Xg)(U.id,{sectionName:R.trim()})}catch(t){console.error("Error updating:",t);const e=[...w],s=e[U.sessionIndex];"session"===U.type?s.sessionName=U.originalValue:"grade"===U.type&&void 0!==U.gradeIndex?s.grades[U.gradeIndex].gradeName=U.originalValue:"section"===U.type&&void 0!==U.gradeIndex&&void 0!==U.sectionIndex&&(s.grades[U.gradeIndex].sections[U.sectionIndex].sectionName=U.originalValue),C(e),u("Failed to update. Please try again.")}},X=(e,s,t,n,a,l)=>{_({type:e,id:s,name:t,sessionIndex:n,gradeIndex:a,sectionIndex:l})},Q=()=>{var e;return null!==H?null===(e=S[H])||void 0===e?void 0:e.sessionName:null},$=()=>{var e,s;return null!==H&&null!==D?null===(e=S[H])||void 0===e||null===(s=e.grades[D])||void 0===s?void 0:s.gradeName:null},ee=()=>{var e,s;return null!==H&&null!==D&&(null===(e=S[H])||void 0===e||null===(s=e.grades[D])||void 0===s?void 0:s.sections)||[]},se=(0,n.useMemo)(()=>{const e=[];return w.forEach((s,t)=>{0===s.grades.length?e.push({sessionId:s.id,sessionName:s.sessionName,sessionIndex:t,gradeId:null,gradeName:"-",gradeIndex:null,sectionId:null,sectionName:"-",sectionIndex:null}):s.grades.forEach((n,a)=>{0===n.sections.length?e.push({sessionId:s.id,sessionName:s.sessionName,sessionIndex:t,gradeId:n.id,gradeName:n.gradeName,gradeIndex:a,sectionId:null,sectionName:"-",sectionIndex:null}):n.sections.forEach((l,i)=>{e.push({sessionId:s.id,sessionName:s.sessionName,sessionIndex:t,gradeId:n.id,gradeName:n.gradeName,gradeIndex:a,sectionId:l.id,sectionName:l.sectionName,sectionIndex:i})})})}),e},[w]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(v.Z,{show:e.show,onHide:()=>e.onHide(),centered:!0,size:"xl",className:"college-modal","aria-labelledby":"college-detail-modal-title",style:{maxHeight:"90vh"},children:[(0,y.jsx)("style",{children:"\n          .college-modal .modal-dialog {\n            max-width: 1200px;\n            height: 85vh;\n          }\n\n          .college-modal .modal-content {\n            height: 100%;\n            display: flex;\n            flex-direction: column;\n          }\n\n          .college-modal .modal-body {\n            flex: 1;\n            overflow-y: auto;\n            max-height: calc(85vh - 180px);\n          }\n\n          .college-modal .dropdown-menu {\n            max-height: 300px;\n          }\n\n          .editable-cell:hover {\n            background-color: #f8f9fa;\n            cursor: pointer;\n          }\n        "}),(0,y.jsxs)(v.Z.Header,{className:"border-0 pb-0",children:[(0,y.jsxs)("div",{className:"d-flex flex-column",children:[(0,y.jsx)("h3",{id:"college-detail-modal-title",className:"mb-1 fw-bold",children:"Institute Details"}),(0,y.jsxs)("span",{className:"text-muted small",children:[(null===(t=e.data)||void 0===t?void 0:t.instituteName)&&(0,y.jsx)("span",{className:"fw-semibold me-2",children:e.data.instituteName}),"Manage sessions, grades, and sections"]})]}),(0,y.jsx)("div",{className:"btn btn-sm btn-icon btn-light ms-3",onClick:()=>e.onHide(),style:{cursor:"pointer"},children:(0,y.jsx)(h.Z,{animation:j.Z,size:24,strokeColor:"#181C32",reverse:!0})})]}),(0,y.jsxs)("div",{className:"form w-100",children:[(0,y.jsxs)(v.Z.Body,{className:"pt-3",children:[m&&(0,y.jsxs)("div",{className:"alert alert-danger alert-dismissible mb-3",children:[m,(0,y.jsx)("button",{type:"button",className:"btn-close",onClick:()=>u(null)})]}),(0,y.jsx)("div",{className:"card shadow-sm border-0 mb-4",style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("h5",{className:"mb-1 fw-semibold",children:"Add New Items"}),(0,y.jsx)("small",{className:"text-muted",children:"Add new sessions, grades, and sections for this institute"})]}),(0,y.jsxs)("div",{className:"d-flex gap-3 flex-wrap",children:[(0,y.jsxs)("div",{className:"flex-fill position-relative",style:{minWidth:"200px"},children:[(0,y.jsx)("button",{type:"button",className:"btn btn-primary dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100",onClick:()=>{p(!x),g(!1),f(!1)},children:(0,y.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("i",{className:"bi bi-calendar-plus"}),(0,y.jsx)("span",{children:Q()||"Session"})]})}),x&&(0,y.jsxs)("div",{className:"dropdown-menu show w-100 p-3 shadow-lg",style:{minWidth:"100%",maxHeight:"300px",overflowY:"auto",position:"absolute",zIndex:1e3},children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsx)("label",{className:"form-label small fw-semibold",children:"Add New Session"}),(0,y.jsxs)("div",{className:"input-group",children:[(0,y.jsx)("input",{type:"text",className:"form-control",placeholder:"e.g., 2024-25",value:Z,onChange:e=>P(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(K(),e.preventDefault())}}),(0,y.jsx)("button",{type:"button",className:"btn btn-primary",onClick:K,disabled:!Z.trim(),children:(0,y.jsx)("i",{className:"bi bi-plus-lg"})})]})]}),S.length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"dropdown-divider"}),(0,y.jsx)("label",{className:"form-label small fw-semibold",children:"New Sessions"}),(0,y.jsx)("div",{className:"list-group",children:S.map((e,s)=>(0,y.jsx)("button",{type:"button",className:"list-group-item list-group-item-action ".concat(H===s?"active":""),onClick:()=>(e=>{L(e),M(null),p(!1)})(s),children:(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{children:e.sessionName}),(0,y.jsxs)("span",{className:"badge bg-secondary",children:[e.grades.length," grades"]})]})},s))})]})]})]}),(0,y.jsxs)("div",{className:"flex-fill position-relative",style:{minWidth:"200px"},children:[(0,y.jsx)("button",{type:"button",className:"btn btn-success dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100",onClick:()=>{null!==H&&(g(!b),p(!1),f(!1))},disabled:null===H,children:(0,y.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("i",{className:"bi bi-award"}),(0,y.jsx)("span",{children:$()||"Grade"}),null===H&&(0,y.jsx)("small",{className:"ms-1 text-light",children:"(select session)"})]})}),b&&null!==H&&(0,y.jsxs)("div",{className:"dropdown-menu show w-100 p-3 shadow-lg",style:{minWidth:"100%",maxHeight:"300px",overflowY:"auto",position:"absolute",zIndex:1e3},children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsxs)("label",{className:"form-label small fw-semibold",children:['Add Grade to "',Q(),'"']}),(0,y.jsxs)("div",{className:"input-group",children:[(0,y.jsx)("input",{type:"text",className:"form-control",placeholder:"e.g., Class 9",value:A,onChange:e=>E(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(Y(),e.preventDefault())}}),(0,y.jsx)("button",{type:"button",className:"btn btn-success",onClick:Y,disabled:!A.trim(),children:(0,y.jsx)("i",{className:"bi bi-plus-lg"})})]})]}),(null===(a=S[H])||void 0===a?void 0:a.grades.length)>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"dropdown-divider"}),(0,y.jsx)("label",{className:"form-label small fw-semibold",children:"Grades"}),(0,y.jsx)("div",{className:"list-group",children:S[H].grades.map((e,s)=>(0,y.jsx)("button",{type:"button",className:"list-group-item list-group-item-action ".concat(D===s?"active":""),onClick:()=>(M(s),void g(!1)),children:(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{children:e.gradeName}),(0,y.jsxs)("span",{className:"badge bg-secondary",children:[e.sections.length," sections"]})]})},s))})]})]})]}),(0,y.jsxs)("div",{className:"flex-fill position-relative",style:{minWidth:"200px"},children:[(0,y.jsx)("button",{type:"button",className:"btn btn-info dropdown-toggle d-flex align-items-center justify-content-between gap-2 w-100",onClick:()=>{null!==D&&(f(!N),p(!1),g(!1))},disabled:null===D,children:(0,y.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("i",{className:"bi bi-grid-3x3"}),(0,y.jsxs)("span",{children:["Section (",ee().length,")"]}),null===D&&(0,y.jsx)("small",{className:"ms-1 text-light",children:"(select grade)"})]})}),N&&null!==D&&(0,y.jsxs)("div",{className:"dropdown-menu show w-100 p-3 shadow-lg",style:{minWidth:"100%",maxHeight:"300px",overflowY:"auto",position:"absolute",zIndex:1e3},children:[(0,y.jsxs)("div",{className:"mb-3",children:[(0,y.jsxs)("label",{className:"form-label small fw-semibold",children:['Add Section to "',$(),'"']}),(0,y.jsxs)("div",{className:"input-group",children:[(0,y.jsx)("input",{type:"text",className:"form-control",placeholder:"e.g., A, B, C",value:F,onChange:e=>z(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(O(),e.preventDefault())}}),(0,y.jsx)("button",{type:"button",className:"btn btn-info",onClick:O,disabled:!F.trim(),children:(0,y.jsx)("i",{className:"bi bi-plus-lg"})})]})]}),ee().length>0&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("div",{className:"dropdown-divider"}),(0,y.jsx)("label",{className:"form-label small fw-semibold",children:"Sections"}),(0,y.jsx)("div",{className:"list-group",children:ee().map((e,s)=>(0,y.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,y.jsx)("span",{children:e.sectionName}),(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>(e=>{if(null!==H&&null!==D){const s=[...S];s[H].grades[D].sections.splice(e,1),k(s)}})(s),children:(0,y.jsx)("i",{className:"bi bi-trash"})})]},s))})]})]})]})]}),S.length>0&&(0,y.jsxs)("div",{className:"mt-3 p-3 bg-white rounded border",children:[(0,y.jsxs)("h6",{className:"mb-2 fw-semibold d-flex align-items-center gap-2",children:[(0,y.jsx)("i",{className:"bi bi-plus-circle text-success"}),"New Items to Submit"]}),(0,y.jsx)("div",{className:"d-flex flex-wrap gap-2",children:S.map((e,s)=>(0,y.jsxs)("span",{className:"badge bg-primary px-2 py-1",children:[e.sessionName," (",e.grades.length," grades)"]},s))})]})]})}),(0,y.jsx)("div",{className:"card shadow-sm border-0",children:(0,y.jsxs)("div",{className:"card-body",children:[(0,y.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("h5",{className:"mb-1 fw-semibold",children:"Existing Data"}),(0,y.jsx)("small",{className:"text-muted",children:"Click on any cell to edit. Changes are saved immediately."})]}),r&&(0,y.jsx)("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:(0,y.jsx)("span",{className:"visually-hidden",children:"Loading..."})})]}),0!==se.length||r?(0,y.jsx)("div",{className:"table-responsive",children:(0,y.jsxs)("table",{className:"table table-bordered table-hover mb-0",children:[(0,y.jsx)("thead",{className:"table-light",children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{style:{width:"25%"},children:"Session"}),(0,y.jsx)("th",{style:{width:"25%"},children:"Grade/Class"}),(0,y.jsx)("th",{style:{width:"25%"},children:"Section"}),(0,y.jsx)("th",{style:{width:"25%"},children:"Actions"})]})}),(0,y.jsx)("tbody",{children:se.map((e,s)=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{className:"editable-cell",children:"session"===(null===U||void 0===U?void 0:U.type)&&U.sessionIndex===e.sessionIndex?(0,y.jsxs)("div",{className:"d-flex gap-1",children:[(0,y.jsx)("input",{type:"text",className:"form-control form-control-sm",value:R,onChange:e=>T(e.target.value),onKeyPress:e=>{"Enter"===e.key&&J(),"Escape"===e.key&&G()},autoFocus:!0}),(0,y.jsx)("button",{className:"btn btn-sm btn-success",onClick:J,children:(0,y.jsx)("i",{className:"bi bi-check"})}),(0,y.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:G,children:(0,y.jsx)("i",{className:"bi bi-x"})})]}):(0,y.jsx)("span",{onClick:()=>e.sessionId&&V("session",e.sessionId,e.sessionIndex,e.sessionName),title:"Click to edit",children:e.sessionName})}),(0,y.jsx)("td",{className:"editable-cell",children:"grade"===(null===U||void 0===U?void 0:U.type)&&U.sessionIndex===e.sessionIndex&&U.gradeIndex===e.gradeIndex?(0,y.jsxs)("div",{className:"d-flex gap-1",children:[(0,y.jsx)("input",{type:"text",className:"form-control form-control-sm",value:R,onChange:e=>T(e.target.value),onKeyPress:e=>{"Enter"===e.key&&J(),"Escape"===e.key&&G()},autoFocus:!0}),(0,y.jsx)("button",{className:"btn btn-sm btn-success",onClick:J,children:(0,y.jsx)("i",{className:"bi bi-check"})}),(0,y.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:G,children:(0,y.jsx)("i",{className:"bi bi-x"})})]}):(0,y.jsx)("span",{onClick:()=>e.gradeId&&V("grade",e.gradeId,e.sessionIndex,e.gradeName,e.gradeIndex),title:e.gradeId?"Click to edit":"",style:{color:e.gradeId?"inherit":"#6c757d"},children:e.gradeName})}),(0,y.jsx)("td",{className:"editable-cell",children:"section"===(null===U||void 0===U?void 0:U.type)&&U.sessionIndex===e.sessionIndex&&U.gradeIndex===e.gradeIndex&&U.sectionIndex===e.sectionIndex?(0,y.jsxs)("div",{className:"d-flex gap-1",children:[(0,y.jsx)("input",{type:"text",className:"form-control form-control-sm",value:R,onChange:e=>T(e.target.value),onKeyPress:e=>{"Enter"===e.key&&J(),"Escape"===e.key&&G()},autoFocus:!0}),(0,y.jsx)("button",{className:"btn btn-sm btn-success",onClick:J,children:(0,y.jsx)("i",{className:"bi bi-check"})}),(0,y.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:G,children:(0,y.jsx)("i",{className:"bi bi-x"})})]}):(0,y.jsx)("span",{onClick:()=>e.sectionId&&V("section",e.sectionId,e.sessionIndex,e.sectionName,e.gradeIndex,e.sectionIndex),title:e.sectionId?"Click to edit":"",style:{color:e.sectionId?"inherit":"#6c757d"},children:e.sectionName})}),(0,y.jsx)("td",{children:(0,y.jsxs)("div",{className:"d-flex gap-1",children:[e.sectionId&&(0,y.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>X("section",e.sectionId,e.sectionName,e.sessionIndex,e.gradeIndex,e.sectionIndex),title:"Delete section",children:[(0,y.jsx)("i",{className:"bi bi-trash"})," Section"]}),e.gradeId&&!e.sectionId&&(0,y.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>X("grade",e.gradeId,e.gradeName,e.sessionIndex,e.gradeIndex),title:"Delete grade",children:[(0,y.jsx)("i",{className:"bi bi-trash"})," Grade"]}),e.sessionId&&!e.gradeId&&(0,y.jsxs)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>X("session",e.sessionId,e.sessionName,e.sessionIndex),title:"Delete session",children:[(0,y.jsx)("i",{className:"bi bi-trash"})," Session"]})]})})]},s))})]})}):(0,y.jsxs)("div",{className:"text-center text-muted py-5",children:[(0,y.jsx)("i",{className:"bi bi-inbox",style:{fontSize:"3rem"}}),(0,y.jsx)("p",{className:"mt-2 mb-0",children:"No existing data for this institute"})]})]})})]}),(0,y.jsx)(v.Z.Footer,{className:"border-0 pt-0",children:(0,y.jsxs)("div",{className:"d-flex justify-content-between w-100 align-items-center",children:[(0,y.jsx)("div",{className:"text-muted small",children:(null===(l=e.data)||void 0===l?void 0:l.instituteCode)&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("span",{className:"fw-semibold",children:"Institute Code: "}),(0,y.jsx)("span",{children:e.data.instituteCode})]})}),(0,y.jsxs)("div",{className:"d-flex gap-2",children:[(0,y.jsx)("button",{type:"button",className:"btn btn-sm btn-light",onClick:()=>e.onHide(),disabled:i,children:"Close"}),(0,y.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:async()=>{if(0===S.length)return;d(!0);const s=S.map(s=>{var t;return{id:null,sessionYear:s.sessionName,schoolClasses:s.grades.map(e=>({id:null,className:e.gradeName,schoolSections:e.sections.map(e=>({id:null,sectionName:e.sectionName}))})),instituteCode:(null===(t=e.data)||void 0===t?void 0:t.instituteCode)||null}});try{var t;await(0,o.oY)(s),alert("New sessions submitted successfully!"),k([]),L(null),M(null),null!==(t=e.data)&&void 0!==t&&t.instituteCode&&await W(e.data.instituteCode)}catch(m){console.error("Error in CreateSessionData:",m),alert("Error submitting. Please try again.")}finally{d(!1)}},disabled:i||0===S.length,children:[!i&&(0,y.jsxs)("span",{className:"d-flex align-items-center gap-1",children:[(0,y.jsx)("i",{className:"bi bi-check-circle"}),"Submit New (",S.length,")"]}),i&&(0,y.jsxs)("span",{className:"d-flex align-items-center gap-2",children:[(0,y.jsx)("span",{className:"spinner-border spinner-border-sm"}),"Submitting..."]})]})]})]})})]})]}),(0,y.jsxs)(v.Z,{show:null!==q,onHide:()=>_(null),centered:!0,size:"sm",children:[(0,y.jsx)(v.Z.Header,{closeButton:!0,children:(0,y.jsx)(v.Z.Title,{className:"h5",children:"Confirm Delete"})}),(0,y.jsxs)(v.Z.Body,{children:[(0,y.jsxs)("p",{className:"mb-2",children:["Are you sure you want to delete this ",null===q||void 0===q?void 0:q.type,"?"]}),(0,y.jsxs)("p",{className:"fw-bold text-danger mb-2",children:['"',null===q||void 0===q?void 0:q.name,'"']}),"session"===(null===q||void 0===q?void 0:q.type)&&(0,y.jsxs)("p",{className:"text-warning small mb-0",children:[(0,y.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"This will also delete all grades and sections within this session."]}),"grade"===(null===q||void 0===q?void 0:q.type)&&(0,y.jsxs)("p",{className:"text-warning small mb-0",children:[(0,y.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"This will also delete all sections within this grade."]})]}),(0,y.jsxs)(v.Z.Footer,{children:[(0,y.jsx)(I.Z,{variant:"secondary",size:"sm",onClick:()=>_(null),children:"Cancel"}),(0,y.jsx)(I.Z,{variant:"danger",size:"sm",onClick:async()=>{if(q){d(!0);try{var s;"session"===q.type?await(0,o.K4)(q.id):"grade"===q.type?await(0,o.bA)(q.id):"section"===q.type&&await(0,o.uS)(q.id),null!==(s=e.data)&&void 0!==s&&s.instituteCode&&await W(e.data.instituteCode)}catch(t){console.error("Error deleting:",t),u("Failed to delete. Please try again.")}finally{d(!1),_(null)}}},disabled:i,children:i?(0,y.jsxs)("span",{className:"d-flex align-items-center gap-1",children:[(0,y.jsx)("span",{className:"spinner-border spinner-border-sm"}),"Deleting..."]}):"Delete"})]})]})]})};var P=t(55192),A=t(24849),E=t(4437),F=t(45736),z=t(15110);const H=e=>{const[s,t]=(0,n.useState)([]),[a,i]=(0,n.useState)([]),[r,c]=(0,n.useState)([]),[m,u]=(0,n.useState)(""),[h,x]=(0,n.useState)("CLASS"),[p,b]=(0,n.useState)(""),[v,j]=(0,n.useState)(""),[N,f]=(0,n.useState)(""),[w,C]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),[I,Z]=(0,n.useState)(""),H=a.find(e=>String(e.id)===p),L=(null===H||void 0===H?void 0:H.schoolClasses)||[],D=L.find(e=>String(e.id)===v),M=(null===D||void 0===D?void 0:D.schoolSections)||[];(0,n.useEffect)(()=>{e.show&&e.instituteCode&&U()},[e.show,e.instituteCode]);const U=async()=>{C(!0);try{const[s,n,a]=await Promise.all([(0,z.bR)(),(0,o.$E)(e.instituteCode),(0,z.Kk)(e.instituteCode)]);t((s.data||[]).filter(e=>!1!==e.isActive)),i(n.data||[]),c(a.data||[])}catch(s){console.error("Failed to load data:",s)}finally{C(!1)}},B=e=>{navigator.clipboard.writeText((e=>"".concat(window.location.origin,"/assessment-register/").concat(e))(e)),Z(e),setTimeout(()=>Z(""),2e3)},R=e=>{const t=s.find(s=>s.id===e);return t&&(t.AssessmentName||t.assessmentName)||"ID: ".concat(e)},T=e=>{const s=[];if(e.sessionId){const t=a.find(s=>s.id===e.sessionId);t&&s.push(t.sessionYear)}if(e.classId)for(const t of a){const n=(t.schoolClasses||[]).find(s=>s.id===e.classId);if(n){if(s.push("Class ".concat(n.className)),e.sectionId){const t=(n.schoolSections||[]).find(s=>s.id===e.sectionId);t&&s.push("Section ".concat(t.sectionName))}break}}return s.join(" / ")||e.mappingLevel};return(0,y.jsxs)(P.Z,{show:e.show,onHide:e.onHide,size:"xl",centered:!0,children:[(0,y.jsx)(P.Z.Header,{closeButton:!0,children:(0,y.jsxs)(P.Z.Title,{children:["Assessment Mapping - ",e.instituteName]})}),(0,y.jsx)(P.Z.Body,{children:w?(0,y.jsxs)("div",{className:"text-center py-5",children:[(0,y.jsx)(A.Z,{animation:"border",size:"sm",className:"me-2"}),"Loading..."]}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"card card-body bg-light mb-4",children:[(0,y.jsx)("h6",{className:"mb-3",children:"Create New Mapping"}),(0,y.jsxs)("div",{className:"row g-3",children:[(0,y.jsxs)("div",{className:"col-md-4",children:[(0,y.jsx)(E.Z.Label,{children:"Assessment"}),(0,y.jsxs)(E.Z.Select,{value:m,onChange:e=>u(e.target.value),children:[(0,y.jsx)("option",{value:"",children:"Select Assessment"}),s.map(e=>(0,y.jsx)("option",{value:e.id,children:e.AssessmentName||e.assessmentName},e.id))]})]}),(0,y.jsxs)("div",{className:"col-md-2",children:[(0,y.jsx)(E.Z.Label,{children:"Level"}),(0,y.jsxs)(E.Z.Select,{value:h,onChange:e=>{x(e.target.value),j(""),f("")},children:[(0,y.jsx)("option",{value:"SESSION",children:"Session"}),(0,y.jsx)("option",{value:"CLASS",children:"Class"}),(0,y.jsx)("option",{value:"SECTION",children:"Section"})]})]}),(0,y.jsxs)("div",{className:"col-md-2",children:[(0,y.jsx)(E.Z.Label,{children:"Session"}),(0,y.jsxs)(E.Z.Select,{value:p,onChange:e=>{b(e.target.value),j(""),f("")},children:[(0,y.jsx)("option",{value:"",children:"Select Session"}),a.map(e=>(0,y.jsx)("option",{value:e.id,children:e.sessionYear},e.id))]})]}),("CLASS"===h||"SECTION"===h)&&(0,y.jsxs)("div",{className:"col-md-2",children:[(0,y.jsx)(E.Z.Label,{children:"Class"}),(0,y.jsxs)(E.Z.Select,{value:v,onChange:e=>{j(e.target.value),f("")},children:[(0,y.jsx)("option",{value:"",children:"Select Class"}),L.map(e=>(0,y.jsx)("option",{value:e.id,children:e.className},e.id))]})]}),"SECTION"===h&&(0,y.jsxs)("div",{className:"col-md-2",children:[(0,y.jsx)(E.Z.Label,{children:"Section"}),(0,y.jsxs)(E.Z.Select,{value:N,onChange:e=>f(e.target.value),children:[(0,y.jsx)("option",{value:"",children:"Select Section"}),M.map(e=>(0,y.jsx)("option",{value:e.id,children:e.sectionName},e.id))]})]})]}),(0,y.jsx)("div",{className:"mt-3",children:(0,y.jsx)(l.Z,{variant:"primary",size:"sm",onClick:async()=>{if(!m)return void alert("Please select an assessment");const s={assessmentId:Number(m),instituteCode:e.instituteCode,mappingLevel:h};if("SESSION"===h){if(!p)return void alert("Please select a session");s.sessionId=Number(p)}else if("CLASS"===h){if(!p||!v)return void alert("Please select a session and class");s.sessionId=Number(p),s.classId=Number(v)}else if("SECTION"===h){if(!p||!v||!N)return void alert("Please select a session, class, and section");s.sessionId=Number(p),s.classId=Number(v),s.sectionId=Number(N)}k(!0);try{await(0,z.Pm)(s);const t=await(0,z.Kk)(e.instituteCode);c(t.data||[]),u(""),b(""),j(""),f("")}catch(n){var t;console.error("Failed to create mapping:",n),alert("Failed to create mapping: "+((null===(t=n.response)||void 0===t?void 0:t.data)||n.message))}finally{k(!1)}},disabled:S,children:S?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(A.Z,{animation:"border",size:"sm",className:"me-1"}),"Creating..."]}):"Create Mapping"})})]}),(0,y.jsxs)("h6",{className:"mb-3",children:["Existing Mappings (",r.length,")"]}),0===r.length?(0,y.jsx)("div",{className:"text-muted text-center py-3",children:"No assessment mappings yet. Create one above."}):(0,y.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:(0,y.jsxs)("table",{className:"table table-striped table-hover table-sm",children:[(0,y.jsx)("thead",{className:"table-dark",style:{position:"sticky",top:0},children:(0,y.jsxs)("tr",{children:[(0,y.jsx)("th",{children:"Assessment"}),(0,y.jsx)("th",{children:"Level"}),(0,y.jsx)("th",{children:"Details"}),(0,y.jsx)("th",{children:"Status"}),(0,y.jsx)("th",{children:"URL"}),(0,y.jsx)("th",{style:{width:"100px"},children:"Actions"})]})}),(0,y.jsx)("tbody",{children:r.map(e=>(0,y.jsxs)("tr",{children:[(0,y.jsx)("td",{children:R(e.assessmentId)}),(0,y.jsx)("td",{children:(0,y.jsx)(F.Z,{bg:"info",children:e.mappingLevel})}),(0,y.jsx)("td",{style:{fontSize:"0.85em"},children:T(e)}),(0,y.jsx)("td",{children:(0,y.jsx)(F.Z,{bg:e.isActive?"success":"secondary",style:{cursor:"pointer"},onClick:()=>(async e=>{try{await(0,z.XM)(e.mappingId,{isActive:!e.isActive}),c(r.map(s=>s.mappingId===e.mappingId?(0,g.Z)((0,g.Z)({},s),{},{isActive:!s.isActive}):s))}catch(s){console.error("Failed to update mapping:",s)}})(e),children:e.isActive?"Active":"Inactive"})}),(0,y.jsx)("td",{children:(0,y.jsxs)(l.Z,{variant:"outline-primary",size:"sm",onClick:()=>B(e.token),title:"Copy URL",children:[(0,y.jsx)(d.Fqs,{size:14}),I===e.token?(0,y.jsx)("span",{className:"ms-1",style:{fontSize:"0.8em"},children:"Copied!"}):(0,y.jsx)("span",{className:"ms-1",style:{fontSize:"0.8em"},children:"Copy"})]})}),(0,y.jsx)("td",{children:(0,y.jsx)(l.Z,{variant:"outline-danger",size:"sm",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this mapping?"))try{await(0,z.zW)(e),c(r.filter(s=>s.mappingId!==e))}catch(s){console.error("Failed to delete mapping:",s)}})(e.mappingId),children:(0,y.jsx)(d.ZkW,{size:14})})})]},e.mappingId))})]})})]})}),(0,y.jsx)(P.Z.Footer,{children:(0,y.jsx)(l.Z,{variant:"secondary",onClick:e.onHide,children:"Close"})})]})},L=e=>{var s,t;const[r,g]=(0,n.useState)(!1),[v,j]=(0,n.useState)({instituteName:"",instituteAddress:"",instituteCode:""}),[N,f]=(0,n.useState)(!1),[C,S]=(0,n.useState)(void 0),[I,P]=(0,n.useState)(!1),[A,E]=(0,n.useState)(void 0),[F,z]=(0,n.useState)(!1),[L,D]=(0,n.useState)(void 0),[M,U]=(0,n.useState)(!1),[B,R]=(0,n.useState)({code:0,name:""}),T=(0,a.s0)(),q=e=>{var s,t,n,a;let l;return l="boolean"===typeof e.display?e.display?1:0:e.display,{instituteName:null!==(s=e.instituteName)&&void 0!==s?s:"",instituteAddress:null!==(t=e.instituteAddress)&&void 0!==t?t:"",instituteCode:null!==(n=e.instituteCode)&&void 0!==n?n:"",display:l,questionOptions:null!==(a=e.questionOptions)&&void 0!==a?a:[""],contactPersons:e.contactPersons&&Array.isArray(e.contactPersons)&&e.contactPersons.length?e.contactPersons:[{name:"",email:"",phone:"",gender:"",designation:""}]}},_={columns:[{label:"Name",field:"name",width:150,attributes:{"aria-controls":"DataTable","aria-label":"Name"}},{label:"Code",field:"code",sort:"asc",width:100},{label:"Address",field:"address",width:100},{label:"Actions",field:"actions",sort:"disabled",width:150}],rows:null!==(s=(null!==(t=e.data)&&void 0!==t?t:[]).filter(e=>!!e&&("boolean"===typeof e.display?!0===e.display:"number"===typeof e.display?0!==e.display:"string"===typeof e.display?"0"!==e.display&&"false"!==e.display:Boolean(e.display))).map(s=>{var t,n,a;return{name:null!==(t=s.instituteName)&&void 0!==t?t:"",code:null!==(n=s.instituteCode)&&void 0!==n?n:"",address:null!==(a=s.instituteAddress)&&void 0!==a?a:"",actions:(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)("button",{type:"button",onClick:()=>{j(s),g(!0)},className:"btn btn-icon btn-primary btn-sm me-3",children:(0,y.jsx)(m.QML,{size:16})}),(0,y.jsx)("button",{type:"button",onClick:async()=>{try{var t;const n=null!==(t=s.id)&&void 0!==t?t:s.instituteCode;if(console.log("Attempting to delete college. Row:",s),console.log("Using deleteId:",n),!n)return console.error("No 'id' or 'instituteCode' found on this row. Cannot call DeleteCollegeData."),void alert("Cannot delete: no valid ID found for this record.");e.setLoading(!0),await(0,o.eh)(n),e.setPageLoading(e=>!e)}catch(n){console.error("Delete failed:",n),alert("Delete failed. Check console for details.")}finally{e.setLoading(!1)}},className:"btn btn-icon btn-danger btn-sm me-3",children:(0,y.jsx)(h.Z,{animation:x.Z,size:22,strokeColor:"#EFF8FE"})}),(0,y.jsxs)(p.Z,{className:"d-inline",children:[(0,y.jsx)(p.Z.Toggle,{variant:"success",size:"sm",id:"dropdown-".concat(s.instituteCode),className:"dropdown-toggle",children:"Actions"}),(0,y.jsxs)(p.Z.Menu,{style:{minWidth:"150px",zIndex:1050},popperConfig:{strategy:"fixed"},renderOnMount:!0,children:[(0,y.jsx)(u.rU,{to:"/course",state:{collegeId:s.instituteCode,college:s.instituteName},style:{textDecoration:"none"},children:(0,y.jsxs)(p.Z.Item,{as:"button",children:[(0,y.jsx)(m.ocf,{size:18,className:"me-2"}),"Add Course"]})}),(0,y.jsxs)(p.Z.Item,{onClick:()=>{S(q(s)),f(!0)},children:[(0,y.jsx)(m.ocf,{size:18,className:"me-2"}),"Info"]}),(0,y.jsxs)(p.Z.Item,{onClick:()=>{E(q(s)),P(!0)},children:[(0,y.jsx)(m.ocf,{size:18,className:"me-2"}),"Add Details"]}),(0,y.jsxs)(p.Z.Item,{onClick:()=>{D(q(s)),z(!0)},children:[(0,y.jsx)(m.ocf,{size:18,className:"me-2"}),"Assign Roles"]}),(0,y.jsxs)(p.Z.Item,{onClick:()=>{R({code:Number(s.instituteCode),name:s.instituteName||""}),U(!0)},children:[(0,y.jsx)(d.eAf,{size:18,className:"me-2"}),"Assessment Mapping"]})]})]}),(0,y.jsx)(l.Z,{variant:"outline-success",size:"sm",onClick:()=>{e.onUploadClick&&e.onUploadClick(v)},onClickCapture:()=>{0}}),(0,y.jsxs)(l.Z,{variant:"outline-info",size:"sm",className:"me-2",onClick:()=>T("/school/dashboard/".concat(s.instituteCode||s.id)),children:[(0,y.jsx)(i.Pd.Provider,{value:{style:{paddingBottom:"3px"}},children:(0,y.jsx)(d.JZ9,{})}),(0,y.jsx)("span",{style:{marginLeft:6},children:"Dashboard"})]}),(0,y.jsxs)(l.Z,{variant:"outline-success",size:"sm",className:"me-2",onClick:()=>e.onUploadClick&&e.onUploadClick(s),children:[(0,y.jsx)(i.Pd.Provider,{value:{style:{paddingBottom:"3px"}},children:(0,y.jsx)(d.qbQ,{})}),(0,y.jsx)("span",{style:{marginLeft:6},children:"Upload Students"})]}),(0,y.jsx)(l.Z,{hidden:!0,onClick:()=>{}})]})}}))&&void 0!==s?s:[]};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.Vm4,{hover:!0,scrollY:!0,maxHeight:"160vh",entriesOptions:[5,20,25],entries:25,pagesAmount:4,data:_}),(0,y.jsx)(b.default,{show:r,onHide:()=>g(!1),data:v,setPageLoading:e.setPageLoading}),(0,y.jsx)(w,{show:N,onHide:()=>f(!1),data:C,setPageLoading:e.setPageLoading}),(0,y.jsx)(Z,{show:I,onHide:()=>P(!1),data:A,setPageLoading:e.setPageLoading}),(0,y.jsx)(k,{show:F,onHide:()=>z(!1),data:L,setPageLoading:e.setPageLoading}),(0,y.jsx)(H,{show:M,onHide:()=>U(!1),instituteCode:B.code,instituteName:B.name})]})},D=e=>{let{show:s,onHide:t,college:a,onUploaded:i}=e;const[d,o]=(0,n.useState)(null),[r,c]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null);return(0,y.jsxs)(P.Z,{show:s,onHide:t,size:"lg",centered:!0,children:[(0,y.jsx)(P.Z.Header,{closeButton:!0,children:(0,y.jsx)(P.Z.Title,{children:"Upload Students Excel"})}),(0,y.jsx)(P.Z.Body,{children:(0,y.jsxs)("div",{children:[(0,y.jsxs)("div",{children:[(0,y.jsx)("strong",{children:"Institute:"})," ",(null===a||void 0===a?void 0:a.instituteName)||"\u2014"]}),(0,y.jsxs)(E.Z.Group,{className:"mt-3",children:[(0,y.jsx)(E.Z.Label,{children:"Student file (.xlsx, .xls, .csv)"}),(0,y.jsx)(E.Z.Control,{type:"file",accept:".xlsx,.xls,.csv",onChange:e=>{var s;o((null===(s=e.target.files)||void 0===s?void 0:s[0])||null)}}),(0,y.jsx)(E.Z.Text,{className:"text-muted",children:"First row should contain headers (name, email, rollNo etc.)"})]}),m&&(0,y.jsx)("div",{className:"mt-2",children:m})]})}),(0,y.jsxs)(P.Z.Footer,{children:[(0,y.jsx)(l.Z,{variant:"secondary",onClick:t,disabled:r,children:"Close"}),(0,y.jsx)(l.Z,{variant:"primary",onClick:async()=>{if(d&&a){c(!0),u(null);try{const e=new FormData;e.append("file",d);if(!(await fetch("/api/colleges/".concat(a.instituteCode||a.id,"/students/upload"),{method:"POST",body:e})).ok)throw new Error("Upload failed");u("Uploaded successfully"),i&&i()}catch(e){console.error(e),u("Upload failed")}finally{c(!1)}}else u("Please select a file and institute.")},disabled:r||!d,children:r?"Uploading\u2026":"Upload"})]})]})},M=()=>{const[e,s]=(0,n.useState)(!1),[t,c]=(0,n.useState)([]),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)(["false"]),[p,b]=(0,n.useState)(!1),[g,v]=(0,n.useState)(null);(0,a.s0)();(0,n.useEffect)(()=>{u(!0);try{(0,o.hi)().then(e=>{c(e.data),u(!1)})}catch(e){console.error(e)}},[h]);return(0,y.jsxs)("div",{className:"card",children:[m&&(0,y.jsxs)("span",{className:"indicator-progress m-5",style:{display:"block"},children:["Please wait..."," ",(0,y.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!m&&(0,y.jsxs)("div",{className:"card-header border-0 pt-6",children:[(0,y.jsx)("div",{className:"card-title",children:(0,y.jsx)("h1",{children:"Institutes List"})}),(0,y.jsx)("div",{className:"card-toolbar",children:(0,y.jsx)("div",{className:"d-flex justify-content-end",children:(0,y.jsx)("div",{style:{display:"flex",gap:8},children:(0,y.jsx)(l.Z,{variant:"primary",onClick:()=>{s(!0)},children:(0,y.jsx)(i.Pd.Provider,{value:{style:{paddingBottom:"4px"}},children:(0,y.jsxs)("div",{children:["Add Institute ",(0,y.jsx)(d.eAf,{size:21})]})})})})})})]}),!m&&(0,y.jsx)("div",{className:"card-body pt-5",children:(0,y.jsx)(L,{data:t,setLoading:u,setPageLoading:x,onUploadClick:e=>{v(e),b(!0)}})}),(0,y.jsx)(r.Z,{setPageLoading:x,show:e,onHide:()=>s(!1)}),(0,y.jsx)(D,{show:p,onHide:()=>b(!1),college:g,onUploaded:()=>{b(!1),v(null),x([String(Date.now())])}})]})}},62094:(e,s,t)=>{t.r(s),t.d(s,{default:()=>x});var n=t(1413),a=t(28182),l=t(92506),i=t(72791),d=t(28403),o=t(70099),r=t(7755),c=t(81724),m=t(54624),u=t(80184);const h=c.Ry().shape({instituteName:c.Z_().required(),instituteAddress:c.Z_().required(),instituteCode:c.Z_().required(),maxStudents:c.Z_().required(),maxContactPersons:c.Z_().required()}),x=e=>{const[s,t]=(0,i.useState)(!1);var c={instituteName:e.data.instituteName,instituteAddress:e.data.instituteAddress,instituteCode:e.data.instituteCode,maxStudents:e.data.maxStudents,maxContactPersons:e.data.maxContactPersons,display:1};const x=(0,l.TA)({enableReinitialize:!0,initialValues:c,validationSchema:h,onSubmit:s=>{try{t(!0),(0,m.J6)(s).then(()=>{e.onHide(!1),e.setPageLoading(["true"])})}catch(n){console.error(n),window.location.replace("/error")}}});return(0,u.jsxs)(d.Z,(0,n.Z)((0,n.Z)({},e),{},{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[(0,u.jsxs)(d.Z.Header,{children:[(0,u.jsx)(d.Z.Title,{children:(0,u.jsx)("h1",{children:"Edit College"})}),(0,u.jsx)("div",{className:"btn btn-sm btn-icon btn-active-color-primary",onClick:e.onHide,children:(0,u.jsx)(o.Z,{animation:r.Z,size:28,strokeColor:"#181C32",reverse:!0})})]}),(0,u.jsxs)("form",{className:"form w-100 fv-plugins-bootstrap5 fv-plugins-framework",onSubmit:x.handleSubmit,children:[(0,u.jsx)(d.Z.Body,{children:(0,u.jsx)("div",{className:"modal-body",children:(0,u.jsxs)("div",{className:"scroll-y me-n7 pe-7",id:"kt_modal_add_scroll","data-kt-scroll":"true","data-kt-scroll-activate":"{default: false, lg: true}","data-kt-scroll-max-height":"auto","data-kt-scroll-dependencies":"#kt_modal_add_header","data-kt-scroll-wrappers":"#kt_modal_add_scroll","data-kt-scroll-offset":"300px",children:[(0,u.jsxs)("div",{className:"fv-row mb-7",children:[(0,u.jsx)("label",{className:"fs-6 fw-bold mb-2",children:"Institute Code :"}),(0,u.jsx)("input",(0,n.Z)((0,n.Z)({placeholder:"Enter Institute Code",type:"text",autoComplete:"off"},x.getFieldProps("instituteCode")),{},{className:"form-control form-control-lg form-control-solid",disabled:!0}))]}),(0,u.jsxs)("div",{className:"fv-row mb-7",children:[(0,u.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"College Name :"}),(0,u.jsx)("input",(0,n.Z)((0,n.Z)({placeholder:"Enter College Name",type:"text",autoComplete:"off"},x.getFieldProps("instituteName")),{},{className:(0,a.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":x.touched.instituteName&&x.errors.instituteName},{"is-valid":x.touched.instituteName&&!x.errors.instituteName})})),x.touched.instituteName&&x.errors.instituteName&&(0,u.jsx)("div",{className:"fv-plugins-message-container",children:(0,u.jsx)("div",{className:"fv-help-block text-danger",children:(0,u.jsx)("span",{role:"alert",children:"College Name is Required"})})})]}),(0,u.jsxs)("div",{className:"fv-row mb-7",children:[(0,u.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Institute Address :"}),(0,u.jsx)("input",(0,n.Z)((0,n.Z)({placeholder:"Enter Institute Address",type:"text",autoComplete:"off"},x.getFieldProps("instituteAddress")),{},{className:(0,a.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":x.touched.instituteAddress&&x.errors.instituteAddress},{"is-valid":x.touched.instituteAddress&&!x.errors.instituteAddress})})),x.touched.instituteAddress&&x.errors.instituteAddress&&(0,u.jsx)("div",{className:"fv-plugins-message-container",children:(0,u.jsx)("div",{className:"fv-help-block text-danger",children:(0,u.jsx)("span",{role:"alert",children:"Institute Address is Required"})})})]}),(0,u.jsxs)("div",{className:"fv-row mb-7",children:[(0,u.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Maximum Students :"}),(0,u.jsx)("input",(0,n.Z)((0,n.Z)({placeholder:"Enter Maximum Students",type:"text",autoComplete:"off"},x.getFieldProps("maxStudents")),{},{className:(0,a.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":x.touched.maxStudents&&!!x.errors.maxStudents},{"is-valid":x.touched.maxStudents&&!x.errors.maxStudents})})),x.touched.maxStudents&&x.errors.maxStudents&&(0,u.jsx)("div",{className:"fv-plugins-message-container",children:(0,u.jsx)("div",{className:"fv-help-block text-danger",children:(0,u.jsx)("span",{role:"alert",children:"Maximum Students is Required"})})})]}),(0,u.jsxs)("div",{className:"fv-row mb-7",children:[(0,u.jsx)("label",{className:"required fs-6 fw-bold mb-2",children:"Maximum Contact Persons :"}),(0,u.jsx)("input",(0,n.Z)((0,n.Z)({placeholder:"Enter Maximum Contact Persons",type:"text",autoComplete:"off"},x.getFieldProps("maxContactPersons")),{},{className:(0,a.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":x.touched.maxContactPersons&&!!x.errors.maxContactPersons},{"is-valid":x.touched.maxContactPersons&&!x.errors.maxContactPersons})})),x.touched.maxContactPersons&&x.errors.maxContactPersons&&(0,u.jsx)("div",{className:"fv-plugins-message-container",children:(0,u.jsx)("div",{className:"fv-help-block text-danger",children:(0,u.jsx)("span",{role:"alert",children:"Maximum Contact Persons is Required"})})})]})]})})}),(0,u.jsxs)(d.Z.Footer,{children:[(0,u.jsx)("button",{className:"btn btn-sm btn-light btn-active-light-secoundary",onClick:e.onHide,children:"Close"}),(0,u.jsxs)("button",{type:"submit",id:"kt_sign_up_submit",className:"btn btn-sm btn-primary btn-active-light-secoundary",disabled:x.isSubmitting||!x.isValid,children:[!s&&(0,u.jsx)("span",{className:"indicator-label",children:"Submit"}),s&&(0,u.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,u.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})]}))}},21799:(e,s,t)=>{t.d(s,{Z:()=>x});var n=t(87462),a=t(63366),l=t(81694),i=t.n(l),d=t(72791),o=t(89181);const r=function(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter(function(e){return null!=e}).reduce(function(e,s){if("function"!==typeof s)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?s:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.apply(this,n),s.apply(this,n)}},null)};function c(e){return!e||"#"===e.trim()}var m=d.forwardRef(function(e,s){var t=e.as,l=void 0===t?"a":t,i=e.disabled,o=e.onKeyDown,m=(0,a.Z)(e,["as","disabled","onKeyDown"]),u=function(e){var s=m.href,t=m.onClick;(i||c(s))&&e.preventDefault(),i?e.stopPropagation():t&&t(e)};return c(m.href)&&(m.role=m.role||"button",m.href=m.href||"#"),i&&(m.tabIndex=-1,m["aria-disabled"]=!0),d.createElement(l,(0,n.Z)({ref:s},m,{onClick:u,onKeyDown:r(function(e){" "===e.key&&(e.preventDefault(),u(e))},o)}))});m.displayName="SafeAnchor";const u=m;var h=d.forwardRef(function(e,s){var t=e.bsPrefix,l=e.variant,r=e.size,c=e.active,m=e.className,h=e.block,x=e.type,p=e.as,b=(0,a.Z)(e,["bsPrefix","variant","size","active","className","block","type","as"]),g=(0,o.vE)(t,"btn"),v=i()(m,g,c&&"active",l&&g+"-"+l,h&&g+"-block",r&&g+"-"+r);if(b.href)return d.createElement(u,(0,n.Z)({},b,{as:p,ref:s,className:i()(v,b.disabled&&"disabled")}));s&&(b.ref=s),x?b.type=x:p||(b.type="button");var j=p||"button";return d.createElement(j,(0,n.Z)({},b,{className:v}))});h.displayName="Button",h.defaultProps={variant:"primary",active:!1,disabled:!1};const x=h}}]);
//# sourceMappingURL=95.dd557f28.chunk.js.map