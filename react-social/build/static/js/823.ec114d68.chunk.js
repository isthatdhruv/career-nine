"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[823],{23823:(e,a,s)=>{s.r(a),s.d(a,{default:()=>y});var l=s(92506),r=s(72791),i=s(81343),n=s(21799),o=s(78820),t=s(2272),d=s(45856),c=s(81724),u=s(74569),p=s.n(u);const m="https://api.career-9.com",b=("".concat(m,"/roleurl/createRole"),"".concat(m,"/user/get")),h=("".concat(m,"/user/getbyid/"),"".concat(m,"/user/update"),"".concat(m,"/user/delete/"),"".concat(m,"/role/get"),"".concat(m,"/rolegroup/get")),g=("".concat(m,"/userrolegroupmapping/get"),"".concat(m,"/userrole/update/"),"".concat(m,"/userrolegroupmapping/update")),v="".concat(m,"/userrolegroupmapping/delete/");"".concat(m,"/userrole/get/"),"".concat(m,"/google-api/password-reset/update");function x(){return p().get(h)}function j(){return p().get(b)}function f(e){return p().post(g,{values:e})}var N=s(80184);c.Ry().shape({user:c.Z_().required("User Name is required")});const w=e=>{const[a,s]=(0,r.useState)(!1),[c,u]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]);e.data.id=null==e.data.id?0:e.data.id,e.data.name=null==e.data.name?"":e.data.name,e.data.userRoleGroupMappings=null==e.data.userRoleGroupMappings?"":e.data.userRoleGroupMappings;var m={id:e.data.userRoleGroupMappings.id,user:e.data.id,roleGroupTemp:e.data.userRoleGroupMappings,display:1};const b=(0,l.TA)({enableReinitialize:!0,initialValues:m,onSubmit:e=>{e.roleGroupTemp=d.default.map(e.roleGroupTemp,e=>e.id.value);try{f(e).then(()=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}b.resetForm()}}),[h,g]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{x().then(e=>{g(e.data)})}catch(e){console.error(e),window.location.replace("/error")}try{j().then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));u(a)})}catch(e){console.error(e),window.location.replace("/error")}},[]);var w=h.map(e=>({label:e.name,value:e.id})),y={label:e.data.name,value:e.data.id},M=d.default.map(e.data.userRoleGroupMappings,e=>({label:e.roleGroup.name,value:e.roleGroup.id}));return(0,N.jsxs)(N.Fragment,{children:[a&&(0,N.jsxs)("span",{className:"indicator-progress mx-3 mt-5 mb-0",style:{display:"block"},children:["Please wait..."," ",(0,N.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!a&&(0,N.jsx)(i.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5",id:"college_data_form",onSubmit:b.handleSubmit,children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col",children:[(0,N.jsx)(t.ZP,{closeMenuOnSelect:!1,defaultValue:y,options:c,placeholder:"Select User",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Users",noOptionsMessage:()=>"No User Available",onChange:e=>{b.setFieldValue("user",e.value)}}),b.touched.user&&b.errors.user&&(0,N.jsx)("div",{className:"fv-plugins-message-container",children:(0,N.jsx)("div",{className:"fv-help-block text-danger",children:"User name is required"})})]}),(0,N.jsxs)("div",{className:"col",children:[(0,N.jsx)(t.ZP,{closeMenuOnSelect:!1,defaultValue:M,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",isMulti:!0,options:w,onChange:e=>{e=e.map(e=>({id:e})),b.setFieldValue("roleGroupTemp",e)}}),(0,N.jsx)("input",{type:"hidden",defaultValue:e.data.id,autoComplete:"off"})]}),(0,N.jsx)("div",{className:"col-2",children:(0,N.jsxs)("div",{className:"d-flex justify-content-end flex-shrink-0",children:[(0,N.jsx)(n.Z,{type:"submit",disabled:b.isSubmitting||!b.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,N.jsx)(o.bzc,{})}),(0,N.jsx)(n.Z,{type:"button",disabled:!1,onClick:()=>{var a;s(!0),(a=e.data.id,p().get(v+a)).then(()=>{window.location.reload()})},className:"btn btn-icon btn-danger  btn-active-color-primary btn-sm",children:(0,N.jsx)(o.YK6,{})})]})})]})},e.data.id)]})},y=(c.Ry().shape({name:c.Z_().required("required")}),()=>{const[e,a]=(0,r.useState)([]),[s,c]=(0,r.useState)([]),[u,p]=(0,r.useState)(!1),[m,b]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]),[h,g]=(0,r.useState)([{label:"loading",value:0,disabled:!0}]);(0,r.useEffect)(()=>{p(!0);try{x().then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));b(a);try{j().then(e=>{var a=e.data.map(e=>({label:e.name,value:e.id}));g(a),c(e.data),p(!1)})}catch(s){console.error(s),window.location.replace("/error")}})}catch(e){console.error(e),window.location.replace("/error")}},[]);const v=(0,l.TA)({enableReinitialize:!0,initialValues:{user:0,roleGroupTemp:[],display:1},onSubmit:e=>{p(!0),e.roleGroupTemp=d.default.map(e.roleGroupTemp,e=>e.id.value);try{f(e).then(()=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}v.resetForm()}});return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)("div",{id:"kt_content_container",className:"container-xxl",children:(0,N.jsx)("div",{className:"d-flex flex-column",children:(0,N.jsx)("div",{className:"row g-5 g-xl-8",children:(0,N.jsx)("div",{className:"card mb-5 mb-xl-8",children:(0,N.jsx)("div",{className:"card-body",children:(0,N.jsx)("div",{className:"row",children:(0,N.jsxs)("div",{className:"card",children:[u&&(0,N.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,N.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!u&&(0,N.jsx)("div",{className:"text-center mb-3",children:(0,N.jsx)("h3",{children:"User-Role List :"})}),!u&&s.map((e,a)=>(0,N.jsx)(w,{data:e},a)),!u&&(0,N.jsx)("div",{className:"text-center mt-10 mb-3",children:(0,N.jsx)("h3",{children:"To Create User-Role Mapping :"})}),!u&&(0,N.jsx)(i.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5 mb-5",id:"college_data_form",onSubmit:v.handleSubmit,children:(0,N.jsxs)("div",{className:"row",children:[(0,N.jsxs)("div",{className:"col",children:[(0,N.jsx)(t.ZP,{closeMenuOnSelect:!1,isMulti:!0,options:h,placeholder:"Select User",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Users",noOptionsMessage:()=>"No User Available",onChange:e=>{var a=e[0].value;v.setFieldValue("user",a)}}),v.touched.name&&v.errors.name&&(0,N.jsx)("div",{className:"fv-plugins-message-container",children:(0,N.jsx)("div",{className:"fv-help-block text-danger",children:"User name is required"})})]}),(0,N.jsx)("div",{className:"col",children:(0,N.jsx)(t.ZP,{closeMenuOnSelect:!1,isMulti:!0,options:m,placeholder:"Assign Role Group",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",onChange:e=>{e=e.map(e=>({id:e})),v.setFieldValue("roleGroupTemp",e)}})}),(0,N.jsx)("div",{className:"col-2",children:(0,N.jsx)("div",{className:"d-flex justify-content-end flex-shrink-0",children:(0,N.jsx)(n.Z,{type:"submit",disabled:v.isSubmitting||!v.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,N.jsx)(o.bzc,{})})})})]})})]})})})})})})})})})}}]);
//# sourceMappingURL=823.ec114d68.chunk.js.map