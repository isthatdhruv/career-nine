"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[857],{49510:(e,a,l)=>{l.r(a),l.d(a,{default:()=>j});var s=l(1413),i=l(28182),o=l(92506),n=l(72791),r=l(81343),t=l(21799),d=l(78820),c=l(16871),m=l(2272),p=l(45856),u=l(81724),h=l(10582),x=l(94552),b=l(80184);const g=u.Ry().shape({name:u.Z_().required("required")}),v=e=>{const[a,l]=(0,n.useState)(!1);e.data.id=null==e.data.id?0:e.data.id,e.data.name=null==e.data.name?"":e.data.name,e.data.roleRoleGroupMappings=null==e.data.roleRoleGroupMappings?"":e.data.roleRoleGroupMappings;var c={id:e.data.id,name:e.data.name,roleRoleGroupMappings:e.data.roleRoleGroupMappings,display:1};const u=(0,o.TA)({enableReinitialize:!0,initialValues:c,validationSchema:g,onSubmit:e=>{e.roleRoleGroupMappings=p.default.map(e.roleRoleGroupMappings,a=>({display:!0,role:{display:!0,name:a.label,id:a.value},roleGroup:e.id}));try{(0,x.Mx)(e).then(e=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}u.resetForm()}}),[h,v]=(0,n.useState)(e.role_data);(0,n.useEffect)(()=>{},[]);var f=p.default.map(e.data.roleRoleGroupMappings,e=>({label:e.role.name,value:e.role.id}));return(0,b.jsxs)(b.Fragment,{children:[a&&(0,b.jsxs)("span",{className:"indicator-progress mx-3 mt-5 mb-0",style:{display:"block"},children:["Please wait..."," ",(0,b.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!a&&(0,b.jsx)(r.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5",onSubmit:u.handleSubmit,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("input",(0,s.Z)((0,s.Z)({type:"text",autoComplete:"off"},u.getFieldProps("name")),{},{className:(0,i.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":u.touched.name&&u.errors.name},{"is-valid":u.touched.name&&!u.errors.name})})),(0,b.jsx)("input",{type:"hidden",defaultValue:e.data.id,autoComplete:"off"}),u.touched.name&&u.errors.name&&(0,b.jsx)("div",{className:"fv-plugins-message-container",children:(0,b.jsx)("div",{className:"fv-help-block text-danger",children:"Role group name is required"})})]}),(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)(m.ZP,{closeMenuOnSelect:!1,defaultValue:f,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",isMulti:!0,options:h,onChange:e=>{u.setFieldValue("roleRoleGroupMappings",e)}}),(0,b.jsx)("input",{type:"hidden",defaultValue:e.data.id,autoComplete:"off"})]}),(0,b.jsx)("div",{className:"col-2",children:(0,b.jsxs)("div",{className:"d-flex justify-content-end flex-shrink-0",children:[(0,b.jsx)(t.Z,{type:"submit",disabled:u.isSubmitting||!u.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,b.jsx)(d.bzc,{})}),(0,b.jsx)(t.Z,{type:"button",disabled:!1,onClick:()=>{l(!0),(0,x.KH)(e.data.id).then(()=>{window.location.reload()})},className:"btn btn-icon btn-danger  btn-active-color-primary btn-sm",children:(0,b.jsx)(d.YK6,{})})]})})]})},e.data.id)]})},f=u.Ry().shape({name:u.Z_().required("required")}),j=()=>{const[e,a]=(0,n.useState)([]),[l,u]=(0,n.useState)(!1),[g,j]=(0,n.useState)(!1),[N,y]=(0,n.useState)([{label:"Loading",value:0,disabled:!0}]);(0,c.TH)(),(0,h.aC)().currentUser;(0,n.useEffect)(()=>{u(!0);try{(0,x.tu)().then(e=>{var l=e.data.map(e=>({label:e.name,value:e.id}));y(l);try{(0,x.Uq)().then(e=>{a(e.data),u(!1)})}catch(s){console.error(s),window.location.replace("/error")}})}catch(e){console.error(e),window.location.replace("/error")}},[]);const R=(0,o.TA)({enableReinitialize:!0,initialValues:{name:"",roleRoleGroupMappings:[],display:1},validationSchema:f,onSubmit:e=>{e.roleRoleGroupMappings=p.default.map(e.roleRoleGroupMappings,a=>({display:!0,role:{display:!0,name:a.label,id:a.value},roleGroup:e.id})),u(!0);try{(0,x.Mx)(e).then(e=>{window.location.reload()})}catch(a){console.error(a),window.location.replace("/error")}R.resetForm()}});return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{id:"kt_content_container",className:"container-xxl",children:(0,b.jsx)("div",{className:"d-flex flex-column",children:(0,b.jsx)("div",{className:"row g-5 g-xl-8",children:(0,b.jsx)("div",{className:"card mb-5 mb-xl-8",children:(0,b.jsx)("div",{className:"card-body",children:(0,b.jsx)("div",{className:"row",children:(0,b.jsxs)("div",{className:"card",children:[l&&(0,b.jsxs)("span",{className:"indicator-progress",style:{display:"block"},children:["Please wait..."," ",(0,b.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]}),!l&&(0,b.jsx)("div",{className:"text-center mb-3",children:(0,b.jsx)("h3",{children:"Role Group-Role List :"})}),!l&&e.map((e,a)=>(0,b.jsx)(v,{data:e,role_data:N},a)),!l&&(0,b.jsx)("div",{className:"text-center mt-10 mb-3",children:(0,b.jsx)("h3",{children:"To Create Role Group-Role Mapping :"})}),!l&&(0,b.jsx)(r.Z,{className:"form fv-plugins-bootstrap5 fv-plugins-framework w-100 mt-5 mb-5",onSubmit:R.handleSubmit,children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("input",(0,s.Z)((0,s.Z)({type:"text",autoComplete:"off",placeholder:"Enter Role Group Name"},R.getFieldProps("name")),{},{className:(0,i.default)("form-control form-control-lg form-control-solid",{"is-invalid text-danger":R.touched.name&&R.errors.name},{"is-valid":R.touched.name&&!R.errors.name})})),R.touched.name&&R.errors.name&&(0,b.jsx)("div",{className:"fv-plugins-message-container",children:(0,b.jsx)("div",{className:"fv-help-block text-danger",children:"Role group name is required"})})]}),(0,b.jsx)("div",{className:"col",children:(0,b.jsx)(m.ZP,{closeMenuOnSelect:!1,isMulti:!0,options:N,placeholder:"Assign Roles",isOptionDisabled:e=>e.disabled,loadingMessage:()=>"Fetching Roles",noOptionsMessage:()=>"No Role Available",onChange:e=>{R.setFieldValue("roleRoleGroupMappings",e)}})}),(0,b.jsx)("div",{className:"col-2",children:(0,b.jsx)("div",{className:"d-flex justify-content-end flex-shrink-0",children:(0,b.jsx)(t.Z,{type:"submit",disabled:R.isSubmitting||!R.isValid,className:"btn btn-icon btn-dark  btn-active-color-primary btn-sm me-1",children:(0,b.jsx)(d.bzc,{})})})})]})})]})})})})})})})})}}}]);
//# sourceMappingURL=857.b6f120ad.chunk.js.map