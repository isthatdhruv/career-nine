import{r,j as e}from"./index-BPmcrkJf.js";import"./firebase-CdU9twii.js";const oe="/assets/game/hydro-tube-tutorial.mp4",S=[{id:0,name:"Pattern A",tileTypes:{1:"t-pipe",2:"bend",3:"bend",4:"straight",5:"straight",6:"bend",7:"straight",8:"bend",9:"bend",10:"bend",11:"straight",12:"bend",13:"straight",14:"bend",15:"straight",16:"bend"},solutions:[[90,90,0,0,0,270,90,90,270,90,90,180,0,270,90,90],[270,0,0,0,0,0,0,0,270,90,0,0,0,270,90,90],[90,90,0,0,0,270,90,90,270,90,90,180,0,270,180,90],[270,90,0,0,0,270,90,90,0,0,90,180,0,270,90,90]]},{id:1,name:"Pattern B",tileTypes:{1:"bend",2:"bend",3:"bend",4:"straight",5:"bend",6:"bend",7:"bend",8:"t-pipe",9:"bend",10:"t-pipe",11:"straight",12:"bend",13:"straight",14:"straight",15:"bend",16:"straight"},solutions:[[270,90,0,0,0,180,0,0,270,0,90,90,0,0,0,0]]},{id:2,name:"Pattern C",tileTypes:{1:"bend",2:"bend",3:"straight",4:"bend",5:"straight",6:"bend",7:"t-pipe",8:"straight",9:"bend",10:"straight",11:"bend",12:"straight",13:"bend",14:"straight",15:"straight",16:"bend"},solutions:[[270,90,0,0,0,270,0,0,0,90,180,0,270,90,90,90]]}];function le({userStudentId:C,playerName:g,onComplete:z,onExit:O}){const[u,G]=r.useState(!0),[o,_]=r.useState(!0),[Y,T]=r.useState(!1),[F,y]=r.useState({}),[d,b]=r.useState(!1),[W,j]=r.useState(0),[x,I]=r.useState([]),[V,m]=r.useState(null),[$,h]=r.useState(0),[k,R]=r.useState(0),[c,L]=r.useState(180),[P,Z]=r.useState(!1),[M,B]=r.useState(!1),[w,E]=r.useState(0),[Q,f]=r.useState(null),[A,v]=r.useState(0),[H,N]=r.useState(16),p=S[W];r.useEffect(()=>{if(o)j(2);else{const t=S.filter(i=>i.id!==2),s=Math.floor(Math.random()*t.length);j(t[s].id)}Z(!0)},[o]),r.useEffect(()=>{if(!P||u||o)return;const t=setInterval(()=>{L(s=>{const i=s-1;if(i===135||i===90||i===45){const n=Math.floor(Math.random()*16)+1;f(n),setTimeout(()=>f(null),5e3)}return s<=1?(clearInterval(t),B(!0),0):i})},1e3);return()=>clearInterval(t)},[P,o,u]),r.useEffect(()=>{if(!M)return;const t={userStudentId:C,playerName:g,patternsCompleted:x.length,totalPatterns:2,aimlessRotations:k,curiousClicks:w,tilesCorrect:A,totalTiles:H,timeSpentSeconds:180-c,timestamp:new Date().toISOString(),gameType:"hydro-tube"};console.log("Hydro tube game data:",t),z(t)},[M,x.length,k,w,A,H,c,C,g,z]);const U=r.useCallback(t=>{const s=Array.from({length:16},(i,n)=>t[n+1]||0);return p.solutions.some(i=>i.every((n,a)=>{const l=s[a];return n===0||n===l}))},[p.solutions]),X=r.useCallback(t=>{const s=Array.from({length:16},(n,a)=>t[a+1]||0);let i=0;return p.solutions.forEach(n=>{let a=0;n.forEach((l,re)=>{const se=s[re];(l===0||l===se)&&a++}),a>i&&(i=a)}),{correct:i,total:16}},[p.solutions]),q=()=>{if(o){T(!0),b(!1);return}const t=[...x,W];if(I(t),t.length>=2){v(16),B(!0);return}const s=S.filter(i=>i.id!==2&&!t.includes(i.id));s.length>0&&(j(s[0].id),y({}),b(!1),m(null),h(0),f(null))},D=r.useCallback(()=>{G(!1)},[]),J=r.useCallback(()=>{T(!1),_(!1),y({}),b(!1),m(null),h(0),f(null),L(180),I([]),R(0),E(0),v(0)},[]),K=t=>{if(!d){if(!o)if(t===Q&&(E(s=>s+1),f(null)),V===t){const s=$+1;h(s),s===4&&(R(i=>i+1),h(0))}else m(t),h(1);y(s=>{const n=((s[t]||0)+90)%360,a={...s,[t]:n};if(!o){const l=X(a);v(l.correct),N(l.total)}return U(a)&&setTimeout(()=>b(!0),500),a})}},ee=t=>{const s=Math.floor(t/60),i=t%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},te=t=>t==="straight"?e.jsxs("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%"},preserveAspectRatio:"none",children:[e.jsx("rect",{x:"35",y:"0",width:"30",height:"100",fill:"#60a5fa"}),e.jsx("rect",{x:"37",y:"0",width:"8",height:"100",fill:"#3b82f6",opacity:"0.4"}),e.jsx("rect",{x:"57",y:"0",width:"6",height:"100",fill:"#93c5fd",opacity:"0.6"}),e.jsx("rect",{x:"48",y:"0",width:"4",height:"100",fill:"#dbeafe",opacity:"0.5"}),e.jsx("rect",{x:"32",y:"15",width:"36",height:"5",fill:"#3b82f6",rx:"2"}),e.jsx("rect",{x:"32",y:"47",width:"36",height:"5",fill:"#3b82f6",rx:"2"}),e.jsx("rect",{x:"32",y:"80",width:"36",height:"5",fill:"#3b82f6",rx:"2"})]}):t==="bend"?e.jsxs("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%"},preserveAspectRatio:"none",children:[e.jsx("path",{d:"M 35 100 L 35 50 Q 35 35 50 35 L 100 35 L 100 65 L 50 65 Q 65 65 65 50 L 65 100 Z",fill:"#60a5fa"}),e.jsx("path",{d:"M 39 100 L 39 50 Q 39 39 50 39 L 100 39",stroke:"#3b82f6",strokeWidth:"10",fill:"none",opacity:"0.4"}),e.jsx("path",{d:"M 61 100 L 61 50 Q 61 46 65 46 L 100 46",stroke:"#93c5fd",strokeWidth:"8",fill:"none",opacity:"0.6"}),e.jsx("path",{d:"M 48 100 L 48 50 Q 48 42 54 42 L 100 42",stroke:"#dbeafe",strokeWidth:"5",fill:"none",opacity:"0.5"}),e.jsx("rect",{x:"32",y:"82",width:"36",height:"5",fill:"#3b82f6",rx:"2"}),e.jsx("rect",{x:"82",y:"32",width:"5",height:"36",fill:"#3b82f6",rx:"2"})]}):t==="t-pipe"?e.jsxs("svg",{viewBox:"0 0 100 100",style:{width:"100%",height:"100%"},preserveAspectRatio:"none",children:[e.jsx("rect",{x:"35",y:"50",width:"30",height:"50",fill:"#60a5fa"}),e.jsx("rect",{x:"0",y:"35",width:"100",height:"30",fill:"#60a5fa"}),e.jsx("circle",{cx:"50",cy:"50",r:"22",fill:"#3b82f6"}),e.jsx("circle",{cx:"50",cy:"50",r:"18",fill:"#60a5fa"}),e.jsx("rect",{x:"37",y:"50",width:"8",height:"50",fill:"#3b82f6",opacity:"0.4"}),e.jsx("rect",{x:"0",y:"37",width:"100",height:"8",fill:"#3b82f6",opacity:"0.4"}),e.jsx("rect",{x:"57",y:"50",width:"6",height:"50",fill:"#93c5fd",opacity:"0.6"}),e.jsx("rect",{x:"0",y:"57",width:"100",height:"6",fill:"#93c5fd",opacity:"0.6"}),e.jsx("circle",{cx:"46",cy:"46",r:"10",fill:"#93c5fd",opacity:"0.5"}),e.jsx("circle",{cx:"48",cy:"48",r:"6",fill:"#dbeafe",opacity:"0.6"}),e.jsx("rect",{x:"32",y:"80",width:"36",height:"5",fill:"#3b82f6",rx:"2"}),e.jsx("rect",{x:"15",y:"32",width:"5",height:"36",fill:"#3b82f6",rx:"2"}),e.jsx("rect",{x:"80",y:"32",width:"5",height:"36",fill:"#3b82f6",rx:"2"})]}):null,ie=x.length/2*100;return u?e.jsx("div",{style:{minHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0c4a6e 0%, #075985 30%, #0369a1 50%, #0284c7 75%, #0ea5e9 100%)",padding:"16px",position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(12, 74, 110, 0.95), rgba(7, 89, 133, 0.95))",borderRadius:"24px",padding:"24px",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",border:"2px solid rgba(56, 189, 248, 0.3)",maxWidth:"600px",width:"100%",textAlign:"center",zIndex:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",marginBottom:"16px"},children:[e.jsx("span",{style:{fontSize:"32px"},children:"ðŸŽ¬"}),e.jsx("h1",{style:{fontSize:"24px",fontWeight:800,color:"#7dd3fc",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"How To Play"})]}),e.jsxs("p",{style:{color:"#38bdf8",fontSize:"14px",marginBottom:"20px"},children:["Watch this short tutorial before starting, ",g,"!"]}),e.jsx("div",{style:{background:"#000",borderRadius:"16px",overflow:"hidden",marginBottom:"20px",border:"3px solid rgba(56, 189, 248, 0.4)",boxShadow:"0 8px 30px rgba(0,0,0,0.4)"},children:e.jsx("video",{src:oe,controls:!0,autoPlay:!0,style:{width:"100%",maxHeight:"300px",display:"block"},onEnded:D,children:"Your browser does not support the video tag."})}),e.jsx("div",{style:{background:"rgba(56, 189, 248, 0.2)",borderRadius:"12px",padding:"12px 16px",marginBottom:"20px",border:"1px solid rgba(56, 189, 248, 0.3)"},children:e.jsxs("p",{style:{color:"#7dd3fc",fontSize:"13px"},children:["ðŸš° Rotate the pipes to connect the water flow!",e.jsx("br",{}),e.jsxs("span",{style:{color:"rgba(186, 230, 253, 0.8)"},children:["After the video: ",e.jsx("strong",{children:"1 practice pattern"})," â†’"," ",e.jsx("strong",{children:"2 main patterns"})]})]})}),e.jsxs("button",{onClick:D,style:{width:"100%",padding:"14px 24px",fontSize:"16px",fontWeight:700,color:"#0c4a6e",background:"linear-gradient(to right, #38bdf8, #0ea5e9, #38bdf8)",border:"2px solid rgba(125, 211, 252, 0.5)",borderRadius:"14px",cursor:"pointer",boxShadow:"0 8px 20px rgba(56, 189, 248, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:["I Understand, Start Practice!",e.jsx("span",{style:{fontSize:"18px"},children:"ðŸŽ¯"})]})]})}):Y?e.jsx("div",{style:{minHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #0c4a6e 0%, #075985 30%, #0369a1 50%, #0284c7 75%, #0ea5e9 100%)",padding:"16px",position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, rgba(12, 74, 110, 0.95), rgba(7, 89, 133, 0.95))",borderRadius:"24px",padding:"32px",boxShadow:"0 20px 50px rgba(0,0,0,0.5)",border:"2px solid rgba(34, 197, 94, 0.4)",maxWidth:"420px",width:"100%",textAlign:"center",zIndex:10},children:[e.jsx("div",{style:{marginBottom:"16px"},children:e.jsx("div",{style:{width:"80px",height:"80px",margin:"0 auto",background:"linear-gradient(135deg, #22c55e, #16a34a)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 8px 20px rgba(34, 197, 94, 0.3)"},children:e.jsx("span",{style:{fontSize:"40px"},children:"âœ…"})})}),e.jsx("h1",{style:{fontSize:"28px",fontWeight:800,color:"#4ade80",marginBottom:"4px",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Practice Complete!"}),e.jsx("p",{style:{color:"#86efac",fontSize:"16px",marginBottom:"24px"},children:"Great job solving Pattern C!"}),e.jsx("div",{style:{background:"rgba(56, 189, 248, 0.2)",borderRadius:"12px",padding:"12px 16px",marginBottom:"24px",border:"1px solid rgba(56, 189, 248, 0.3)"},children:e.jsxs("p",{style:{color:"#7dd3fc",fontSize:"14px",fontWeight:600},children:["ðŸŽ® Ready for the real challenge?",e.jsx("br",{}),e.jsx("span",{style:{color:"rgba(186, 230, 253, 0.8)",fontWeight:400},children:"2 patterns await! You have 3 minutes."})]})}),e.jsxs("button",{onClick:J,style:{width:"100%",padding:"16px 24px",fontSize:"18px",fontWeight:700,color:"#0c4a6e",background:"linear-gradient(to right, #38bdf8, #0ea5e9, #38bdf8)",border:"2px solid rgba(125, 211, 252, 0.5)",borderRadius:"14px",cursor:"pointer",boxShadow:"0 8px 20px rgba(56, 189, 248, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px"},children:["Start Main Game",e.jsx("span",{style:{fontSize:"20px"},children:"ðŸ’§"})]})]})}):e.jsxs("div",{style:{minHeight:"100vh",width:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",background:"linear-gradient(135deg, #0c4a6e 0%, #075985 30%, #0369a1 50%, #0284c7 75%, #0ea5e9 100%)",fontFamily:"system-ui, -apple-system, sans-serif",padding:"16px"},children:[e.jsx("div",{style:{position:"absolute",inset:0,opacity:.1,backgroundImage:`url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Ccircle cx='30' cy='30' r='20' fill='none' stroke='%2338bdf8' stroke-width='2'/%3E%3C/svg%3E")`,pointerEvents:"none"}}),e.jsx("div",{style:{position:"absolute",top:"10%",left:"5%",fontSize:"48px",opacity:.3,animation:"bounce 2s infinite"},children:"ðŸ’§"}),e.jsx("div",{style:{position:"absolute",bottom:"15%",right:"8%",fontSize:"40px",opacity:.25,animation:"bounce 2.5s infinite"},children:"ðŸ’§"}),!o&&e.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"8px",background:"linear-gradient(to right, #0c4a6e, #075985, #0c4a6e)",zIndex:30},children:e.jsx("div",{style:{height:"100%",width:`${ie}%`,background:"linear-gradient(to right, #38bdf8, #7dd3fc, #38bdf8)",transition:"width 0.3s ease-out",boxShadow:"0 0 10px rgba(56, 189, 248, 0.5)"}})}),e.jsxs("div",{style:{position:"absolute",top:"20px",left:"16px",zIndex:20,background:"rgba(12, 74, 110, 0.9)",padding:"10px 16px",borderRadius:"12px",border:"1px solid rgba(56, 189, 248, 0.4)",display:"flex",alignItems:"center",gap:"10px",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸš°"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(186, 230, 253, 0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:"Plumber"}),e.jsx("div",{style:{color:"#7dd3fc",fontWeight:700,fontSize:"14px"},children:g})]})]}),e.jsx("div",{style:{position:"absolute",top:"20px",left:"50%",transform:"translateX(-50%)",zIndex:20,background:o?"linear-gradient(to bottom, rgba(234, 179, 8, 0.95), rgba(202, 138, 4, 0.95))":c<30?"linear-gradient(to bottom, rgba(220, 38, 38, 0.95), rgba(185, 28, 28, 0.95))":"linear-gradient(to bottom, rgba(12, 74, 110, 0.95), rgba(7, 89, 133, 0.95))",padding:"10px 24px",borderRadius:"14px",border:o?"2px solid rgba(253, 224, 71, 0.5)":c<30?"2px solid rgba(248, 113, 113, 0.5)":"2px solid rgba(56, 189, 248, 0.5)",boxShadow:"0 4px 20px rgba(0,0,0,0.4)"},children:o?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"ðŸŽ¯"}),e.jsx("span",{style:{color:"#fef08a",fontWeight:700,fontSize:"18px",textTransform:"uppercase",letterSpacing:"1px"},children:"Practice"})]}):e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"20px"},children:"â±ï¸"}),e.jsx("span",{style:{color:c<30?"#fca5a5":"#7dd3fc",fontWeight:900,fontSize:"24px",animation:c<30?"pulse 1s infinite":"none"},children:ee(c)})]})}),e.jsx("div",{style:{position:"absolute",top:"20px",right:"16px",zIndex:50,display:"flex",gap:"10px"},children:e.jsx("button",{onClick:O,style:{background:"linear-gradient(to bottom right, #991b1b, #7f1d1d)",color:"white",padding:"10px",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.4)",cursor:"pointer",fontSize:"18px",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},title:"Exit",children:"âœ•"})}),!o&&e.jsxs("div",{style:{position:"absolute",top:"80px",left:"16px",zIndex:20,display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{background:"rgba(12, 74, 110, 0.9)",padding:"12px 16px",borderRadius:"12px",border:"1px solid rgba(251, 191, 36, 0.4)",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(253, 230, 138, 0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:"Aimless Rotations"}),e.jsxs("div",{style:{color:"#fbbf24",fontWeight:700,fontSize:"20px",display:"flex",alignItems:"center",gap:"6px"},children:["ðŸ”„ ",k]})]}),e.jsxs("div",{style:{background:"rgba(12, 74, 110, 0.9)",padding:"12px 16px",borderRadius:"12px",border:"1px solid rgba(192, 132, 252, 0.4)",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(216, 180, 254, 0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:"Curious Clicks"}),e.jsxs("div",{style:{color:"#c084fc",fontWeight:700,fontSize:"20px",display:"flex",alignItems:"center",gap:"6px"},children:["âœ¨ ",w]})]}),e.jsxs("div",{style:{background:"rgba(12, 74, 110, 0.9)",padding:"12px 16px",borderRadius:"12px",border:"1px solid rgba(74, 222, 128, 0.4)",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(134, 239, 172, 0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:"Pattern"}),e.jsx("div",{style:{color:"#4ade80",fontWeight:700,fontSize:"16px"},children:p.name}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(134, 239, 172, 0.6)",marginTop:"2px"},children:[x.length,"/2 Complete"]})]})]}),o&&e.jsx("div",{style:{position:"absolute",top:"80px",left:"16px",zIndex:20},children:e.jsxs("div",{style:{background:"rgba(12, 74, 110, 0.9)",padding:"12px 16px",borderRadius:"12px",border:"1px solid rgba(253, 224, 71, 0.4)",boxShadow:"0 4px 15px rgba(0,0,0,0.3)"},children:[e.jsx("div",{style:{fontSize:"10px",color:"rgba(253, 224, 71, 0.7)",textTransform:"uppercase",letterSpacing:"1px"},children:"Practice Pattern"}),e.jsx("div",{style:{color:"#fef08a",fontWeight:700,fontSize:"16px"},children:"Pattern C"}),e.jsx("div",{style:{fontSize:"11px",color:"rgba(253, 224, 71, 0.6)",marginTop:"2px"},children:"No time limit"})]})}),e.jsxs("div",{style:{position:"relative",zIndex:10,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{position:"absolute",top:"-100px",left:"-10px",zIndex:15},children:e.jsxs("svg",{viewBox:"0 0 120 150",style:{width:"100px",height:"120px",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.3))"},children:[e.jsx("rect",{x:"25",y:"5",width:"70",height:"22",fill:"#94a3b8",stroke:"#64748b",strokeWidth:"3",rx:"11"}),e.jsx("circle",{cx:"40",cy:"16",r:"5",fill:"#cbd5e1"}),e.jsx("circle",{cx:"80",cy:"16",r:"5",fill:"#cbd5e1"}),e.jsx("ellipse",{cx:"60",cy:"50",rx:"32",ry:"28",fill:"#e0f2fe",stroke:"#bae6fd",strokeWidth:"3"}),e.jsx("circle",{cx:"50",cy:"44",r:"4",fill:"#334155"}),e.jsx("circle",{cx:"70",cy:"44",r:"4",fill:"#334155"}),e.jsx("path",{d:"M 48 56 Q 60 64 72 56",stroke:"#334155",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("rect",{x:"48",y:"15",width:"24",height:"18",fill:"#60a5fa",stroke:"#3b82f6",strokeWidth:"3",rx:"9"}),e.jsx("circle",{cx:"60",cy:"24",r:"5",fill:"#93c5fd"}),e.jsx("ellipse",{cx:"54",cy:"42",rx:"14",ry:"18",fill:"#ffffff",opacity:"0.5"}),e.jsx("path",{d:"M 54 72 Q 54 82 60 92 Q 60 98 60 105",stroke:"#bae6fd",strokeWidth:"16",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M 56 72 Q 56 82 60 92 Q 60 98 60 105",stroke:"#e0f2fe",strokeWidth:"12",fill:"none",strokeLinecap:"round"}),e.jsx("ellipse",{cx:"60",cy:"105",rx:"10",ry:"6",fill:"#bae6fd",stroke:"#93c5fd",strokeWidth:"2"}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"waterfallGradient",x1:"0",x2:"0",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#3b82f6",stopOpacity:"0.8"}),e.jsx("stop",{offset:"100%",stopColor:"#93c5fd",stopOpacity:"0.1"})]})}),e.jsx("path",{d:"M 60 105 L 60 160",stroke:"url(#waterfallGradient)",strokeWidth:"14",strokeLinecap:"butt"}),e.jsx("path",{d:"M 60 105 L 60 160",stroke:"#60a5fa",strokeWidth:"8",strokeOpacity:"0.5",strokeLinecap:"butt"}),e.jsx("path",{d:"M 58 105 L 58 160",stroke:"white",strokeWidth:"2",strokeDasharray:"5 10",strokeOpacity:"0.4",children:e.jsx("animate",{attributeName:"stroke-dashoffset",values:"15;0",dur:"0.2s",repeatCount:"indefinite"})}),e.jsx("path",{d:"M 62 105 L 62 160",stroke:"white",strokeWidth:"2",strokeDasharray:"7 12",strokeOpacity:"0.3",children:e.jsx("animate",{attributeName:"stroke-dashoffset",values:"19;0",dur:"0.25s",repeatCount:"indefinite"})})]})}),e.jsxs("div",{style:{position:"relative",background:d?"linear-gradient(135deg, #059669 0%, #047857 100%)":"linear-gradient(135deg, #475569 0%, #334155 100%)",padding:"16px",borderRadius:"20px",boxShadow:d?"0 15px 50px rgba(5, 150, 105, 0.5)":"0 15px 50px rgba(0,0,0,0.4)",border:d?"4px solid #10b981":"4px solid #64748b",transition:"all 0.5s ease"},children:[d&&e.jsxs("div",{style:{position:"absolute",inset:0,background:"rgba(5, 150, 105, 0.9)",backdropFilter:"blur(4px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:30,borderRadius:"16px"},children:[e.jsx("span",{style:{fontSize:"64px",marginBottom:"16px",animation:"bounce 1s infinite"},children:"ðŸŽ‰"}),e.jsx("h2",{style:{fontSize:"28px",fontWeight:800,color:"white",marginBottom:"8px",textShadow:"0 2px 4px rgba(0,0,0,0.3)"},children:"Perfect Flow!"}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.9)",fontSize:"16px",marginBottom:"8px"},children:[p.name," Complete!"]}),e.jsxs("p",{style:{color:"rgba(255,255,255,0.7)",fontSize:"14px",marginBottom:"24px"},children:[x.length+1," of 2 patterns done"]}),e.jsx("button",{onClick:q,style:{padding:"14px 32px",fontSize:"18px",fontWeight:700,color:"#059669",background:"white",border:"none",borderRadius:"14px",cursor:"pointer",boxShadow:"0 8px 20px rgba(0,0,0,0.3)"},children:x.length+1>=2?"Finish! ðŸ†":"Next Pattern ðŸ’§"})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 80px)",gridTemplateRows:"repeat(4, 80px)",gap:"4px"},children:Array.from({length:16}).map((t,s)=>{const i=s+1,n=F[i]||0,a=p.tileTypes[i],l=Q===i;return e.jsx("div",{onClick:()=>K(i),style:{width:"80px",height:"80px",background:l?"linear-gradient(145deg, #fef3c7 0%, #fde68a 100%)":"linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%)",cursor:d?"default":"pointer",transform:`rotate(${n}deg)`,transition:"transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",borderRadius:"8px",boxShadow:l?"inset 0 0 15px #f59e0b, 0 0 20px #f59e0b":"inset 0 2px 6px rgba(0,0,0,0.08)",border:l?"3px solid #f59e0b":d?"2px solid #10b981":"1px solid #e2e8f0",animation:l?"pulse 1.5s infinite":"none"},children:te(a)},i)})})]}),e.jsx("div",{style:{marginTop:"-10px",display:"flex",justifyContent:"flex-end",width:"100%",paddingRight:"20px"},children:e.jsxs("svg",{viewBox:"0 0 150 160",style:{width:"100px",height:"110px",filter:"drop-shadow(0 4px 8px rgba(0,0,0,0.3))",animation:d?"bounce 1s infinite":"none"},children:[e.jsx("path",{d:"M 32 28 Q 75 6 118 28",stroke:"#94a3b8",strokeWidth:"7",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"32",cy:"28",r:"6",fill:"#64748b",stroke:"#475569",strokeWidth:"2"}),e.jsx("circle",{cx:"118",cy:"28",r:"6",fill:"#64748b",stroke:"#475569",strokeWidth:"2"}),e.jsx("path",{d:"M 22 35 L 12 125 Q 12 142 28 148 L 122 148 Q 138 142 138 125 L 128 35 Z",fill:"#f87171",stroke:"#ef4444",strokeWidth:"3"}),e.jsx("ellipse",{cx:"75",cy:"35",rx:"56",ry:"14",fill:"#fca5a5",stroke:"#f87171",strokeWidth:"2"}),e.jsx("ellipse",{cx:"75",cy:"35",rx:"50",ry:"11",fill:"#fecaca"}),e.jsx("ellipse",{cx:"42",cy:"75",rx:"18",ry:"40",fill:"#fee2e2",opacity:"0.7"}),e.jsx("circle",{cx:"65",cy:"70",r:"4",fill:"#7f1d1d"}),e.jsx("circle",{cx:"85",cy:"70",r:"4",fill:"#7f1d1d"}),e.jsx("path",{d:"M 62 84 Q 75 92 88 84",stroke:"#7f1d1d",strokeWidth:"3",fill:"none",strokeLinecap:"round"}),e.jsx("path",{d:"M 28 105 L 20 130 Q 20 138 32 142 L 118 142 Q 130 138 130 130 L 122 105 Z",fill:"#60a5fa",opacity:"0.9"}),e.jsx("ellipse",{cx:"75",cy:"115",rx:"38",ry:"10",fill:"#93c5fd",opacity:"0.9"}),e.jsxs("ellipse",{cx:"75",cy:"122",rx:"32",ry:"6",fill:"#bfdbfe",opacity:"0.7",children:[e.jsx("animate",{attributeName:"rx",values:"32;36;32",dur:"1.5s",repeatCount:"indefinite"}),e.jsx("animate",{attributeName:"opacity",values:"0.7;0.4;0.7",dur:"1.5s",repeatCount:"indefinite"})]})]})})]}),e.jsx("style",{children:`
        @keyframes pulse {
          0% { transform: scale(1); box-shadow: inset 0 0 15px #f59e0b, 0 0 20px #f59e0b; }
          50% { transform: scale(1.05); box-shadow: inset 0 0 20px #f59e0b, 0 0 30px #f59e0b; }
          100% { transform: scale(1); box-shadow: inset 0 0 15px #f59e0b, 0 0 20px #f59e0b; }
        }
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-10px); }
        }
      `})]})}export{le as HydroTubeGame};
