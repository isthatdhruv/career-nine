const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/JungleSpotGame-EQJj7maj.js","assets/index-c2dQya25.js","assets/firebase-CdU9twii.js","assets/index-DBkz-poX.css","assets/RabbitPathGame-C5YWUD-M.js","assets/HydroTubeGame-D41-Dzun.js"])))=>i.map(i=>d[i]);
import{j as t,r as u,_ as oe,d as De,c as Je,u as _e,a as He,b as Ue,R as U}from"./index-c2dQya25.js";import"./firebase-CdU9twii.js";const Ye=u.lazy(()=>oe(()=>import("./JungleSpotGame-EQJj7maj.js"),__vite__mapDeps([0,1,2,3])).then(o=>({default:o.JungleSpotGame}))),Ve=u.lazy(()=>oe(()=>import("./RabbitPathGame-C5YWUD-M.js"),__vite__mapDeps([4,1,2,3])).then(o=>({default:o.RabbitPathGame}))),Ke=u.lazy(()=>oe(()=>import("./HydroTubeGame-D41-Dzun.js"),__vite__mapDeps([5,1,2,3])).then(o=>({default:o.HydroTubeGame}))),Xe=()=>t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"white"},children:t.jsx("div",{className:"spinner-border text-primary",role:"status",children:t.jsx("span",{className:"visually-hidden",children:"Loading game..."})})});function Ze({gameCode:o,userStudentId:k,playerName:y,onComplete:T,onExit:N}){const W=()=>{switch(o){case 101:return t.jsx(Ye,{userStudentId:k,playerName:y,onComplete:T,onExit:N});case 102:return t.jsx(Ve,{userStudentId:k,playerName:y,onComplete:T,onExit:N});case 103:return t.jsx(Ke,{userStudentId:k,playerName:y,onComplete:T,onExit:N});default:return t.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#fee2e2"},children:t.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"12px",textAlign:"center",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[t.jsx("h2",{style:{color:"#dc2626",marginBottom:"1rem"},children:"Unknown Game"}),t.jsxs("p",{style:{color:"#4b5563",marginBottom:"1rem"},children:["Game code ",t.jsx("strong",{children:o})," is not recognized."]}),t.jsx("button",{onClick:N,style:{background:"#dc2626",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"8px",fontWeight:"bold",cursor:"pointer"},children:"Exit"})]})})}};return t.jsx(u.Suspense,{fallback:t.jsx(Xe,{}),children:W()})}function et({gameCode:o,userStudentId:k,playerName:y,onComplete:T,onExit:N}){const{saveAnimalReaction:W,saveRabbitPath:h,saveHydroTube:P}=De(),z=u.useCallback(async g=>{console.log("=== Game Complete Handler Called ==="),console.log("Received data:",g),console.log("Game code:",o);try{switch(o){case 101:console.log("Saving Jungle-Spot via DataContext..."),await W({totalTrials:g.totalTrials,trialMs:g.trialMs,target:g.target,targetsShown:g.targetsShown,hits:g.hits,misses:g.misses,falsePositives:g.falsePositives,hitRTsMs:g.hitRTsMs||[]},k),console.log("Jungle-Spot results saved via DataContext!");break;case 102:console.log("Saving Rabbit-Path via DataContext..."),await h({score:g.score,totalRounds:g.totalRounds,roundsPlayed:g.roundsPlayed,history:g.history},k),console.log("Rabbit-Path results saved via DataContext!");break;case 103:console.log("Saving Hydro-Tube via DataContext..."),await P({patternsCompleted:g.patternsCompleted,totalPatterns:g.totalPatterns,aimlessRotations:g.aimlessRotations,curiousClicks:g.curiousClicks,tilesCorrect:g.tilesCorrect,totalTiles:g.totalTiles,timeSpentSeconds:g.timeSpentSeconds},k),console.log("Hydro-Tube results saved via DataContext!");break;default:console.warn("Unknown game code:",o)}}catch(G){console.error("Failed to save game results:",G),console.error("Error message:",G?.message)}T()},[T,k,o,W,h,P]),Y=u.useCallback(()=>{N()},[N]);return t.jsx("div",{style:{position:"fixed",inset:0,zIndex:9999,backgroundColor:"white",overflowY:"auto",width:"100%",height:"100%"},children:t.jsx(Ze,{gameCode:o,userStudentId:k,playerName:y,onComplete:z,onExit:Y})})}const nt=()=>{const{sectionId:o,questionIndex:k}=Je(),y=_e(),{assessmentData:T,assessmentConfig:N}=He(),W=N?.showTimer!==!1;Ue();const[h,P]=u.useState(null),[z,Y]=u.useState([]),[g,G]=u.useState(0),[ce,de]=u.useState([]),[ue,ge]=u.useState(null),[xe,F]=u.useState(!1),[V,me]=u.useState(()=>{const e=localStorage.getItem("assessmentSeenSectionInstructions");return e?new Set(JSON.parse(e)):new Set}),[fe,K]=u.useState(!1),[X,pe]=u.useState([]),[he,Z]=u.useState(!1),[Q,ee]=u.useState(null),[R,te]=u.useState(()=>{const e=localStorage.getItem("assessmentAnswers");return e?JSON.parse(e):{}}),[A,ie]=u.useState(()=>{const e=localStorage.getItem("assessmentRankingAnswers");return e?JSON.parse(e):{}}),[D,be]=u.useState(()=>{const e=localStorage.getItem("assessmentSavedForLater");if(e){const s=JSON.parse(e),i={};for(const l in s)i[l]=new Set(s[l]);return i}return{}}),[J,B]=u.useState(()=>{const e=localStorage.getItem("assessmentSkipped");if(e){const s=JSON.parse(e),i={};for(const l in s)i[l]=new Set(s[l]);return i}return{}}),[se,Se]=u.useState(()=>{const e=localStorage.getItem("assessmentElapsedTime");return e?parseInt(e):0}),[O,ye]=u.useState(()=>{const e=localStorage.getItem("assessmentTextAnswers");return e?JSON.parse(e):{}}),[je,_]=u.useState(null),[E,we]=u.useState(()=>{const e=localStorage.getItem("assessmentCompletedGames");return e?JSON.parse(e):{}});u.useEffect(()=>{if(T&&T[0]){const e=T[0];P(e);const s=e.sections.find(i=>String(i.section.sectionId)===String(o));if(!s)return;ge(s),Y(s.questions||[]),G(Number(k)||0),de(e.languages||[])}},[o,k,T]),u.useEffect(()=>{localStorage.setItem("assessmentAnswers",JSON.stringify(R))},[R]),u.useEffect(()=>{localStorage.setItem("assessmentRankingAnswers",JSON.stringify(A))},[A]),u.useEffect(()=>{const e={};for(const s in D)e[s]=Array.from(D[s]);localStorage.setItem("assessmentSavedForLater",JSON.stringify(e))},[D]),u.useEffect(()=>{const e={};for(const s in J)e[s]=Array.from(J[s]);localStorage.setItem("assessmentSkipped",JSON.stringify(e))},[J]),u.useEffect(()=>{localStorage.setItem("assessmentElapsedTime",String(se))},[se]),u.useEffect(()=>{localStorage.setItem("assessmentCompletedGames",JSON.stringify(E))},[E]),u.useEffect(()=>{localStorage.setItem("assessmentTextAnswers",JSON.stringify(O))},[O]),u.useEffect(()=>{localStorage.setItem("assessmentSeenSectionInstructions",JSON.stringify(Array.from(V)))},[V]),u.useEffect(()=>{if(!o||!h||V.has(o))return;const e=h.sections.find(s=>String(s.section.sectionId)===String(o));if(e?.instruction&&e.instruction.length>0){const s=l=>{if(!l)return!1;const n=l.trim().toUpperCase();return n==="NA"||n==="N/A"},i=e.instruction.filter(l=>l.instructionText&&!s(l.instructionText)).map(l=>({text:l.instructionText,language:l.language?.languageName||"English"}));i.length>0&&(pe(i),K(!0))}me(s=>{const i=new Set(s);return i.add(o),i})},[o,h]),u.useEffect(()=>{const e=setInterval(()=>{Se(s=>s+1)},1e3);return()=>clearInterval(e)},[]);const Ie=e=>{const s=Math.floor(e/3600),i=Math.floor(e%3600/60),l=e%60;return`${s.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};if(!h||!z.length)return t.jsx("div",{className:"text-center mt-5",children:"No questions found"});const p=z[g],m=p.questionnaireQuestionId,v=R[o]?.[m]||[],j=ce.filter(e=>e.language.languageId===100?!0:p.question.languageQuestions?.some(s=>s.language.languageId===e.language.languageId)),ke=()=>h?h.sections.findIndex(s=>String(s.section.sectionId)===String(o))===h.sections.length-1:!1,re=()=>ke()&&g===z.length-1,ae=()=>{if(!h)return!1;for(const e of h.sections){const s=String(e.section.sectionId);for(const i of e.questions){const l=i.questionnaireQuestionId,n=i.question.questionType==="ranking",a=i.question.questionType==="text"||i.question.isMQTtyped===!0;let c=!1;if(a){const r=O[s]?.[l]||{};c=Object.values(r).some(x=>x.trim().length>0)}else if(n){const r=A[s]?.[l]||{};c=Object.keys(r).length>0}else c=R[s]?.[l]?.length>0;if(!c)return!1}}return!0},ve=()=>{const e=[];if(h&&h.sections)for(const n of h.sections){const a=String(n.section.sectionId);for(const c of n.questions){const r=c.questionnaireQuestionId,x=c.question.questionType==="ranking";if(c.question.questionType==="text"||c.question.isMQTtyped===!0){const f=O[a]?.[r]||{},b=c.question.options||[];for(const[,w]of Object.entries(f)){const q=w.trim();if(q){const I=q.replace(/\s+/g," ").toLowerCase(),S=b.find(C=>(C.optionText||"").trim().replace(/\s+/g," ").toLowerCase()===I);S?e.push({questionnaireQuestionId:r,optionId:S.optionId}):e.push({questionnaireQuestionId:r,textResponse:q})}}}else if(x){const f=A[a]?.[r]||{};for(const[b,w]of Object.entries(f)){const q={questionnaireQuestionId:r,optionId:parseInt(b),rankOrder:w};e.push(q)}}else{const f=R[a]?.[r]||[];if(f.length>0)for(const b of f){const w={questionnaireQuestionId:r,optionId:b};e.push(w)}}}}const s=localStorage.getItem("userStudentId")?parseInt(localStorage.getItem("userStudentId")):null,i=localStorage.getItem("assessmentId")?parseInt(localStorage.getItem("assessmentId")):null;return{userStudentId:s,assessmentId:i,status:"completed",answers:e}},Te=()=>{B(e=>{const s=new Set(e[o]||[]);return s.add(m),{...e,[o]:s}})},qe=e=>{const s=v.length,i=v.includes(e),l=p.question.maxOptionsAllowed,n=!i&&l>0&&s+1===l;te(a=>{const c=a[o]||{},r=c[m]||[];if(r.includes(e)){const x=r.filter(d=>d!==e);return{...a,[o]:{...c,[m]:x}}}else if(p.question.maxOptionsAllowed===0||r.length<p.question.maxOptionsAllowed){const x=[...r,e];return{...a,[o]:{...c,[m]:x}}}return a}),B(a=>{const c=new Set(a[o]||[]);return c.delete(m),{...a,[o]:c}}),n&&setTimeout(()=>{const a=$(o,g,m);a&&y(`/studentAssessment/sections/${a.sectionId}/questions/${a.questionIndex}`)},400)},Ce=(e,s)=>{const i=A[o]?.[m]||{},l=Object.keys(i).length,n=p.question.maxOptionsAllowed,c=s!==null&&!i[e]&&l+1===n;ie(r=>{const x=r[o]||{},d=x[m]||{};if(s===null){const{[e]:f,...b}=d;return{...r,[o]:{...x,[m]:b}}}else return{...r,[o]:{...x,[m]:{...d,[e]:s}}}}),s!==null&&B(r=>{const x=new Set(r[o]||[]);return x.delete(m),{...r,[o]:x}}),c&&setTimeout(()=>{const r=$(o,g,m);r&&y(`/studentAssessment/sections/${r.sectionId}/questions/${r.questionIndex}`)},400)},Ae=e=>{const s=A[o]?.[m]||{},i=new Set(Object.entries(s).filter(([a])=>parseInt(a)!==e).map(([,a])=>a)),l=p.question.maxOptionsAllowed,n=[];for(let a=1;a<=l;a++)i.has(a)||n.push(a);return n},Ne=()=>{be(s=>{const i=new Set(s[o]||[]);return i.add(m),{...s,[o]:i}}),te(s=>{const i=s[o]||{},{[m]:l,...n}=i;return{...s,[o]:n}}),ie(s=>{const i=s[o]||{},{[m]:l,...n}=i;return{...s,[o]:n}});const e=$(o,g,m);e&&y(`/studentAssessment/sections/${e.sectionId}/questions/${e.questionIndex}`)},Re=()=>{v.length===0&&Te();const e=$(o,g);e?y(`/studentAssessment/sections/${e.sectionId}/questions/${e.questionIndex}`):ze()},Oe=()=>{if(g>0){const e=g-1;G(e),y(`/studentAssessment/sections/${o}/questions/${e}`)}},ze=()=>{const e=h.sections.findIndex(i=>String(i.section.sectionId)===String(o)),s=h.sections[e+1];y(s?`/studentAssessment/sections/${s.section.sectionId}/questions/0`:"/studentAssessment/completed")},Ee=async()=>{if(ae())try{const e=ve();console.log("=== ASSESSMENT SUBMISSION DATA ==="),console.log(JSON.stringify(e,null,2)),console.log("=== END OF SUBMISSION DATA ===");const s=await fetch("https://api.career-9.com/assessment-answer/submit",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!s.ok){const l=await s.text();throw new Error(`Failed to submit assessment: ${l}`)}const i=await s.json();console.log("=== SUBMISSION SUCCESSFUL ==="),console.log("Saved answers:",i),y("/studentAssessment/completed")}catch(e){console.error("Error submitting assessment:",e),alert("Failed to submit assessment. Please try again.")}else F(!0)},We=()=>{if(!h)return;const e=String(h.sections[0].section.sectionId),s=$(e,-1);s&&(F(!1),y(`/studentAssessment/sections/${s.sectionId}/questions/${s.questionIndex}`))},Le=(e,s)=>R[e]?.[s]?.length||Object.keys(A[e]?.[s]||{}).length>0||Object.values(O[e]?.[s]||{}).filter(n=>n.trim()).length>0?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":D[e]?.has(s)?"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)":J[e]?.has(s)?"linear-gradient(135deg, #f87171 0%, #dc2626 100%)":"#d1d5db",$=(e,s,i)=>{if(!h)return null;const l=h.sections,n=l.findIndex(a=>String(a.section.sectionId)===e);if(n===-1)return null;for(let a=n;a<l.length;a++){const c=l[a],r=String(c.section.sectionId),x=a===n?s+1:0;for(let d=x;d<c.questions.length;d++){const f=c.questions[d],b=f.questionnaireQuestionId;if(i&&b===i)continue;const w=f.question.questionType==="ranking",q=f.question.questionType==="text"||f.question.isMQTtyped===!0;let I=!1;if(q)I=Object.values(O[r]?.[b]||{}).some(S=>S.trim().length>0);else if(w){const S=A[r]?.[b]||{};I=Object.keys(S).length>0}else I=(R[r]?.[b]?.length||0)>0;if(!I)return{sectionId:r,questionIndex:d}}}for(let a=0;a<=n;a++){const c=l[a],r=String(c.section.sectionId),x=a===n?s:c.questions.length;for(let d=0;d<x;d++){const f=c.questions[d],b=f.questionnaireQuestionId;if(i&&b===i)continue;const w=f.question.questionType==="ranking",q=f.question.questionType==="text"||f.question.isMQTtyped===!0;let I=!1;if(q)I=Object.values(O[r]?.[b]||{}).some(S=>S.trim().length>0);else if(w){const S=A[r]?.[b]||{};I=Object.keys(S).length>0}else I=(R[r]?.[b]?.length||0)>0;if(!I)return{sectionId:r,questionIndex:d}}}return null},Ge=e=>{if(e===100)return p.question.questionText;const s=p.question.languageQuestions?.find(i=>i.language.languageId===e);return s?s.questionText:p.question.questionText},H=(e,s)=>{if(s===100)return e.optionText;const i=e.languageOptions?.find(l=>l.language.languageId===s);return i?i.optionText:e.optionText},ne=e=>!!(e.optionImageBase64&&e.optionImageBase64.trim()!==""),Qe=e=>e.optionImageBase64?e.optionImageBase64.startsWith("data:")?e.optionImageBase64:`data:image/png;base64,${e.optionImageBase64}`:"",le=(e,s)=>ne(e)?t.jsx("img",{src:Qe(e),alt:e.optionText||"Option image",style:{maxWidth:"200px",maxHeight:"150px",objectFit:"contain",borderRadius:"8px",border:"1px solid #e0e0e0",filter:"brightness(0.85) contrast(1.15)"}}):s!==void 0?H(e,s):e.optionText,Be=e=>e.optionDescription?t.jsx("div",{style:{fontSize:"0.85rem",color:"#9ca3af",marginTop:"4px",lineHeight:"1.4",fontWeight:400,fontStyle:"italic"},children:e.optionDescription}):null,$e=e=>{ee(e),Z(!0)},Me=()=>{if(Q&&o){we(s=>({...s,[Q]:!0}));const e=p.question.options.find(s=>s.isGame&&s.game?.gameCode===Q);e&&(te(s=>{const i=s[o]||{},l=i[m]||[];if(!l.includes(e.optionId)){const n=[...l,e.optionId];return console.log(`‚úÖ Game completed! Marking question ${m} as answered with option ${e.optionId}`),{...s,[o]:{...i,[m]:n}}}return s}),B(s=>{const i=new Set(s[o]||[]);return i.delete(m),{...s,[o]:i}}))}Z(!1),ee(null)},Pe=()=>{Z(!1),ee(null)};if(he&&Q){const e=localStorage.getItem("User Student id")||"",s=localStorage.getItem("userName")||"Student";return t.jsx(et,{gameCode:Q,userStudentId:e,playerName:s,onComplete:Me,onExit:Pe})}return t.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",colorScheme:"light"},children:[fe&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>K(!1),children:t.jsxs("div",{style:{background:"#fff",borderRadius:"12px",padding:"28px 32px",maxWidth:"600px",width:"90%",maxHeight:"80vh",overflowY:"auto",color:"#2d3748"},onClick:e=>e.stopPropagation(),children:[t.jsx("h5",{style:{fontWeight:700,marginBottom:"16px",color:"#2d3748"},children:"Section Instructions"}),X.map((e,s)=>t.jsxs("div",{style:{marginBottom:s<X.length-1?"16px":0},children:[X.length>1&&t.jsx("div",{style:{fontSize:"0.85rem",fontWeight:600,color:"#667eea",marginBottom:"6px"},children:e.language}),t.jsx("p",{style:{whiteSpace:"pre-line",lineHeight:1.7,margin:0,fontSize:"1rem",color:"#4a5568"},children:e.text})]},s)),t.jsx("div",{style:{textAlign:"right",marginTop:"20px"},children:t.jsx("button",{onClick:()=>K(!1),style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",border:"none",borderRadius:"8px",padding:"8px 28px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer"},children:"OK"})})]})}),t.jsxs("div",{style:{width:280,background:"#ffffff",borderRight:"none",display:"flex",flexDirection:"column",height:"100vh",position:"sticky",top:0,boxShadow:"4px 0 30px rgba(0,0,0,0.1)",borderRadius:"0 24px 24px 0",colorScheme:"light",color:"#2d3748"},children:[t.jsxs("div",{style:{borderBottom:"2px solid #e2e8f0",padding:"16px 20px",background:"linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%)"},children:[t.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"12px"},children:t.jsx("img",{src:"/media/logos/kcc.jpg",alt:"KCC Logo",style:{height:"48px",objectFit:"contain"}})}),t.jsxs("h6",{style:{fontSize:"0.85rem",fontWeight:700,color:"#2d3748",marginBottom:"10px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{width:"6px",height:"18px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"3px"}}),"Legend"]}),t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"6px 12px"},children:[t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx("div",{style:{width:14,height:14,borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",flexShrink:0,boxShadow:"0 2px 6px rgba(102, 126, 234, 0.4)"}}),t.jsx("span",{style:{fontSize:"0.8rem",color:"#4a5568",fontWeight:500},children:"Answered"})]}),t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx("div",{style:{width:14,height:14,borderRadius:"50%",background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",flexShrink:0,boxShadow:"0 2px 6px rgba(251, 191, 36, 0.4)"}}),t.jsx("span",{style:{fontSize:"0.8rem",color:"#4a5568",fontWeight:500},children:"Saved"})]}),t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx("div",{style:{width:14,height:14,borderRadius:"50%",background:"linear-gradient(135deg, #f87171 0%, #dc2626 100%)",flexShrink:0,boxShadow:"0 2px 6px rgba(248, 113, 113, 0.4)"}}),t.jsx("span",{style:{fontSize:"0.8rem",color:"#4a5568",fontWeight:500},children:"Skipped"})]}),t.jsxs("div",{className:"d-flex align-items-center gap-2",children:[t.jsx("div",{style:{width:14,height:14,borderRadius:"50%",background:"#d1d5db",flexShrink:0,border:"2px solid #9ca3af"}}),t.jsx("span",{style:{fontSize:"0.8rem",color:"#4a5568",fontWeight:500},children:"Not Visited"})]})]})]}),t.jsxs("div",{style:{flex:1,overflowY:"auto",padding:20},children:[t.jsxs("h6",{style:{fontSize:"0.95rem",fontWeight:700,color:"#2d3748",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[t.jsx("span",{style:{width:"6px",height:"20px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"3px"}}),"Question Status"]}),h.sections.map(e=>t.jsxs("div",{className:"mb-4",children:[t.jsx("div",{style:{fontSize:"0.9rem",fontWeight:600,color:"#4a5568",marginBottom:"10px",padding:"6px 12px",background:"rgba(102, 126, 234, 0.08)",borderRadius:"8px",borderLeft:"3px solid #667eea"},children:e.section.sectionName}),t.jsx("div",{className:"d-flex flex-wrap gap-2",children:e.questions.map((s,i)=>t.jsx("div",{onClick:()=>y(`/studentAssessment/sections/${e.section.sectionId}/questions/${i}`),style:{width:32,height:32,borderRadius:"8px",background:Le(String(e.section.sectionId),s.questionnaireQuestionId),color:"#fff",fontSize:12,fontWeight:600,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:i+1},s.questionnaireQuestionId))})]},e.section.sectionId))]})]}),t.jsx("div",{style:{flex:1,display:"flex",justifyContent:"center",alignItems:"flex-start",padding:"30px 30px 30px 20px",overflowY:"auto"},children:t.jsx("div",{className:"card",style:{width:"auto",minWidth:"900px",maxWidth:"1200px",minHeight:"auto",borderRadius:"24px",border:"none",boxShadow:"0 20px 60px rgba(0,0,0,0.15)",background:"#ffffff",colorScheme:"light",color:"#2d3748"},children:t.jsxs("div",{className:"card-body p-5",children:[t.jsx("div",{className:"mb-3",children:t.jsx("span",{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.15) 100%)",color:"#667eea",padding:"8px 20px",borderRadius:"30px",fontSize:"0.9rem",fontWeight:600,display:"inline-block",border:"1px solid rgba(102, 126, 234, 0.3)"},children:ue?.section?.sectionName})}),t.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[t.jsxs("h6",{style:{color:"#2d3748",fontWeight:700,marginBottom:0,fontSize:"1.1rem"},children:["Question ",g+1," of ",z.length]}),W&&t.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"10px 24px",borderRadius:"30px",fontWeight:700,fontSize:"1rem",color:"white",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:["‚è±Ô∏è ",Ie(se)]})]}),xe&&t.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>F(!1),children:t.jsxs("div",{style:{background:"#fff",borderRadius:"16px",padding:"32px 36px",maxWidth:"440px",width:"90%",textAlign:"center",boxShadow:"0 20px 60px rgba(0,0,0,0.25)",color:"#2d3748"},onClick:e=>e.stopPropagation(),children:[t.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 16px",fontSize:"1.8rem"},children:"‚ö†Ô∏è"}),t.jsx("h5",{style:{fontWeight:700,marginBottom:"12px",color:"#1a202c",fontSize:"1.2rem"},children:"Mark all answers before saving"}),t.jsx("p",{style:{color:"#6b7280",fontSize:"0.95rem",lineHeight:1.6,marginBottom:"24px"},children:"Some questions are still unanswered, saved for later, or skipped. Please answer all questions before submitting."}),t.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[t.jsx("button",{onClick:()=>F(!1),style:{background:"#e2e8f0",color:"#4a5568",border:"none",borderRadius:"10px",padding:"10px 24px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer"},children:"Close"}),t.jsx("button",{onClick:We,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",border:"none",borderRadius:"10px",padding:"10px 24px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)"},children:"Continue ‚Üí"})]})]})}),j.length>0?t.jsx("div",{style:{display:"grid",gridTemplateColumns:j.length>1?"1fr 1px 1fr":"1fr",gap:20,marginBottom:30},children:j.map((e,s)=>t.jsxs(U.Fragment,{children:[t.jsxs("div",{children:[t.jsx("h6",{className:"fw-bold mb-3"}),t.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.7",whiteSpace:"pre-line",color:"#1a202c",fontWeight:500},children:Ge(e.language.languageId)})]}),s===0&&j.length>1&&t.jsx("div",{style:{width:1,backgroundColor:"#dee2e6"}})]},e.language.languageId))}):t.jsx("h4",{className:"mb-4",style:{fontSize:"1.2rem",color:"#1a202c",fontWeight:500},children:p.question.questionText}),t.jsx("div",{className:"text-muted mb-3",children:t.jsx("small",{style:{fontSize:"1.1rem",color:"#4a5568",fontWeight:500},children:p.question.questionType==="text"||p.question.isMQTtyped===!0?t.jsxs(t.Fragment,{children:["Please type your response(s) below. You can enter up to ",t.jsx("strong",{children:p.question.maxOptionsAllowed||1})," response(s)."]}):p.question.questionType==="ranking"?t.jsxs(t.Fragment,{children:["Please rank ",t.jsx("strong",{children:p.question.maxOptionsAllowed})," option(s) in order of preference (1 = most important)."]}):p.question.maxOptionsAllowed===0?t.jsx(t.Fragment,{}):t.jsxs(t.Fragment,{children:["You can select up to ",t.jsx("strong",{children:p.question.maxOptionsAllowed})," option(s)."]})})}),t.jsx("div",{className:"mt-4",children:(()=>{const e=p.question.options,s=p.question.questionType==="ranking";if(p.question.questionType==="text"||p.question.isMQTtyped===!0){const n=p.question.maxOptionsAllowed||1,a=O[o]?.[m]||{},c=(x,d)=>{ye(f=>({...f,[o]:{...f[o],[m]:{...f[o]?.[m]||{},[x]:d}}})),B(f=>{const b=new Set(f[o]||[]);return b.delete(m),{...f,[o]:b}})},r=(x,d)=>{c(x,d),_(null)};return t.jsx("div",{children:Array.from({length:n},(x,d)=>{const f=(a[d]||"").toLowerCase(),b=(a[d]||"").trim().toLowerCase(),w=e.filter(S=>{const C=S.optionText?.toLowerCase()||"";return Object.entries(a).some(([M,Fe])=>Number(M)!==d&&Fe.trim().toLowerCase()===C)?!1:f.length<4?!0:C.includes(f)}),q=je===`${m}-${d}`&&w.length>0,I=w.length===1&&w[0].optionText?.toLowerCase()===b;return t.jsxs("div",{className:"mb-3",style:{position:"relative"},children:[t.jsxs("label",{className:"fw-bold mb-1",style:{fontSize:"1rem",color:"#4a5568"},children:["Response ",d+1,":"]}),t.jsx("input",{type:"text",className:"form-control form-control-lg",placeholder:"Type your answer...",value:a[d]||"",onChange:S=>{c(d,S.target.value),_(`${m}-${d}`)},onFocus:()=>_(`${m}-${d}`),onBlur:()=>setTimeout(()=>_(null),200),autoComplete:"off",style:{fontSize:"1.1rem",padding:"12px 16px",borderColor:"#dee2e6"}}),q&&!I&&t.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,zIndex:1e3,background:"#fff",border:"1px solid #e2e8f0",borderTop:"none",borderRadius:"0 0 8px 8px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",maxHeight:"240px",overflowY:"auto"},children:w.map(S=>{const C=S.optionText||"",L=C.toLowerCase().indexOf(f);return t.jsx("div",{onMouseDown:()=>r(d,C),style:{padding:"10px 16px",cursor:"pointer",fontSize:"1rem",borderBottom:"1px solid #f1f5f9",transition:"background 0.15s"},onMouseEnter:M=>M.currentTarget.style.background="#f7fafc",onMouseLeave:M=>M.currentTarget.style.background="#fff",children:L>=0?t.jsxs(t.Fragment,{children:[C.slice(0,L),t.jsx("strong",{children:C.slice(L,L+f.length)}),C.slice(L+f.length)]}):C},S.optionId)})})]},d)})})}const l=(n,a)=>{if(n.isGame&&n.game)return t.jsx("div",{className:"rounded p-4 mb-3",style:{border:"1px solid #dee2e6",background:"#faf5ff"},children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"font-bold text-purple-900 mb-2",style:{fontSize:"1.1rem",color:"#2d3748"},children:["üéÆ Game: ",n.game.gameName]}),j.length>0?t.jsx("div",{style:{display:"grid",gridTemplateColumns:j.length>1?"1fr 1px 1fr":"1fr",gap:15},children:j.map((c,r)=>t.jsxs(U.Fragment,{children:[t.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.6",color:"#2d3748"},children:H(n,c.language.languageId)}),r===0&&j.length>1&&t.jsx("div",{style:{width:1,backgroundColor:"#dee2e6"}})]},c.language.languageId))}):t.jsx("span",{style:{fontSize:"1.2rem",color:"#2d3748"},children:n.optionText})]}),t.jsx("button",{onClick:()=>$e(n.game.gameCode),style:{marginLeft:"16px",background:v.includes(n.optionId)||n.game&&E[n.game.gameCode]?"linear-gradient(to right, #22c55e, #16a34a)":"linear-gradient(to right, #8b5cf6, #d946ef)",color:"white",padding:"12px 24px",borderRadius:"9999px",fontWeight:700,fontSize:"14px",border:"none",cursor:v.includes(n.optionId)||n.game&&E[n.game.gameCode]?"default":"pointer",boxShadow:"0 4px 15px rgba(139, 92, 246, 0.4)",transition:"all 0.2s ease",opacity:v.includes(n.optionId)||n.game&&E[n.game.gameCode]?.8:1},disabled:v.includes(n.optionId)||n.game&&E[n.game.gameCode],children:v.includes(n.optionId)||n.game&&E[n.game.gameCode]?"‚úì Completed":"üéÆ Launch Game"})]})},n.optionId);if(s){const c=A[o]?.[m]?.[n.optionId],r=Ae(n.optionId);return t.jsxs("div",{className:"rounded p-3 d-block mb-2",style:{display:"flex",alignItems:"center",gap:"15px",background:c?"#f8f9fa":"#fff",border:"1px solid #dee2e6"},children:[t.jsx("div",{style:{minWidth:"120px"},children:t.jsxs("select",{className:"form-select form-select-sm",value:c||"",onChange:x=>{const d=x.target.value;Ce(n.optionId,d?parseInt(d):null)},style:{width:"110px",fontSize:"1rem",fontWeight:600,color:"#2d3748",background:"#fff",borderColor:"#dee2e6"},children:[t.jsx("option",{value:"",children:"Rank"}),c&&!r.includes(c)?t.jsx("option",{value:c,children:c}):null,r.map(x=>t.jsx("option",{value:x,children:x},x))]})}),t.jsx("div",{style:{flex:1},children:ne(n)?le(n):j.length>0?t.jsx("div",{style:{display:"grid",gridTemplateColumns:j.length>1?"1fr 1px 1fr":"1fr",gap:15},children:j.map((x,d)=>t.jsxs(U.Fragment,{children:[t.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.6",color:"#2d3748"},children:H(n,x.language.languageId)}),d===0&&j.length>1&&t.jsx("div",{style:{width:1,backgroundColor:"#dee2e6"}})]},x.language.languageId))}):t.jsx("span",{style:{fontSize:"1.2rem",color:"#2d3748"},children:n.optionText})})]},n.optionId)}return t.jsx("label",{className:"rounded p-3 d-block mb-2",style:{cursor:"pointer",background:v.includes(n.optionId)?"#f8f9fa":"#fff",border:"1px solid #dee2e6"},children:t.jsxs("div",{className:"d-flex align-items-start",children:[t.jsx("input",{type:"checkbox",className:"me-3 mt-1",checked:v.includes(n.optionId),onChange:()=>qe(n.optionId),disabled:p.question.maxOptionsAllowed>0&&!v.includes(n.optionId)&&v.length>=p.question.maxOptionsAllowed}),t.jsxs("div",{style:{flex:1},children:[ne(n)?t.jsx("div",{children:le(n)}):j.length>0?t.jsx("div",{style:{display:"grid",gridTemplateColumns:j.length>1?"1fr 1px 1fr":"1fr",gap:15},children:j.map((c,r)=>t.jsxs(U.Fragment,{children:[t.jsx("div",{style:{fontSize:"1.2rem",lineHeight:"1.6",color:"#2d3748"},children:H(n,c.language.languageId)}),r===0&&j.length>1&&t.jsx("div",{style:{width:1,backgroundColor:"#dee2e6"}})]},c.language.languageId))}):t.jsx("span",{style:{fontSize:"1.2rem",color:"#2d3748"},children:n.optionText}),Be(n)]})]})},n.optionId)};if(e.length>5){const n=Math.ceil(e.length/2),a=e.slice(0,n),c=e.slice(n);return t.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[t.jsx("div",{children:a.map((r,x)=>l(r))}),t.jsx("div",{children:c.map((r,x)=>l(r))})]})}return e.map((n,a)=>l(n))})()}),t.jsxs("div",{className:"d-flex justify-content-between mt-5 pt-3",style:{borderTop:"1px solid #e2e8f0"},children:[t.jsx("button",{disabled:g===0,onClick:Oe,style:{background:g===0?"#e2e8f0":"white",color:g===0?"#9ca3af":"#4a5568",border:"2px solid #e2e8f0",borderRadius:"12px",padding:"12px 28px",fontWeight:600,fontSize:"0.95rem",cursor:g===0?"not-allowed":"pointer",transition:"all 0.2s ease"},children:"‚Üê Back"}),t.jsxs("div",{className:"d-flex gap-3 align-items-center",children:[t.jsx("button",{onClick:Ne,style:{background:"linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%)",color:"#78350f",border:"none",borderRadius:"12px",padding:"12px 24px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer",boxShadow:"0 4px 15px rgba(251, 191, 36, 0.4)",transition:"all 0.2s ease"},children:"Save for Later"}),!re()&&t.jsx("button",{onClick:Re,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"12px",padding:"12px 32px",fontWeight:600,fontSize:"0.95rem",cursor:"pointer",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.2s ease"},children:g===z.length-1?"NEXT SECTION ‚Üí":"NEXT ‚Üí"}),(re()||ae())&&t.jsx("button",{onClick:Ee,style:{background:"linear-gradient(135deg, #22c55e 0%, #16a34a 100%)",color:"white",border:"none",borderRadius:"12px",padding:"12px 32px",fontWeight:700,fontSize:"1rem",cursor:"pointer",boxShadow:"0 4px 15px rgba(34, 197, 94, 0.4)",transition:"all 0.2s ease",marginLeft:"auto"},children:"‚úì SUBMIT ASSESSMENT"})]})]})]})})})]})};export{nt as default};
